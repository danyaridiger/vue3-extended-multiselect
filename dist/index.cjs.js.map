{"version":3,"file":"index.cjs.js","sources":["../src/sets/sets.js","../src/tools/LocalEmitter.js","../src/tools/instance.js","../src/composition/toggle.js","../src/composition/cancel.js","../src/composition/labels.js","../src/composition/preselected-options.js","../src/composition/sizes.js","../src/icons/LoaderIcon.vue?vue&type=template&id=e755968c&lang.js","../src/components/ExtendedMultiselectLoader.vue","../src/icons/CancelIcon.vue?vue&type=template&id=343647be&lang.js","../src/components/ExtendedMultiselectCancel.vue","../src/tools/Debounce.js","../src/components/ExtendedMultiselectMultiple.vue","../src/components/ExtendedMultiselectInput.vue","../src/composition/debounce.js","../src/components/ExtendedMultiselectOptions.vue","../src/icons/BaseArrowIcon.vue?vue&type=template&id=a4a66c9a&lang.js","../src/icons/CircleArrowIcon.vue?vue&type=template&id=df1340d8&lang.js","../src/icons/DoubleArrowIcon.vue?vue&type=template&id=09f7ca33&lang.js","../src/icons/InnerArrowIcon.vue?vue&type=template&id=6b2f14fa&lang.js","../src/icons/TriangleCircleArrowIcon.vue?vue&type=template&id=907bb328&lang.js","../src/icons/WideArrowIcon.vue?vue&type=template&id=144fb4f1&lang.js","../src/icons/TriangleArrowIcon.vue?vue&type=template&id=b8157a48&lang.js","../src/components/ExtendedMultiselectToggle.vue","../src/components/Vue3ExtendedMultiselect.vue","../src/composition/search-value.js","../src/composition/emitter.js","../src/composition/click-outside.js","../node_modules/style-inject/dist/style-inject.es.js"],"sourcesContent":["/**\n * Set of background- and border- style variants\n * @constant {Array} themeTypes\n */\nexport const themeTypes = [\"basic\", \"slate-grey\", \"slate-blue\", \"teal\", \"strict\"];\n\n/**\n * Set of color-style variants for loader\n * @constant {Array} loaderThemeTypes\n */\nexport const loaderThemeTypes = [\"loader-default\", ...themeTypes];\n\n/**\n * Set of icon filenames\n * @constant {Array} toggleIcons\n */\nexport const toggleIcons = [\n  \"base-arrow\",\n  \"double-arrow\",\n  \"wide-arrow\",\n  \"circle-arrow\",\n  \"inner-arrow\",\n  \"triangle-arrow\",\n  \"triangle-circle-arrow\",\n];\n\n/**\n * Set of icon colors filtered by svg\n * @constant {Array} iconFilters\n */\nexport const iconFilters = [\"basic\", \"black\", \"green\"];\n\n/**\n * Set of icons sizes filtered by css\n * @constant {Array} iconSizes\n */\nexport const iconSizes = [\"large\", \"medium\", \"small\"];\n\n/**\n * Set of types for options created by user\n * @constant {Array} createOptionTypes\n */\nexport const createOptionTypes = [\"primitive\", \"array\", \"object\"];\n\n/**\n * Set of keys to combine with cliks on options list and blocking choice\n * @constant {Array} specialKeysToBlock\n */\nexport const specialKeysToBlock = [\"alt\", \"ctrl\", \"shift\"];\n\n/**\n * Set of appearance variants of options list\n * @constant {Array} toggleAppearenceSides\n */\nexport const toggleAppearenceSides = [\"auto\", \"atop\", \"under\"];\n\n/**\n * Set of available types for options\n * @constant {Array} UnionPropType\n * @typedef {(string|number|boolean|Array|Object|Function|null|undefined)} UnionPropType\n */\nexport const UnionPropType = [\n  String,\n  Number,\n  Boolean,\n  Array,\n  Object,\n  Function,\n  null,\n  undefined,\n];\n","/**\n * Event emitter\n * @class\n */\n\nclass LocalEmitter {\n  _eventsStack = {\n    payload: null,\n  };\n  _eventsRegistered = [];\n\n  /**\n   * Triggers some event with given name\n   * @method\n   * @param {string} eventName - name of event\n   * @param {} payload - data of event\n   */\n  emit(eventName, payload = null) {\n    const proxies = this._eventsRegistered.filter(\n      (event) => event.eventName === eventName,\n    );\n\n    if (!proxies.length) return;\n\n    proxies.forEach((proxy) => {\n      this._eventsStack.payload = payload;\n      proxy.proxy.payload = payload;\n    });\n  }\n\n  /**\n   * Registers an event listener with the given name\n   * @method\n   * @param {string} eventName - name of event\n   * @param {Function} callback - function to fire due to event\n   */\n  on(eventName, callback) {\n    this._eventsRegistered.push({\n      eventName,\n      proxy: new Proxy(this._eventsStack, {\n        set(target) {\n          callback(target.payload);\n\n          return target;\n        },\n      }),\n    });\n  }\n}\n\nexport default LocalEmitter;\n","import LocalEmitter from \"../tools/LocalEmitter\";\n\nexport default new LocalEmitter();\n","import { computed, readonly } from \"vue\";\n\nexport default function useToggle(loading, disabled, emitter) {\n  /**\n   * Toggles classes of slots if \"loading\"\n   * or \"disabled\" props equals true\n   * @function\n   * @returns {string} class\n   */\n  const toggleSlotClass = computed(() => {\n    return loading.value || disabled.value\n      ? \"extended__multiselect-toggle--disabled\"\n      : \"extended__multiselect-toggle\";\n  });\n\n  /**\n   * Emits an event which listeners will toggle options list\n   * @function\n   * @emits extended:toggle-options\n   * @param {MouseEvent|KeyboardEvent} event - MouseEvent or KeyboardEvent instance\n   */\n  const toggleOptionsList = (event) => {\n    if (event && event.code === \"Tab\") return;\n\n    emitter.value.emit(\"extended:toggle-options\");\n  };\n\n  return {\n    toggleSlotClass: readonly(toggleSlotClass),\n    toggleOptionsList,\n  };\n}\n","export default function useCancel(\n  disabled,\n  loading,\n  showSearchField,\n  selectedOptions,\n  emitter,\n  setSearchValue,\n  setSearchPattern,\n) {\n  /**\n   * Removes all selected options or single selected option\n   * when \"multiple\" prop equals false\n   * @function\n   * @emits extended:skip-block-blur-zeroing\n   * @emits extended:deselect-option\n   * @emits extended:clean-options\n   */\n  const cancel = () => {\n    if (disabled.value || loading.value) return;\n\n    const deselectedOptions = selectedOptions.value;\n\n    emitter.value.emit(\"extended:skip-block-blur-zeroing\");\n    emitter.value.emit(\"extended:deselect-option\", {\n      index: null,\n      clearAll: true,\n      deselectedOptions,\n    });\n\n    if (!showSearchField.value) return;\n\n    emitter.value.emit(\"extended:clean-options\");\n\n    setSearchValue(null);\n    setSearchPattern(null);\n  };\n\n  return { cancel };\n}\n","export default function useLabels(\n  label,\n  createCustomOptionLabel,\n  emptyObjectsPlaceholder,\n) {\n  /**\n   * Creates label of any kind of option\n   * @function\n   * @param {string} label - label field in options of type \"object\"\n   * @param {option} UnionPropType\n   * @returns {string} label\n   */\n  const optionCreateLabel = (option) => {\n    const isFunction = typeof option === \"function\";\n\n    if (!option && isFunction) return \"\";\n\n    const customOptionLabel = createCustomOptionLabel.value(option);\n\n    if (customOptionLabel) return customOptionLabel;\n\n    if (Array.isArray(option) && option.length > 0) {\n      return option.join(\", \");\n    }\n\n    if (typeof option !== \"object\") return option.toString();\n\n    if (Object.keys(option).length === 0) {\n      return emptyObjectsPlaceholder.value;\n    }\n\n    const hasLabel = Object.getOwnPropertyNames(option).includes(label.value);\n\n    if (hasLabel) {\n      return option[label.value] && typeof option[label.value] === \"object\"\n        ? JSON.stringify(option[label.value])\n        : option[label.value];\n    }\n\n    return \"\";\n  };\n\n  return { optionCreateLabel };\n}\n","export default function usePreselectedOptions(\n  label,\n  emptyObjectsPlaceholder,\n  showInsertWarnings,\n) {\n  /**\n   * Creates string label for any kind of option\n   * @function\n   * @param {string} label - label field in options of type \"object\"\n   * @param {boolean} isObjectOrArray - determines whether option is of type \"object\" or instance of Array\n   * @param {UnionPropType} option - option which needs label\n   * @returns {string} label\n   */\n  const createLabel = (isObjectOrArray, option) => {\n    let createdLabel;\n\n    if (isObjectOrArray) {\n      if (Array.isArray(option) && option.length > 0) {\n        createdLabel = option.join(\", \");\n      } else {\n        createdLabel =\n          option[label.value] && typeof option[label.value] === \"object\"\n            ? JSON.stringify(option[label.value])\n            : option[label.value];\n      }\n\n      if (Object.keys(option).length === 0) {\n        createdLabel = emptyObjectsPlaceholder.value;\n      }\n    } else {\n      createdLabel = option.toString();\n    }\n\n    return createdLabel;\n  };\n\n  /**\n   * Restricts wrong types of options in options list\n   * @method\n   * @param {UnionPropType} option - option to restrict\n   * @returns {boolean} restriction\n   */\n  const optionTypeRestrictor = (option) => {\n    if (!option) return false;\n\n    const isObjectArrayInstance =\n      Object.getPrototypeOf(option).constructor.name !== \"Object\" &&\n      Object.getPrototypeOf(option).constructor.name !== \"Array\";\n    const isAnyInstance = option && typeof option === \"object\" && isObjectArrayInstance;\n    const isSymbol = typeof option === \"symbol\";\n\n    if (isSymbol && showInsertWarnings.value) {\n      console.warn(\"vue-extended-multiselect: option can not be of type «symbol»\");\n    }\n\n    if (isAnyInstance && showInsertWarnings.value) {\n      console.warn(\n        \"vue-extended-multiselect: option can not be an instance of any constructor function\",\n      );\n    }\n\n    if (isSymbol || isAnyInstance) return false;\n\n    return true;\n  };\n\n  return {\n    createLabel,\n    optionTypeRestrictor,\n  };\n}\n","import { computed, getCurrentInstance, readonly } from \"vue\";\n\nexport default function useSizes(iconSize) {\n  /**\n   * Defines classes for each kind of icon\n   * @function\n   * @returns {string} class\n   */\n  const iconSizeClass = computed(() => {\n    let basicIconSize = \"extended__multiselect\";\n\n    switch (getCurrentInstance().type.__name) {\n      case \"ExtendedMultiselectLoader\":\n        basicIconSize += \"-loader_icon\";\n        break;\n      case \"ExtendedMultiselectToggle\":\n        basicIconSize += \"-toggle_icon\";\n        break;\n      case \"ExtendedMultiselectCancel\":\n        basicIconSize += \"-cancel_icon\";\n        break;\n      default:\n        basicIconSize += \"-toggle_icon\";\n    }\n\n    switch (iconSize.value) {\n      case \"large\":\n        return `${basicIconSize}-large`;\n      case \"medium\":\n        return `${basicIconSize}-medium`;\n      case \"small\":\n        return `${basicIconSize}-small`;\n      case \"deselect\":\n        return `${basicIconSize}-deselect`;\n      default:\n        return `${basicIconSize}-large`;\n    }\n  });\n\n  return { iconSizeClass: readonly(iconSizeClass) };\n}\n","<template>\r\n  <svg\r\n    style=\"enable-background: new 0 0 128 128\"\r\n    version=\"1.1\"\r\n    viewBox=\"0 0 128 128\"\r\n    xml:space=\"preserve\"\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n    xmlns:xlink=\"http://www.w3.org/1999/xlink\"\r\n  >\r\n    <g>\r\n      <path\r\n        d=\"M96.1,103.6c-10.4,8.4-23.5,12.4-36.8,11.1c-10.5-1-20.3-5.1-28.2-11.8H44v-8H18v26h8v-11.9c9.1,7.7,20.4,12.5,32.6,13.6   c1.9,0.2,3.7,0.3,5.5,0.3c13.5,0,26.5-4.6,37-13.2c19.1-15.4,26.6-40.5,19.1-63.9l-7.6,2.4C119,68.6,112.6,90.3,96.1,103.6z\"\r\n      />\r\n      <path\r\n        d=\"M103,19.7c-21.2-18.7-53.5-20-76.1-1.6C7.9,33.5,0.4,58.4,7.7,81.7l7.6-2.4C9,59.2,15.5,37.6,31.9,24.4   C51.6,8.4,79.7,9.6,98,26H85v8h26V8h-8V19.7z\"\r\n      />\r\n    </g>\r\n  </svg>\r\n</template>\r\n","<template>\r\n  <div class=\"extended__multiselect-loader\">\r\n    <loader-icon\r\n      :class=\"[iconFilterClass, iconSizeClass, 'extended__multiselect-loader-animate']\"\r\n    />\r\n    <svg\r\n      version=\"1.1\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      xmlns:xlink=\"http://www.w3.org/1999/xlink\"\r\n      width=\"0\"\r\n      height=\"0\"\r\n    >\r\n      <defs>\r\n        <filter x=\"0\" y=\"0\" width=\"1\" height=\"1\" id=\"filterLoaderDefault\">\r\n          <feFlood flood-color=\"#00BFFF\" />\r\n          <feComposite out=\"SourceGraphic\" in2=\"SourceGraphic\" operator=\"in\" />\r\n        </filter>\r\n        <filter x=\"0\" y=\"0\" width=\"1\" height=\"1\" id=\"filterLoaderBasic\">\r\n          <feFlood flood-color=\"#708090\" />\r\n          <feComposite out=\"SourceGraphic\" in2=\"SourceGraphic\" operator=\"in\" />\r\n        </filter>\r\n        <filter x=\"0\" y=\"0\" width=\"1\" height=\"1\" id=\"filterLoaderSlateGrey\">\r\n          <feFlood flood-color=\"#2F4F4F\" />\r\n          <feComposite out=\"SourceGraphic\" in2=\"SourceGraphic\" operator=\"in\" />\r\n        </filter>\r\n        <filter x=\"0\" y=\"0\" width=\"1\" height=\"1\" id=\"filterLoaderSlateBlue\">\r\n          <feFlood flood-color=\"#483D8B\" />\r\n          <feComposite out=\"SourceGraphic\" in2=\"SourceGraphic\" operator=\"in\" />\r\n        </filter>\r\n        <filter x=\"0\" y=\"0\" width=\"1\" height=\"1\" id=\"filterLoaderTeal\">\r\n          <feFlood flood-color=\"#008080\" />\r\n          <feComposite out=\"SourceGraphic\" in2=\"SourceGraphic\" operator=\"in\" />\r\n        </filter>\r\n        <filter x=\"0\" y=\"0\" width=\"1\" height=\"1\" id=\"filterLoaderStrict\">\r\n          <feFlood flood-color=\"#00BFFF\" />\r\n          <feComposite out=\"SourceGraphic\" in2=\"SourceGraphic\" operator=\"in\" />\r\n        </filter>\r\n      </defs>\r\n    </svg>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { computed, defineProps, inject, toRefs } from \"vue\";\r\n\r\nimport useSizes from \"../composition/sizes\";\r\n\r\nimport LoaderIcon from \"../icons/LoaderIcon.vue\";\r\n\r\nconst props = defineProps({\r\n  /**\r\n   * Provides size to create special size-class\r\n   * for each kind of icon\r\n   * @property {string} iconSize\r\n   */\r\n  iconSize: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n});\r\n\r\nconst loaderIconFilter = inject(\"loaderIconFilter\");\r\n\r\nconst { iconSize } = toRefs(props);\r\n\r\nconst { iconSizeClass } = useSizes(iconSize);\r\n\r\n/**\r\n * Defines class for loader icon\r\n * depends on injected filter name\r\n * @function\r\n * @returns {string} class\r\n */\r\nconst iconFilterClass = computed(() => {\r\n  let basicFilter = \"extended__multiselect-loader\";\r\n\r\n  switch (loaderIconFilter) {\r\n    case \"default-loader\":\r\n      basicFilter = `${basicFilter}_default-loader`;\r\n      break;\r\n    case \"basic\":\r\n      basicFilter = `${basicFilter}_basic`;\r\n      break;\r\n    case \"slate-grey\":\r\n      basicFilter = `${basicFilter}_slate-grey`;\r\n      break;\r\n    case \"slate-blue\":\r\n      basicFilter = `${basicFilter}_slate-blue`;\r\n      break;\r\n    case \"teal\":\r\n      basicFilter = `${basicFilter}_teal`;\r\n      break;\r\n    case \"strict\":\r\n      basicFilter = `${basicFilter}_strict`;\r\n      break;\r\n    default:\r\n      basicFilter = `${basicFilter}_default-loader`;\r\n  }\r\n\r\n  return basicFilter;\r\n});\r\n</script>\r\n","<template>\r\n  <svg\r\n    style=\"enable-background: new 0 0 35.999 36.005\"\r\n    version=\"1.1\"\r\n    viewBox=\"0 0 35.505 36.005\"\r\n    xml:space=\"preserve\"\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n    xmlns:xlink=\"http://www.w3.org/1999/xlink\"\r\n  >\r\n    <g>\r\n      <g>\r\n        <g>\r\n          <path\r\n            d=\"M0,0v36.005h35.999V0H0z\"\r\n            marker-end=\"none\"\r\n            marker-start=\"none\"\r\n            style=\"fill: none\"\r\n          />\r\n          <g>\r\n            <defs>\r\n              <rect height=\"36.005\" width=\"35.999\" y=\"0\" />\r\n            </defs>\r\n            <clipPath>\r\n              <use style=\"overflow: visible\" xlink:href=\"#SVGID_1_\" />\r\n            </clipPath>\r\n            <g style=\"clip-path: url(#SVGID_2_)\">\r\n              <g>\r\n                <path\r\n                  d=\"M2.995,4.799v26.403c0,0.995,0.805,1.8,1.799,1.8        h26.405c0.995,0,1.8-0.805,1.8-1.8V4.799c0-0.994-0.805-1.799-1.8-1.799H4.794C3.8,3,2.995,3.805,2.995,4.799z\"\r\n                  marker-end=\"none\"\r\n                  marker-start=\"none\"\r\n                  style=\"fill: #990e0d\"\r\n                />\r\n                <linearGradient\r\n                  gradientTransform=\"matrix(1 0 0 1 167.998 491.77)\"\r\n                  gradientUnits=\"userSpaceOnUse\"\r\n                  x1=\"-150.3105\"\r\n                  x2=\"-149.2125\"\r\n                  y1=\"-461.7169\"\r\n                  y2=\"-504.473\"\r\n                >\r\n                  <stop offset=\"0\" style=\"stop-color: #df1413\" />\r\n                  <stop offset=\"1\" style=\"stop-color: #990e0d\" />\r\n                </linearGradient>\r\n                <path\r\n                  d=\"M3.745,31.202V4.799        c0-0.579,0.469-1.049,1.049-1.049h26.405c0.581,0,1.05,0.47,1.05,1.049v26.403c0,0.581-0.47,1.05-1.05,1.05H4.794        C4.214,32.252,3.745,31.784,3.745,31.202z\"\r\n                  marker-end=\"none\"\r\n                  marker-start=\"none\"\r\n                  style=\"fill: url(#SVGID_3_)\"\r\n                />\r\n              </g>\r\n              <g>\r\n                <path\r\n                  d=\"M9.961,8.892        l16.073,16.072\"\r\n                  style=\"\r\n                    fill: none;\r\n                    stroke: #990e0d;\r\n                    stroke-width: 4.287;\r\n                    stroke-linejoin: round;\r\n                    stroke-miterlimit: 79.8403;\r\n                  \"\r\n                />\r\n                <path\r\n                  d=\"        M26.034,8.892L9.961,24.964\"\r\n                  style=\"\r\n                    fill: none;\r\n                    stroke: #990e0d;\r\n                    stroke-width: 4.287;\r\n                    stroke-linejoin: round;\r\n                    stroke-miterlimit: 79.8403;\r\n                  \"\r\n                />\r\n              </g>\r\n              <g>\r\n                <path\r\n                  d=\"M9.961,9.964        l16.073,16.073\"\r\n                  style=\"\r\n                    fill: none;\r\n                    stroke: #ffffff;\r\n                    stroke-width: 4.287;\r\n                    stroke-linejoin: round;\r\n                    stroke-miterlimit: 79.8403;\r\n                  \"\r\n                />\r\n                <path\r\n                  d=\"        M26.034,9.964L9.961,26.037\"\r\n                  style=\"\r\n                    fill: none;\r\n                    stroke: #ffffff;\r\n                    stroke-width: 4.287;\r\n                    stroke-linejoin: round;\r\n                    stroke-miterlimit: 79.8403;\r\n                  \"\r\n                />\r\n              </g>\r\n            </g>\r\n          </g>\r\n        </g>\r\n      </g>\r\n    </g>\r\n    <g />\r\n  </svg>\r\n</template>\r\n","<template>\r\n  <div\r\n    aria-label=\"Clear options list\"\r\n    role=\"button\"\r\n    :class=\"classes\"\r\n    :tabindex=\"increasedTabindex\"\r\n    @click=\"cancel\"\r\n    @keypress.stop=\"cancel\"\r\n  >\r\n    <cancel-icon v-if=\"!loading\" :class=\"iconSizeClass\" />\r\n    <extended-multiselect-loader\r\n      v-else\r\n      :icon-filter=\"loaderIconFilter\"\r\n      :icon-size=\"iconSize\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { computed, defineProps, inject, toRefs } from \"vue\";\r\n\r\nimport useCancel from \"../composition/cancel\";\r\nimport useSizes from \"../composition/sizes\";\r\n\r\nimport ExtendedMultiselectLoader from \"./ExtendedMultiselectLoader.vue\";\r\nimport CancelIcon from \"../icons/CancelIcon.vue\";\r\n\r\nconst props = defineProps({\r\n  /**\r\n   * Blocks cancel button\r\n   * @property {boolean} disabled\r\n   */\r\n  disabled: {\r\n    type: Boolean,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Defines a svg-filter for loader icons\r\n   * @property {string} loaderIconFilter\r\n   */\r\n  loaderIconFilter: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Provides size to create special size-class\r\n   * for each kind of icon\r\n   * @property {string} iconSize\r\n   */\r\n  iconSize: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Replaces cancel button with loader\r\n   * @property {boolean} loading\r\n   */\r\n  loading: {\r\n    type: Boolean,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Determines whether to clear current value of search field\r\n   * @property {boolean} showSearchField\r\n   */\r\n  showSearchField: {\r\n    type: Boolean,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Defines \"tabindex\" attribute of cancel button\r\n   * @default null\r\n   * @property {number|null} tabindex\r\n   */\r\n  tabindex: {\r\n    type: Number,\r\n    default: null,\r\n  },\r\n\r\n  /**\r\n   * List of selected options\r\n   * @property {Array} selectedOptions\r\n   */\r\n  selectedOptions: {\r\n    type: Array,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Reactive instance of LocalEmitter class\r\n   * @property {object} emitter\r\n   */\r\n  emitter: {\r\n    type: Object,\r\n    required: true,\r\n  },\r\n});\r\n\r\nconst setSearchValue = inject(\"setSearchValue\");\r\nconst setSearchPattern = inject(\"setSearchPattern\");\r\n\r\nconst {\r\n  disabled,\r\n  emitter,\r\n  loaderIconFilter,\r\n  iconSize,\r\n  loading,\r\n  selectedOptions,\r\n  showSearchField,\r\n  tabindex,\r\n} = toRefs(props);\r\n\r\nconst { cancel } = useCancel(\r\n  disabled,\r\n  loading,\r\n  showSearchField,\r\n  selectedOptions,\r\n  emitter,\r\n  setSearchValue,\r\n  setSearchPattern,\r\n);\r\nconst { iconSizeClass } = useSizes(iconSize);\r\n\r\n/**\r\n * Toggles classes of component if \"loading\"\r\n * or \"disabled\" props equals true\r\n * @function\r\n * @returns {string} class\r\n */\r\nconst classes = computed(() => {\r\n  return loading.value || disabled.value\r\n    ? \"extended__multiselect-cancel--disabled\"\r\n    : \"extended__multiselect-cancel\";\r\n});\r\n\r\n/**\r\n * Sets \"tabindex\" attibute of clear button based on\r\n * given tabindex\r\n * @function\r\n * @returns {number} tabindex\r\n */\r\nconst increasedTabindex = computed(() => {\r\n  return tabindex.value ? tabindex.value + 2 : 0;\r\n});\r\n</script>\r\n","/**\n * Debounce functions generator\n * @class\n */\nclass Debounce {\n  _localTimeout = null;\n  _callback = null;\n  _timer = 0;\n\n  /**\n   * Debounce constructor\n   * @constructor\n   * @param {Function} callback - debounce function\n   * @param {number} timer - milliseconds\n   */\n  constructor(callback, timer) {\n    this._callback = callback;\n    this._timer = timer;\n  }\n\n  /**\n   * Runs debounce function\n   * @method\n   */\n  start() {\n    if (this._localTimeout) {\n      clearTimeout(this._localTimeout);\n    }\n\n    this._localTimeout = setTimeout(() => {\n      this._callback();\n    }, this._timer);\n  }\n}\n\nexport default Debounce;\n","<template>\r\n  <div class=\"extended__multiselect-block extended__multiselect-block--multiple\">\r\n    <div v-if=\"placeholderBlockShown\" class=\"extended__multiselect-placeholder\">\r\n      {{ appropriatePlaceholder }}\r\n    </div>\r\n    <div>\r\n      <slot\r\n        name=\"multipleBlocks\"\r\n        :selected-options=\"limitRestriction\"\r\n        :deselect-block=\"deselectBlock\"\r\n      >\r\n        <div v-for=\"(option, index) in limitRestriction\" :key=\"index\">\r\n          <slot\r\n            name=\"optionBlock\"\r\n            :label=\"optionCreateLabel(option)\"\r\n            :index=\"index\"\r\n            :deselect-block=\"deselectBlock\"\r\n          >\r\n            <div :class=\"classes\">\r\n              <span>{{ optionCreateLabel(option) }}</span>\r\n              <div :class=\"deselectClasses\" @click.stop=\"deselectBlock(index)\">\r\n                <CancelIcon\r\n                  class=\"extended__multiselect_deselect-block-icon\"\r\n                  v-if=\"!showLoaderIcon\"\r\n                />\r\n                <extended-multiselect-loader\r\n                  v-else\r\n                  :icon-filter=\"iconFilter\"\r\n                  icon-size=\"deselect\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </slot>\r\n        </div>\r\n        <slot\r\n          name=\"maxElements\"\r\n          v-if=\"optionsLimitAchieved && !toggleMultipleBlocksLimit\"\r\n        >\r\n          {{ multipleBlocksLimitMessage(overLimitOptionsCount) }}\r\n        </slot>\r\n        <slot\r\n          name=\"showMore\"\r\n          v-if=\"optionIncreaserAvailable\"\r\n          :show-more-options=\"showMoreOptions\"\r\n        >\r\n          <div :class=\"[classes, increaserClass]\" @click.stop=\"showMoreOptions\">\r\n            Show more options\r\n          </div>\r\n        </slot>\r\n      </slot>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { computed, defineProps, onBeforeMount, ref, toRefs, watch } from \"vue\";\r\n\r\nimport useLabels from \"../composition/labels\";\r\n\r\nimport ExtendedMultiselectLoader from \"./ExtendedMultiselectLoader.vue\";\r\nimport CancelIcon from \"../icons/CancelIcon.vue\";\r\n\r\nconst props = defineProps({\r\n  /**\r\n   * Blocks deselect block button\r\n   * @property {boolean} disabled\r\n   */\r\n  disabled: {\r\n    type: Boolean,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Hides all deselect buttons if equals true\r\n   * @property {boolean} loading\r\n   */\r\n  loading: {\r\n    type: Boolean,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Determines whether to show extended multiselect\r\n   * placeholder element\r\n   * @property {boolean} placeholderBlockShown\r\n   */\r\n  placeholderBlockShown: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n\r\n  /**\r\n   * Determines whether to show loader icon in multiple\r\n   * options block if \"loading\" prop equals true\r\n   * @default true\r\n   * @property {boolean} showDeselectIconLoader\r\n   */\r\n  showDeselectIconLoader: {\r\n    type: Boolean,\r\n    default: true,\r\n  },\r\n\r\n  /**\r\n   * Allows to increase limit of displayed selected option blocks\r\n   * @property {boolean} toggleMultipleBlocksLimit\r\n   */\r\n  toggleMultipleBlocksLimit: {\r\n    type: Boolean,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Defines placeholder for extended multiselect\r\n   * placeholder element\r\n   * @property {string} appropriatePlaceholder\r\n   */\r\n  appropriatePlaceholder: {\r\n    type: String,\r\n    default: \"\",\r\n  },\r\n\r\n  /**\r\n   * Defines label for blocks with options of type \"object\"\r\n   * or Array instances which length/keys length equals 0\r\n   * @property {string} emptyObjectsPlaceholder\r\n   */\r\n  emptyObjectsPlaceholder: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Defines a svg-filter for icons\r\n   * @property {string} iconFilter\r\n   */\r\n  iconFilter: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Determines field of option which will be displayed as label\r\n   * @property {string} label\r\n   */\r\n  label: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Current theme of extended-multiselect\r\n   * used in class definition\r\n   * @property {string} themeType\r\n   */\r\n  themeType: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Limit of hidden options amount to be shown next\r\n   * @property {number} increaseDisplayBy\r\n   */\r\n  increaseDisplayBy: {\r\n    type: Number,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Limit of option blocks amount\r\n   * @property {number} multipleBlocksLimit\r\n   */\r\n  multipleBlocksLimit: {\r\n    type: Number,\r\n    default: null,\r\n  },\r\n\r\n  /**\r\n   * List of selected options that will be shown as option blocks\r\n   * @property {Array} selectedOptions\r\n   */\r\n  selectedOptions: {\r\n    type: Array,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Reactive instance of LocalEmitter class\r\n   * @property {object} emitter\r\n   */\r\n  emitter: {\r\n    type: Object,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Function that creates custom label for\r\n   * block with selected option\r\n   * @property {Function} createCustomOptionLabel\r\n   */\r\n  createCustomOptionLabel: {\r\n    type: Function,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Function that creates limit message for maximal of selected options\r\n   * @property {Function} multipleBlocksLimitMessage\r\n   */\r\n  multipleBlocksLimitMessage: {\r\n    type: Function,\r\n    required: true,\r\n  },\r\n});\r\n\r\nconst {\r\n  createCustomOptionLabel,\r\n  disabled,\r\n  emitter,\r\n  emptyObjectsPlaceholder,\r\n  label,\r\n  increaseDisplayBy,\r\n  loading,\r\n  showDeselectIconLoader,\r\n  multipleBlocksLimit,\r\n  selectedOptions,\r\n  themeType,\r\n  toggleMultipleBlocksLimit,\r\n} = toRefs(props);\r\n\r\nconst optionsLimitIncreaser = ref(null);\r\nconst increaserClass = ref(\"extended__multiselect-increaser\");\r\n\r\nconst { optionCreateLabel } = useLabels(\r\n  label,\r\n  createCustomOptionLabel,\r\n  emptyObjectsPlaceholder,\r\n);\r\n\r\n/**\r\n * Defines class for every selected option block\r\n * depends on current theme of extended multiselect\r\n * @function\r\n * @returns {string} class\r\n */\r\nconst classes = computed(() => {\r\n  const basicClassName = \"extended__multiselect--multiple\";\r\n\r\n  switch (themeType.value) {\r\n    case \"basic\":\r\n      return `${basicClassName}-basic`;\r\n    case \"slate-grey\":\r\n      return `${basicClassName}-slate-grey`;\r\n    case \"slate-blue\":\r\n      return `${basicClassName}-slate-blue`;\r\n    case \"teal\":\r\n      return `${basicClassName}-teal`;\r\n    case \"strict\":\r\n      return `${basicClassName}-strict`;\r\n    default:\r\n      return `${basicClassName}-basic`;\r\n  }\r\n});\r\n\r\n/**\r\n * Defines class for every deselect/loader icon in multiple\r\n * option blocks depends on \"loading\" prop\r\n * @function\r\n * @returns {string} class\r\n */\r\nconst deselectClasses = computed(() => {\r\n  return loading.value\r\n    ? \"extended__multiselect-block_cancel-wrapper--loading\"\r\n    : \"extended__multiselect-block_cancel-wrapper\";\r\n});\r\n\r\n/**\r\n * Defines current limited amount of displayed option blocks\r\n * @function\r\n * @returns {Array} UnionPropType\r\n */\r\nconst limitRestriction = computed(() => {\r\n  if (!optionsLimitIncreaser.value) return selectedOptions.value;\r\n\r\n  return selectedOptions.value.filter((_, index) => {\r\n    const limit =\r\n      typeof optionsLimitIncreaser.value === \"number\"\r\n        ? optionsLimitIncreaser.value\r\n        : optionsLimitIncreaser.value.value;\r\n\r\n    return ++index <= limit;\r\n  });\r\n});\r\n\r\n/**\r\n * Determines whether user can increase limited amount of displayed option blocks\r\n * @function\r\n * @returns {boolean} possibility\r\n */\r\nconst optionIncreaserAvailable = computed(() => {\r\n  return toggleMultipleBlocksLimit.value && optionsLimitAchieved.value;\r\n});\r\n\r\n/**\r\n * Determines whether current limit of displayed option blocks amount\r\n * was reached\r\n * @function\r\n * @returns {boolean} reaching\r\n */\r\nconst optionsLimitAchieved = computed(() => {\r\n  return (\r\n    optionsLimitIncreaser.value &&\r\n    selectedOptions.value.length > optionsLimitIncreaser.value\r\n  );\r\n});\r\n\r\n/**\r\n * Amount of selected options exceeding the limit\r\n * determined by \"multipleBlocksLimit\" prop\r\n * @function\r\n * @returns {number|null} amount\r\n */\r\nconst overLimitOptionsCount = computed(() => {\r\n  if (selectedOptions.value.length <= optionsLimitIncreaser.value) return null;\r\n\r\n  return selectedOptions.value.length - optionsLimitIncreaser.value;\r\n});\r\n\r\n/**\r\n * Determines whether to show loader icon if \"loading\" prop equals true\r\n * or show multiple option blocks as usual\r\n * @function\r\n * @returns {boolean} restriction\r\n */\r\nconst showLoaderIcon = computed(() => {\r\n  return showDeselectIconLoader.value ? loading.value : false;\r\n});\r\n\r\n/**\r\n * If limit of selected options was achieved restricts further\r\n * extension of options container if \"multiple\" prop equals true\r\n * @function\r\n * @param {Array} - array of selected options\r\n */\r\nwatch(\r\n  selectedOptions,\r\n  (value) => {\r\n    if (!value.length || value.length <= multipleBlocksLimit.value) {\r\n      optionsLimitIncreaser.value = multipleBlocksLimit.value;\r\n    }\r\n  },\r\n  { deep: true },\r\n);\r\n\r\n/**\r\n * Deselects option by users click on its element cancel icon\r\n * if \"multiple\" prop equals true\r\n * @function\r\n * @emits extended:deselect-option\r\n * @param {number} index - index of deselected option\r\n */\r\nconst deselectBlock = (index) => {\r\n  if (loading.value || disabled.value) return;\r\n\r\n  emitter.value.emit(\"extended:deselect-option\", { index });\r\n};\r\n\r\n/**\r\n * Shows next hidden options\r\n * This behavior restricts by \"toggleMultipleBlocksLimit\" prop\r\n * if \"multiple\" prop equals true\r\n * @function\r\n * @emits extended:increase-display\r\n */\r\nconst showMoreOptions = () => {\r\n  optionsLimitIncreaser.value += increaseDisplayBy.value;\r\n\r\n  emitter.value.emit(\"extended:increase-display\", optionsLimitIncreaser.value);\r\n};\r\n\r\n/**\r\n * \"onBeforeMount\" hook of ExtendedMultiselectMultiple component\r\n */\r\nonBeforeMount(() => {\r\n  optionsLimitIncreaser.value = multipleBlocksLimit.value;\r\n});\r\n</script>\r\n","<template>\r\n  <div v-if=\"showSearchField\">\r\n    <input\r\n      aria-controls=\"extended-search-field\"\r\n      ref=\"extendedInput\"\r\n      type=\"text\"\r\n      :accesskey=\"attrs.accesskey\"\r\n      :autocomplete=\"attrs.autocomplete\"\r\n      :class=\"searchFieldClass\"\r\n      :disabled=\"disabled\"\r\n      :id=\"inputId\"\r\n      :name=\"attrs.name\"\r\n      :placeholder=\"appropriatePlaceholder\"\r\n      :spellcheck=\"attrs.spellcheck\"\r\n      :tabindex=\"attrs.tabindex\"\r\n      :translate=\"attrs.translate\"\r\n      v-model=\"searchValue\"\r\n      @blur.prevent=\"rollUp\"\r\n      @focus.prevent=\"expand\"\r\n      @input=\"search\"\r\n    />\r\n    <div\r\n      class=\"extended__multiselect-block\"\r\n      v-show=\"!searchFieldForwarding && !multiple && !placeholderBlockShown\"\r\n      @click=\"expand\"\r\n    >\r\n      <slot name=\"labelBlock\" :label-block-value=\"singleLabel\">\r\n        <span>{{ singleLabel }}</span>\r\n      </slot>\r\n    </div>\r\n    <div v-if=\"placeholderBlockShown\" class=\"extended__multiselect-placeholder\">\r\n      {{ appropriatePlaceholder }}\r\n    </div>\r\n    <extended-multiselect-multiple\r\n      v-show=\"multiple && !!selectedOptions.length\"\r\n      :style=\"multipleBlocksMargin\"\r\n      :disabled=\"disabled\"\r\n      :loading=\"loading\"\r\n      :icon-filter=\"loaderIconFilter\"\r\n      :show-deselect-icon-loader=\"showDeselectIconLoader\"\r\n      :toggle-multiple-blocks-limit=\"toggleMultipleBlocksLimit\"\r\n      :empty-objects-placeholder=\"emptyObjectsPlaceholder\"\r\n      :label=\"label\"\r\n      :multiple-blocks-limit-message=\"multipleBlocksLimitMessage\"\r\n      :theme-type=\"themeType\"\r\n      :increase-display-by=\"increaseDisplayBy\"\r\n      :multipleBlocksLimit=\"multipleBlocksLimit\"\r\n      :selected-options=\"selectedOptions\"\r\n      :emitter=\"emitter\"\r\n      :create-custom-option-label=\"createCustomOptionLabel\"\r\n    >\r\n      <template #multipleBlocks=\"{ selectedOptions, deselectBlock }\">\r\n        <slot\r\n          name=\"multipleBlocks\"\r\n          :selected-options=\"selectedOptions\"\r\n          :deselect-block=\"deselectBlock\"\r\n        >\r\n        </slot>\r\n      </template>\r\n      <template #optionBlock=\"{ label, deselectBlock, index }\">\r\n        <slot\r\n          name=\"optionBlock\"\r\n          :label=\"label\"\r\n          :index=\"index\"\r\n          :deselect-block=\"deselectBlock\"\r\n        >\r\n        </slot>\r\n      </template>\r\n      <template #maxElements>\r\n        <slot name=\"maxElements\"></slot>\r\n      </template>\r\n      <template v-if=\"toggleMultipleBlocksLimit\" #showMore=\"{ showMoreOptions }\">\r\n        <slot name=\"showMore\" :show-more-options=\"showMoreOptions\"> </slot>\r\n      </template>\r\n    </extended-multiselect-multiple>\r\n  </div>\r\n  <div v-else-if=\"!showSearchField && multiple\">\r\n    <extended-multiselect-multiple\r\n      :disabled=\"disabled\"\r\n      :loading=\"loading\"\r\n      :icon-filter=\"loaderIconFilter\"\r\n      :placeholder-block-shown=\"!selectedOptions.length\"\r\n      :show-deselect-icon-loader=\"showDeselectIconLoader\"\r\n      :toggle-multiple-blocks-limit=\"toggleMultipleBlocksLimit\"\r\n      :appropriate-placeholder=\"appropriatePlaceholder\"\r\n      :empty-objects-placeholder=\"emptyObjectsPlaceholder\"\r\n      :label=\"label\"\r\n      :multiple-blocks-limit-message=\"multipleBlocksLimitMessage\"\r\n      :theme-type=\"themeType\"\r\n      :increase-display-by=\"increaseDisplayBy\"\r\n      :multipleBlocksLimit=\"multipleBlocksLimit\"\r\n      :selected-options=\"selectedOptions\"\r\n      :emitter=\"emitter\"\r\n      :create-custom-option-label=\"createCustomOptionLabel\"\r\n    >\r\n      <template #multipleBlocks=\"{ selectedOptions, deselectBlock }\">\r\n        <slot\r\n          name=\"multipleBlocks\"\r\n          :selected-options=\"selectedOptions\"\r\n          :deselect-block=\"deselectBlock\"\r\n        >\r\n        </slot>\r\n      </template>\r\n      <template #optionBlock=\"{ label, deselectBlock, index }\">\r\n        <slot\r\n          name=\"optionBlock\"\r\n          :label=\"label\"\r\n          :index=\"index\"\r\n          :deselect-block=\"deselectBlock\"\r\n        >\r\n        </slot>\r\n      </template>\r\n      <template v-if=\"toggleMultipleBlocksLimit\" #showMore=\"{ showMoreOptions }\">\r\n        <slot name=\"showMore\" :show-more-options=\"showMoreOptions\"></slot>\r\n      </template>\r\n    </extended-multiselect-multiple>\r\n    <input\r\n      class=\"extended__multiselect-input--hidden\"\r\n      ref=\"extendedInput\"\r\n      type=\"text\"\r\n      @blur.prevent=\"rollUp\"\r\n      @focus.prevent=\"expand\"\r\n    />\r\n  </div>\r\n  <div class=\"extended__multiselect-block\" v-else>\r\n    <div v-if=\"hintBlockShown\" class=\"extended__multiselect-placeholder\">\r\n      {{ appropriatePlaceholder }}\r\n    </div>\r\n    <slot name=\"labelBlock\" :label-block-value=\"singleLabel\">\r\n      <span>{{ singleLabel }}</span>\r\n    </slot>\r\n    <input\r\n      class=\"extended__multiselect-input--hidden\"\r\n      ref=\"extendedInput\"\r\n      type=\"text\"\r\n      @blur.prevent=\"rollUp\"\r\n      @focus.prevent=\"expand\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport {\r\n  computed,\r\n  defineProps,\r\n  inject,\r\n  nextTick,\r\n  onBeforeMount,\r\n  onMounted,\r\n  ref,\r\n  toRef,\r\n  toRefs,\r\n  useAttrs,\r\n  watch,\r\n} from \"vue\";\r\n\r\nimport useDebounce from \"../composition/debounce\";\r\n\r\nimport ExtendedMultiselectMultiple from \"./ExtendedMultiselectMultiple.vue\";\r\n\r\nconst props = defineProps({\r\n  /**\r\n   * Determines whether to take search value from current\r\n   * selected option if \"multiple\" prop equals false\r\n   * @property {boolean} autoSelectSearchValue\r\n   */\r\n  autoSelectSearchValue: {\r\n    type: Boolean,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Determines which placeholder to use\r\n   * depending on the options creation mode\r\n   * @property {boolean} createOnTheGo\r\n   */\r\n  createOnTheGo: {\r\n    type: Boolean,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Blocks search field\r\n   * @property {boolean} disabled\r\n   */\r\n  disabled: {\r\n    type: Boolean,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Provides \"loading\" state of component\r\n   * to ExtendedMultiselectMultiple child component\r\n   * @property {boolean} loading\r\n   */\r\n  loading: {\r\n    type: Boolean,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Determines whether to use ExtendedMultiselectMultiple\r\n   * child component and some other related functionality\r\n   * @property {boolean} multiple\r\n   */\r\n  multiple: {\r\n    type: Boolean,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Renews the pattern of internal search for available options\r\n   * @property {boolean} searchFilterActive\r\n   */\r\n  searchFilterActive: {\r\n    type: Boolean,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Determines whether to show search field\r\n   * @property {boolean} showSearchField\r\n   */\r\n  showSearchField: {\r\n    type: Boolean,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Determines whether to show loader icon in multiple\r\n   * options block if \"loading\" prop equals true\r\n   * @default true\r\n   * @property {boolean} showDeselectIconLoader\r\n   */\r\n  showDeselectIconLoader: {\r\n    type: Boolean,\r\n    default: true,\r\n  },\r\n\r\n  /**\r\n   * Determines whether to allow user to increase limit of shown\r\n   * elements with selected options by special icon\r\n   * @property {boolean} toggleMultipleBlocksLimit\r\n   */\r\n  toggleMultipleBlocksLimit: {\r\n    type: Boolean,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Determines whether to roll up options list\r\n   * by option selection\r\n   * @property {boolean} toggleOptionsBySelect\r\n   */\r\n  toggleOptionsBySelect: {\r\n    type: Boolean,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Determines whether to clear value of search field\r\n   * after next switch of search field display\r\n   * @property {boolean} togglingSavesSearchValue\r\n   */\r\n  togglingSavesSearchValue: {\r\n    type: Boolean,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Placeholder which will be shown\r\n   * if \"createOnTheGo\" prop equals true\r\n   * @property {string} createOptionPlaceholder\r\n   */\r\n  createOptionPlaceholder: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Placeholder used in internal options filters\r\n   * and provided to ExtendedMultiselectMultiple child component\r\n   * @property {string} emptyObjectsPlaceholder\r\n   */\r\n  emptyObjectsPlaceholder: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Defines a svg-filter for loader icons\r\n   * @property {string} loaderIconFilter\r\n   */\r\n  loaderIconFilter: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Determines field of option which will be displayed as label\r\n   * @property {string} label\r\n   */\r\n  label: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * \"placeholder\" attribute for search field\r\n   * @property {string} placeholder\r\n   */\r\n  placeholder: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Provides current theme of extended multiselect\r\n   * to ExtendedMultiselectMultiple child component\r\n   * @property {string} themeType\r\n   */\r\n  themeType: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Provides limit of hidden options amount to be shown next\r\n   * @property {number} increaseDisplayBy\r\n   */\r\n  increaseDisplayBy: {\r\n    type: Number,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Provides limit of multiple option blocks amount\r\n   * to ExtendedMultiselectMultiple child component\r\n   * @default null\r\n   * @property {number} multipleBlocksLimit\r\n   */\r\n  multipleBlocksLimit: {\r\n    type: Number,\r\n    default: null,\r\n  },\r\n\r\n  /**\r\n   * Provides list of selected options\r\n   * to ExtendedMultiselectMultiple child component\r\n   * @property {Array} selectedOptions\r\n   */\r\n  selectedOptions: {\r\n    type: Array,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Reactive instance of LocalEmitter class\r\n   * @property {object} emitter\r\n   */\r\n  emitter: {\r\n    type: Object,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Provides function that creates custom label for\r\n   * block with selected option to ExtendedMultiselectMultiple\r\n   * child component\r\n   * @property {Function} createCustomOptionLabel\r\n   */\r\n  createCustomOptionLabel: {\r\n    type: Function,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Loader function provided by user.\r\n   * @property {Function} externalOptionsLoader\r\n   * @default null\r\n   * @param {string} value - value of search field\r\n   */\r\n  externalOptionsLoader: {\r\n    type: Function,\r\n    default: null,\r\n  },\r\n\r\n  /**\r\n   * Provides function that creates limit message for maximal of selected\r\n   * options to ExtendedMultiselectMultiple child component\r\n   * @property {Function} multipleBlocksLimitMessage\r\n   */\r\n  multipleBlocksLimitMessage: {\r\n    type: Function,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * \"id\" attribute of search field\r\n   * @default null\r\n   * @property {string|number} inputId\r\n   */\r\n  inputId: {\r\n    type: [String, Number],\r\n    default: null,\r\n  },\r\n});\r\n\r\nconst searchState = inject(\"searchState\");\r\nconst setSearchValue = inject(\"setSearchValue\");\r\nconst setSearchPattern = inject(\"setSearchPattern\");\r\n\r\nconst emitter = toRef(props, \"emitter\");\r\n\r\nconst { DebounceConstructor } = useDebounce();\r\n\r\nconst blurSkip = ref(false);\r\nconst searchFieldFocused = ref(false);\r\nconst optionWillBeTriggered = ref(false);\r\nconst searchFieldPreserving = ref(false);\r\nconst searchPlaceholderPreserving = ref(false);\r\nconst searchValue = ref(\"\");\r\nconst singleLabel = ref(\"\");\r\nconst blurSkipByToggleIcon = ref(0);\r\nconst blurSkipByBlock = ref(0);\r\nconst searchDebounce = ref(\r\n  new DebounceConstructor.value(() => {\r\n    const searchPattern = searchValue.value\r\n      ? new RegExp(`${searchValue.value}`, \"i\")\r\n      : null;\r\n    if (externalOptionsLoader.value) {\r\n      emitter.value.emit(\"extended:loader-pattern-changed\", searchValue.value);\r\n    } else {\r\n      emitter.value.emit(\"extended:search-pattern-changed\", searchValue.value);\r\n      setSearchPattern(searchPattern);\r\n    }\r\n  }, 250),\r\n);\r\n\r\n/**\r\n * Element references\r\n */\r\nconst extendedInput = ref(null);\r\n\r\nconst {\r\n  autoSelectSearchValue,\r\n  createOnTheGo,\r\n  createOptionPlaceholder,\r\n  disabled,\r\n  externalOptionsLoader,\r\n  increaseDisplayBy,\r\n  multiple,\r\n  placeholder,\r\n  searchFilterActive,\r\n  showSearchField,\r\n  selectedOptions,\r\n  toggleOptionsBySelect,\r\n  togglingSavesSearchValue,\r\n} = toRefs(props);\r\n\r\nconst attrs = useAttrs();\r\n\r\n/**\r\n * Defines \"placeholder\" attribute of search field\r\n * @function\r\n * @returns {string} placeholder\r\n */\r\nconst appropriatePlaceholder = computed(() => {\r\n  return createOnTheGo.value ? createOptionPlaceholder.value : placeholder.value;\r\n});\r\n\r\n/**\r\n * Determines whether to show placeholder block\r\n * if search field is hidden\r\n * @function\r\n * @returns {boolean} display\r\n */\r\nconst hintBlockShown = computed(() => {\r\n  if (selectedOptions.value.length) return false;\r\n\r\n  return true;\r\n});\r\n\r\n/**\r\n * Sets \"margin-top\" css property to multiple option blocks\r\n * if search field is shown\r\n * @function\r\n * @returns {Object|null} margin-top\r\n */\r\nconst multipleBlocksMargin = computed(() => {\r\n  return searchFieldForwarding.value ? { marginTop: \"4px\" } : null;\r\n});\r\n\r\n/**\r\n * Determines whether to show placeholder block\r\n * @function\r\n * @returns {boolean} display\r\n */\r\nconst placeholderBlockShown = computed(() => {\r\n  if (selectedOptions.value.length || searchFieldForwarding.value) return false;\r\n\r\n  return true;\r\n});\r\n\r\n/**\r\n * Defines classes of search field\r\n * @function\r\n * @returns {Array} classes\r\n */\r\nconst searchFieldClass = computed(() => {\r\n  const mainClass = searchFieldForwarding.value\r\n    ? \"extended__multiselect-input\"\r\n    : \"extended__multiselect-input--hidden\";\r\n  const searchFieldClasses = [];\r\n\r\n  if (optionWillBeTriggered.value) {\r\n    searchFieldClasses.push(\"extended__multiselect-input--trigger-option\");\r\n  }\r\n\r\n  if (searchPlaceholderPreserving.value) {\r\n    searchFieldClasses.push(\"extended__multiselect-input--preserved\");\r\n  }\r\n\r\n  searchFieldClasses.push(mainClass);\r\n\r\n  return searchFieldClasses;\r\n});\r\n\r\n/**\r\n * Determines whether to show search field\r\n * over element with selected option\r\n * @function\r\n * @returns {boolean} display\r\n */\r\nconst searchFieldForwarding = computed(() => {\r\n  return (\r\n    searchFieldFocused.value || optionWillBeTriggered.value || searchFieldPreserving.value\r\n  );\r\n});\r\n\r\n/**\r\n * Determines whether option shall be triggered before selection\r\n * @function\r\n * @emits extended:renew-field-forwarding\r\n * @param {boolean} searchFieldForwarding - restrictor of triggered option\r\n */\r\nwatch(searchFieldForwarding, (value) => {\r\n  if (value && autoSelectSearchValue.value && !multiple.value && singleLabel.value) {\r\n    searchValue.value = singleLabel.value;\r\n  }\r\n\r\n  emitter.value.emit(\"extended:renew-field-forwarding\", value);\r\n});\r\n\r\n/**\r\n * Sets pattern of internal search for available options from search field to store\r\n * @function\r\n * @param {string} pattern - pattern of internal search for available options\r\n */\r\nwatch(\r\n  searchState,\r\n  (prevState, state) => {\r\n    if (state.searchPattern === prevState.searchPattern) return;\r\n\r\n    if (searchFilterActive.value) {\r\n      setSearchPattern(state.pattern);\r\n    }\r\n  },\r\n  { deep: true },\r\n);\r\n\r\n/**\r\n * Sets value of search field from search field to store\r\n * @function\r\n * @param {string} value - value of search field\r\n */\r\nwatch(searchValue, (value) => {\r\n  if (searchFilterActive.value) {\r\n    setSearchValue(value);\r\n  }\r\n});\r\n\r\n/**\r\n * Expands options list\r\n * @function\r\n * @emits extended:expand-options\r\n */\r\nconst expand = () => {\r\n  if (disabled.value) return;\r\n\r\n  searchFieldFocused.value = true;\r\n\r\n  emitter.value.emit(\"extended:expand-options\");\r\n};\r\n\r\n/**\r\n * Describes behavour of input blur event\r\n * when \"multiple\" prop equals true\r\n * @function\r\n */\r\nconst multipleBlur = () => {\r\n  if (!multiple.value) {\r\n    searchFieldFocused.value = false;\r\n\r\n    return;\r\n  }\r\n};\r\n\r\n/**\r\n * Rolls up options list if it needed\r\n * @function\r\n * @emits extended:rollup-options\r\n */\r\nconst rollUp = () => {\r\n  if (disabled.value) return;\r\n\r\n  multipleBlur();\r\n\r\n  if (!togglingSavesSearchValue.value) {\r\n    searchValue.value = \"\";\r\n\r\n    setSearchValue(null);\r\n    setSearchPattern(null);\r\n  }\r\n\r\n  if (blurSkipByToggleIcon.value > 0) {\r\n    blurSkipByToggleIcon.value = 0;\r\n\r\n    return;\r\n  }\r\n\r\n  if (blurSkipByBlock.value > 0) {\r\n    blurSkipByBlock.value = 0;\r\n\r\n    return;\r\n  }\r\n\r\n  blurSkip.value = true;\r\n  blurSkipByBlock.value = 0;\r\n  blurSkipByToggleIcon.value = 0;\r\n\r\n  emitter.value.emit(\"extended:rollup-options\", true);\r\n};\r\n\r\n/**\r\n * Rolls up options list after option selection\r\n * and sets single option label\r\n * @function\r\n * @param {UnionPropType} option - option to be selected\r\n */\r\nconst rollupIfSelected = (option) => {\r\n  if (toggleOptionsBySelect.value) {\r\n    rollUp();\r\n  }\r\n\r\n  if (multiple.value) {\r\n    return;\r\n  } else {\r\n    singleLabel.value = option.label;\r\n  }\r\n};\r\n\r\n/**\r\n * Activates debounced version of options list filter\r\n * @function\r\n */\r\nconst search = () => {\r\n  searchDebounce.value.start();\r\n};\r\n\r\n/**\r\n * \"onBeforeMount\" hook of the ExtendedMultiselectInput component\r\n * @listens extended:field-focus\r\n * @listens extended:rollup-options\r\n * @listens extended:select-option\r\n * @listens extended:preselect-option\r\n * @listens extended:deselect-option\r\n * @listens extended:clean-options\r\n * @listens extended:clear-field\r\n * @listens extended:skip-blur\r\n * @listens extended:skip-block-blur\r\n * @listens extended:skip-block-blur-zeroing\r\n * @listens extended:trigger-selection\r\n * @listens extended:preserve-search-field\r\n */\r\nonBeforeMount(() => {\r\n  emitter.value.on(\"extended:rollup-options\", (internalRollup) => {\r\n    if (blurSkip.value === true) {\r\n      blurSkip.value = false;\r\n      return;\r\n    }\r\n\r\n    if (internalRollup) {\r\n      return;\r\n    }\r\n\r\n    rollUp();\r\n  });\r\n\r\n  emitter.value.on(\"extended:select-option\", (option) => {\r\n    rollupIfSelected(option);\r\n  });\r\n\r\n  emitter.value.on(\"extended:preselect-option\", (option) => {\r\n    rollupIfSelected(option);\r\n  });\r\n\r\n  emitter.value.on(\"extended:deselect-option\", () => {\r\n    if (multiple.value) {\r\n      return;\r\n    } else {\r\n      singleLabel.value = \"\";\r\n    }\r\n  });\r\n\r\n  emitter.value.on(\"extended:clean-options\", () => {\r\n    searchValue.value = null;\r\n  });\r\n\r\n  emitter.value.on(\"extended:clear-field\", () => {\r\n    searchValue.value = null;\r\n  });\r\n\r\n  emitter.value.on(\"extended:skip-blur\", () => {\r\n    blurSkipByToggleIcon.value++;\r\n  });\r\n\r\n  emitter.value.on(\"extended:skip-block-blur\", () => {\r\n    blurSkipByBlock.value++;\r\n  });\r\n\r\n  emitter.value.on(\"extended:skip-block-blur-zeroing\", () => {\r\n    blurSkipByBlock.value = 0;\r\n  });\r\n\r\n  emitter.value.on(\"extended:trigger-selection\", (triggerState) => {\r\n    if (!toggleOptionsBySelect.value) {\r\n      searchFieldFocused.value = false;\r\n    }\r\n\r\n    optionWillBeTriggered.value = triggerState;\r\n  });\r\n\r\n  emitter.value.on(\"extended:preserve-search-field\", (preserveState) => {\r\n    if (!multiple.value && selectedOptions.value.length) {\r\n      searchFieldPreserving.value = preserveState;\r\n    }\r\n\r\n    searchPlaceholderPreserving.value = preserveState;\r\n  });\r\n});\r\n\r\n/**\r\n * \"onMounted\" hook of the ExtendedMultiselectInput component\r\n * @listens extended:field-focus\r\n */\r\nonMounted(() => {\r\n  emitter.value.on(\"extended:field-focus\", () => {\r\n    if (showSearchField.value) {\r\n      nextTick(() => {\r\n        extendedInput.value.focus();\r\n      });\r\n    } else {\r\n      extendedInput.value.focus();\r\n    }\r\n  });\r\n});\r\n</script>\r\n","import { ref } from \"vue\";\n\nimport Debounce from \"../tools/Debounce\";\n\nexport default function useDebounce() {\n  const DebounceConstructor = ref(Debounce);\n\n  return { DebounceConstructor };\n}\n","<template>\r\n  <div ref=\"optionsWrapper\" tabindex=\"-1\" :class=\"classes\" :style=\"styles\">\r\n    <slot name=\"listHeader\"></slot>\r\n    <div\r\n      v-if=\"showCreateNewOptionBlock\"\r\n      class=\"extended__multiselect-option-create\"\r\n      :class=\"optionHighlightClasses(null)\"\r\n      @mousedown=\"createNewOption\"\r\n    >\r\n      {{ searchState.searchValue }}\r\n    </div>\r\n    <slot name=\"moreThanLimit\" v-if=\"maxOptionsWereSelected\">\r\n      <span>Maximum limit of selected options was achieved</span>\r\n    </slot>\r\n    <slot name=\"lessThanLimit\" v-if=\"minOptionsWereNotSelected\">\r\n      <span>Minimum amount of selected options was not achieved</span>\r\n    </slot>\r\n    <div class=\"extended__multiselect-options_container\">\r\n      <div role=\"listbox\" v-for=\"(option, index) in availableOptions\" :key=\"index\">\r\n        <div\r\n          v-if=\"option\"\r\n          :aria-setsize=\"availableOptions.length\"\r\n          :aria-posinset=\"index\"\r\n          :aria-labelledby=\"`option-label-${index}`\"\r\n          :aria-disabled=\"optionIsDisabled(option)\"\r\n          :class=\"optionHighlightClasses(option)\"\r\n          :style=\"optionHeightByProps\"\r\n          :enter-locator=\"index\"\r\n          :role=\"optionCreateRole(option)\"\r\n          @click.stop=\"selectOption(option, $event)\"\r\n          @keypress.stop=\"selectOption(option, $event)\"\r\n          @mousedown=\"triggerOptionBeforeSelection\"\r\n          @mouseenter.stop=\"setEnterIndex\"\r\n        >\r\n          <slot\r\n            name=\"option\"\r\n            :option=\"option\"\r\n            :create-custom-option-label=\"createCustomOptionLabel\"\r\n          >\r\n            <div class=\"extended__multiselect-marker\">\r\n              <slot name=\"marker\" :selected=\"showCurrentMarker(option)\">\r\n                <div\r\n                  v-if=\"showMarker && showCurrentMarker(option)\"\r\n                  :class=\"markerShapeClass(option)\"\r\n                ></div>\r\n                <div\r\n                  v-else-if=\"showMarker\"\r\n                  class=\"extended__multiselect-marker-shape-only\"\r\n                ></div>\r\n              </slot>\r\n            </div>\r\n            <span :id=\"`option-label-${index}`\">\r\n              {{ optionCreateLabel(option) }}\r\n            </span>\r\n          </slot>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <slot name=\"noResults\" v-if=\"emptySearchResult\">\r\n      <span>No results were found by search</span>\r\n    </slot>\r\n    <slot name=\"noOptions\" v-if=\"emptyOptionsList\">\r\n      <span>Options list is empty</span>\r\n    </slot>\r\n    <slot name=\"listFooter\"></slot>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport {\r\n  computed,\r\n  defineProps,\r\n  inject,\r\n  nextTick,\r\n  onBeforeMount,\r\n  onMounted,\r\n  reactive,\r\n  ref,\r\n  toRefs,\r\n  watch,\r\n} from \"vue\";\r\n\r\nimport usePreselectedOptions from \"../composition/preselected-options\";\r\nimport useLabels from \"../composition/labels\";\r\n\r\nimport { UnionPropType } from \"../sets/sets\";\r\n\r\nconst props = defineProps({\r\n  /**\r\n   * Determines whether to immediately select just now created option\r\n   * @property {boolean} autoSelectCreatedOption\r\n   */\r\n  autoSelectCreatedOption: {\r\n    type: Boolean,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Determines whether to show noResults slot\r\n   * and block with new option's text\r\n   * @property {boolean} createOnTheGo\r\n   */\r\n  createOnTheGo: {\r\n    type: Boolean,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Determines whether to emit clear event\r\n   * by option selection\r\n   * @property {boolean} clearBySelectWhenMultiple\r\n   */\r\n  clearBySelectWhenMultiple: {\r\n    type: Boolean,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Determines whether to define thematic class for\r\n   * every option\r\n   * @property {boolean} highlightOptions\r\n   */\r\n  highlightOptions: {\r\n    type: Boolean,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Determines \"loading\" state of component\r\n   * that disables option selection\r\n   * @property {boolean} loading\r\n   */\r\n  loading: {\r\n    type: Boolean,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Determines whether to use functionality of\r\n   * multiple select\r\n   * @property {boolean} multiple\r\n   */\r\n  multiple: {\r\n    type: Boolean,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Determines whether to show selected options\r\n   * in options list\r\n   * @property {boolean} selectedOptionsShown\r\n   */\r\n  selectedOptionsShown: {\r\n    type: Boolean,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Determines whether to log warnings about incorrect props\r\n   * @property {boolean} showInsertWarnings\r\n   */\r\n  showInsertWarnings: {\r\n    type: Boolean,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Determines whether to show marker slot\r\n   * @property {boolean} showMarker\r\n   */\r\n  showMarker: {\r\n    type: Boolean,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Defines class of options list placement after expanse\r\n   * @property {string} chosenToggleAppearanceSide\r\n   */\r\n  chosenToggleAppearanceSide: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Determines type of option that will be created\r\n   * @property {string} createOptionType\r\n   */\r\n  createOptionType: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Determines a field in options of type \"object\"\r\n   * which value will be used to disable such options.\r\n   * @property {string} disableByField\r\n   */\r\n  disableByField: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Sets labels for options of type \"object\"\r\n   * or Array instances which length/keys length equals 0\r\n   * @property {string} emptyObjectsPlaceholder\r\n   */\r\n  emptyObjectsPlaceholder: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Determines field of option which will be displayed as label\r\n   * @property {string} label\r\n   */\r\n  label: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Determines field in options of type \"object\"\r\n   * to use in internal search.\r\n   * @property {string} searchByField\r\n   */\r\n  searchByField: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Current theme of extended-multiselect\r\n   * used in class definition\r\n   * @property {string} themeType\r\n   */\r\n  themeType: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Determines maximal limit of selected options\r\n   * @property {number|null} maxOptionsCount\r\n   */\r\n  maxOptionsCount: {\r\n    type: Number,\r\n    default: null,\r\n  },\r\n\r\n  /**\r\n   * Determines minimal limit of selected options\r\n   * @property {number|null} minOptionsCount\r\n   */\r\n  minOptionsCount: {\r\n    type: Number,\r\n    default: null,\r\n  },\r\n\r\n  /**\r\n   * Defines value of \"max-height\" css-property of options list\r\n   * @property {number} toggleMaxHeight\r\n   */\r\n  toggleMaxHeight: {\r\n    type: Number,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Defines value of \"min-height\" css-property of options list\r\n   * @property {number} toggleMinHeight\r\n   */\r\n  toggleMinHeight: {\r\n    type: Number,\r\n    default: null,\r\n  },\r\n\r\n  /**\r\n   * List of fields for new options of type \"object\" created by user\r\n   * if \"createOnTheGo\" prop equals true\r\n   * Each field will have basic value of \"searchValue\" prop\r\n   * @property {Array} createOptionFields\r\n   */\r\n  createOptionFields: {\r\n    type: Array,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Searches for options with listed primitive values\r\n   * and disables it\r\n   * @property {Array} disabledPrimitiveOptionsConverted\r\n   */\r\n  disabledPrimitiveOptionsConverted: {\r\n    type: Array,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Unfiltered options list\r\n   * @property {Array} options\r\n   */\r\n  options: {\r\n    type: Array,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Defines value of \"padding\" css-property of every option\r\n   * @property {Array} optionsPadding\r\n   */\r\n  optionsPadding: {\r\n    type: Array,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * List of options which should be selected by default\r\n   * if \"multiple\" prop equals true\r\n   * @property {Array} preselectedOptions\r\n   */\r\n  preselectedOptions: {\r\n    type: Array,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * List of options filtered by maximal available options amount\r\n   * @property {Array} restrictedOptions\r\n   */\r\n  restrictedOptions: {\r\n    type: Array,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * List of selected options or list with single selected option\r\n   * if \"multiple\" prop equals false\r\n   * @property {Array} selectedOptions\r\n   */\r\n  selectedOptions: {\r\n    type: Array,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * List of key names that in combination with \"enter\" key\r\n   * should cancel option selection\r\n   * @property {Array} specialKeysBlock\r\n   */\r\n  specialKeysBlock: {\r\n    type: Array,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Reactive instance of LocalEmitter class\r\n   * @property {object} emitter\r\n   */\r\n  emitter: {\r\n    type: Object,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Creates custom label for every option in options list\r\n   * @property {Function} createCustomOptionLabel\r\n   */\r\n  createCustomOptionLabel: {\r\n    type: Function,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Loader function provided by user.\r\n   * @property {Function} externalOptionsLoader\r\n   * @default null\r\n   * @param {string} value - value of search field\r\n   */\r\n  externalOptionsLoader: {\r\n    type: Function,\r\n    default: null,\r\n  },\r\n\r\n  /**\r\n   * Defines \"height\" css-property of every option element\r\n   * @property {number} anyOptionWrapperBlockHeight\r\n   */\r\n  anyOptionWrapperBlockHeight: {\r\n    type: [Number, String],\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Option which should be selected by default\r\n   * if \"multiple\" prop equals false\r\n   * @property {UnionPropType|null} preselectedOption\r\n   */\r\n  preselectedOption: {\r\n    type: UnionPropType,\r\n    default: null,\r\n  },\r\n});\r\n\r\nconst searchState = inject(\"searchState\");\r\nconst setSearchValue = inject(\"setSearchValue\");\r\nconst setSearchPattern = inject(\"setSearchPattern\");\r\n\r\nconst fieldWasShown = ref(false);\r\nconst atopWithScroll = ref(null);\r\nconst enterIndex = ref(null);\r\nconst heightFromMounted = reactive({});\r\nconst underWithScroll = ref(null);\r\n\r\n/**\r\n * Element references\r\n */\r\nconst optionsWrapper = ref(null);\r\n\r\nconst {\r\n  anyOptionWrapperBlockHeight,\r\n  autoSelectCreatedOption,\r\n  chosenToggleAppearanceSide,\r\n  clearBySelectWhenMultiple,\r\n  createOnTheGo,\r\n  createCustomOptionLabel,\r\n  createOptionFields,\r\n  createOptionType,\r\n  disableByField,\r\n  disabledPrimitiveOptionsConverted,\r\n  emitter,\r\n  emptyObjectsPlaceholder,\r\n  highlightOptions,\r\n  loading,\r\n  label,\r\n  searchByField,\r\n  maxOptionsCount,\r\n  minOptionsCount,\r\n  multiple,\r\n  options,\r\n  optionsPadding,\r\n  restrictedOptions,\r\n  selectedOptions,\r\n  selectedOptionsShown,\r\n  showInsertWarnings,\r\n  showMarker,\r\n  specialKeysBlock,\r\n  themeType,\r\n  toggleMaxHeight,\r\n  toggleMinHeight,\r\n  externalOptionsLoader,\r\n} = toRefs(props);\r\n\r\nconst { createLabel, optionTypeRestrictor } = usePreselectedOptions(\r\n  label,\r\n  emptyObjectsPlaceholder,\r\n  showInsertWarnings,\r\n);\r\nconst { optionCreateLabel } = useLabels(\r\n  label,\r\n  createCustomOptionLabel,\r\n  emptyObjectsPlaceholder,\r\n);\r\n\r\n/**\r\n * List of options filtered by \"disabled\" and \"selected\" signs\r\n * also by equality to null and undefined primitive values\r\n * or instance declarations\r\n * @function\r\n * @returns {Array} options\r\n */\r\nconst availableOptions = computed(() => {\r\n  let filteredOptions = restrictedOptions.value.filter((option) => {\r\n    const availableOptionType = optionTypeRestrictor(option);\r\n\r\n    if (!option || !availableOptionType) return false;\r\n\r\n    if (!lookForSimpleOptions(option)) return false;\r\n\r\n    if (selectedOptionsShown.value) return true;\r\n\r\n    return lookForObjectOptions(option);\r\n  });\r\n\r\n  let finalOptionsList = filteredOptions;\r\n\r\n  if (searchState.searchPattern) {\r\n    finalOptionsList = filterBySearchPattern(filteredOptions);\r\n  }\r\n\r\n  return finalOptionsList;\r\n});\r\n\r\n/**\r\n * Defines a list of options list classes\r\n * @function\r\n * @returns {Array} classes\r\n */\r\nconst classes = computed(() => {\r\n  let theme = [];\r\n\r\n  switch (themeType.value) {\r\n    case \"basic\":\r\n      theme.push(\"extended__multiselect-options\");\r\n      break;\r\n    case \"slate-grey\":\r\n      theme.push(\"extended__multiselect-options-slate-grey\");\r\n      break;\r\n    case \"slate-blue\":\r\n      theme.push(\"extended__multiselect-options-slate-blue\");\r\n      break;\r\n    case \"teal\":\r\n      theme.push(\"extended__multiselect-options-teal\");\r\n      break;\r\n    case \"strict\":\r\n      theme.push(\"extended__multiselect-options-strict\");\r\n      break;\r\n    default:\r\n      theme.push(\"extended__multiselect-options\");\r\n  }\r\n\r\n  if (showMarker.value) {\r\n    theme.push(\"extended__multiselect-options--marker\");\r\n  }\r\n\r\n  if (chosenToggleAppearanceSide.value === \"atop\") {\r\n    theme.push(\"extended__multiselect-options--atop\");\r\n  }\r\n\r\n  return theme;\r\n});\r\n\r\n/**\r\n * Determines whether given options list is empty\r\n * @function\r\n * @returns {boolean} emptiness\r\n */\r\nconst emptyOptionsList = computed(() => {\r\n  return (\r\n    (!options.value.length ||\r\n      !options.value.filter((option) => !!option).length ||\r\n      !availableOptions.value.length) &&\r\n    !searchState.searchValue\r\n  );\r\n});\r\n\r\n/**\r\n * Determines whether list of internal search results is empty\r\n * @function\r\n * @returns {boolean} emptiness\r\n */\r\nconst emptySearchResult = computed(() => {\r\n  return (\r\n    !availableOptions.value.length && !createOnTheGo.value && searchState.searchValue\r\n  );\r\n});\r\n\r\n/**\r\n * Defines styles for \"min-heigt\", \"max-height\"\r\n * and \"top\" css-properties of options wrapper\r\n * @function\r\n * @returns {Object} styles\r\n */\r\nconst heightFromProps = computed(() => {\r\n  let heightRecord = {};\r\n\r\n  if (chosenToggleAppearanceSide.value === \"atop\") {\r\n    Object.defineProperty(heightRecord, \"top\", {\r\n      enumerable: true,\r\n      value: `-${toggleMaxHeight.value}px`,\r\n    });\r\n  }\r\n\r\n  Object.defineProperty(heightRecord, \"maxHeight\", {\r\n    enumerable: true,\r\n    value: `${toggleMaxHeight.value}px`,\r\n  });\r\n\r\n  if (toggleMinHeight.value) {\r\n    if (toggleMinHeight.value > toggleMaxHeight.value) {\r\n      if (showInsertWarnings.value) {\r\n        let errorMessage =\r\n          \"vue-extended-multiselect: «toggleMinHeight» property can not be greater than «toggleMaxHeight» property.\";\r\n        errorMessage +=\r\n          \"«toggleMaxHeight» property was reset to default value of 400 pixels.\";\r\n        console.warn(errorMessage);\r\n      }\r\n\r\n      return Object.keys(heightRecord).length ? heightRecord : null;\r\n    }\r\n\r\n    Object.defineProperty(heightRecord, \"minHeight\", {\r\n      enumerable: true,\r\n      value: `${toggleMinHeight.value}px`,\r\n    });\r\n  }\r\n\r\n  return Object.keys(heightRecord).length ? heightRecord : null;\r\n});\r\n\r\n/**\r\n * Determines whether maximal amount of options has been selected\r\n * @function\r\n * @returns {boolean} reaching\r\n */\r\nconst maxOptionsWereSelected = computed(() => {\r\n  return (\r\n    maxOptionsCount.value &&\r\n    multiple.value &&\r\n    selectedOptions.value.length === maxOptionsCount.value\r\n  );\r\n});\r\n\r\n/**\r\n * Determines whether minimal amount of options has not been selected\r\n * @function\r\n * @returns {boolean} reaching\r\n */\r\nconst minOptionsWereNotSelected = computed(() => {\r\n  return (\r\n    minOptionsCount.value &&\r\n    multiple.value &&\r\n    selectedOptions.value.length < minOptionsCount.value\r\n  );\r\n});\r\n\r\n/**\r\n * Defines styles for \"padding\" and \"height\" css-property\r\n * of every option element\r\n * @function\r\n * @returns {Object} styles\r\n */\r\nconst optionHeightByProps = computed(() => {\r\n  const heightNumeric = typeof anyOptionWrapperBlockHeight.value === \"number\";\r\n  let height = {\r\n    height: heightNumeric\r\n      ? `${anyOptionWrapperBlockHeight.value}px`\r\n      : `${anyOptionWrapperBlockHeight.value}`,\r\n  };\r\n\r\n  if (optionsPadding.value.length) {\r\n    const padding = {\r\n      paddingTop: optionsPadding.value[0] ? `${optionsPadding.value[0]}px` : null,\r\n      paddingLeft: optionsPadding.value[1] ? `${optionsPadding.value[1]}px` : null,\r\n      paddingBottom: optionsPadding.value[2] ? `${optionsPadding.value[2]}px` : null,\r\n      paddingRight: optionsPadding.value[3] ? `${optionsPadding.value[3]}px` : null,\r\n    };\r\n\r\n    return Object.assign(height, padding);\r\n  }\r\n\r\n  return height;\r\n});\r\n\r\n/**\r\n * Determines whether to show element with new custom option\r\n * @function\r\n * @returns {boolean} display\r\n */\r\nconst showCreateNewOptionBlock = computed(() => {\r\n  return createOnTheGo.value && !availableOptions.value.length && searchState.searchValue;\r\n});\r\n\r\n/**\r\n * Summarizes styles for options wrapper in combined collection\r\n * @function\r\n * @returns {Array} styles\r\n */\r\n\r\nconst styles = computed(() => {\r\n  return [\r\n    heightFromProps.value,\r\n    heightFromMounted,\r\n    atopWithScroll.value,\r\n    underWithScroll.value,\r\n  ];\r\n});\r\n\r\n/**\r\n * Toggles \"border-bottom-right-radius\", \"border-bottom-right-radius\"\r\n * and \"top\" css-properties of options wrapper\r\n * @function\r\n * @param {boolean} afterLoading - loading state flag\r\n */\r\nconst calculateTopOffset = (afterLoading = false) => {\r\n  nextTick(() => {\r\n    if (!optionsWrapper.value) return;\r\n\r\n    const offsetHeight = optionsWrapper.value.offsetHeight;\r\n    const scrollHeight = optionsWrapper.value.scrollHeight;\r\n\r\n    if (chosenToggleAppearanceSide.value === \"atop\") {\r\n      if (scrollHeight > offsetHeight) {\r\n        atopWithScroll.value = {\r\n          borderTopRightRadius: 0,\r\n        };\r\n      }\r\n\r\n      if (toggleMaxHeight.value >= offsetHeight || afterLoading) {\r\n        heightFromMounted.top = `-${offsetHeight - 1}px`;\r\n      }\r\n    } else {\r\n      if (scrollHeight > offsetHeight) {\r\n        underWithScroll.value = {\r\n          borderBottomRightRadius: 0,\r\n        };\r\n      }\r\n    }\r\n  });\r\n};\r\n\r\n/**\r\n * Restricts repeated selection of option\r\n * @function\r\n * @param {string} calculatedOptionLabel - displayed label of option\r\n */\r\nconst compareWithSelected = (calculatedOptionLabel) => {\r\n  return !selectedOptions.value.find((selectedOption) => {\r\n    let calculatedSelectedOptionLabel;\r\n\r\n    if (selectedOption && typeof selectedOption === \"object\") {\r\n      if (Object.keys(selectedOption).length === 0) {\r\n        calculatedSelectedOptionLabel = emptyObjectsPlaceholder.value;\r\n      } else if (Array.isArray(selectedOption)) {\r\n        calculatedSelectedOptionLabel = selectedOption.join(\", \");\r\n      } else {\r\n        calculatedSelectedOptionLabel =\r\n          selectedOption[label.value] && typeof selectedOption[label.value] === \"object\"\r\n            ? JSON.stringify(selectedOption[label.value])\r\n            : selectedOption[label.value].toString();\r\n      }\r\n    } else {\r\n      calculatedSelectedOptionLabel = selectedOption.toString();\r\n    }\r\n\r\n    return calculatedSelectedOptionLabel === calculatedOptionLabel;\r\n  });\r\n};\r\n\r\n/**\r\n * Creates new option by users input\r\n * if \"createOnTheGo\" prop equals true\r\n * @function\r\n * @emits extended:create-option\r\n */\r\nconst createNewOption = () => {\r\n  if (loading.value) return;\r\n\r\n  let newOption;\r\n\r\n  switch (createOptionType.value) {\r\n    case \"primitive\":\r\n      newOption = searchState.searchValue;\r\n      break;\r\n    case \"array\":\r\n      newOption = [searchState.searchValue];\r\n      break;\r\n    case \"object\":\r\n      newOption = createObjectOption();\r\n      break;\r\n  }\r\n\r\n  options.value.unshift(newOption);\r\n  emitter.value.emit(\"extended:create-option\", newOption);\r\n\r\n  if (autoSelectCreatedOption.value) {\r\n    selectOption(newOption, { target: { id: \"extended__multiselect\" } });\r\n    setSearchValue(null);\r\n    setSearchPattern(null);\r\n  }\r\n};\r\n\r\n/**\r\n * Creates option of type object\r\n * if \"createOptionType\" equals \"object\"\r\n * @function\r\n * @returns {UnionPropType} option\r\n */\r\nconst createObjectOption = () => {\r\n  if (!createOptionFields.value) {\r\n    if (showInsertWarnings.value) {\r\n      console.warn(\r\n        \"vue-extended-multiselect: if option should be object — option fields should not be empty\",\r\n      );\r\n    }\r\n\r\n    return searchState.searchValue;\r\n  }\r\n\r\n  const newOption = {};\r\n\r\n  createOptionFields.value.forEach((field) => {\r\n    Object.defineProperty(newOption, field, {\r\n      enumerable: true,\r\n      writable: true,\r\n      configurable: true,\r\n      value: `${field}-${searchState.searchValue}`,\r\n    });\r\n  });\r\n\r\n  return newOption;\r\n};\r\n\r\n/**\r\n * Recognises if option is disabled\r\n * @function\r\n * @param {UnionPropType} option - option to recognize\r\n * @returns {boolean} prohibition\r\n */\r\nconst defineDisabledOption = (option) => {\r\n  if (option && typeof option === \"object\" && !Array.isArray(option)) return false;\r\n\r\n  let convertedOption;\r\n\r\n  if (Array.isArray(option) && !option.length) {\r\n    convertedOption = emptyObjectsPlaceholder.value;\r\n  } else {\r\n    convertedOption = option;\r\n  }\r\n\r\n  if (disabledPrimitiveOptionsConverted.value.includes(convertedOption)) return true;\r\n\r\n  return false;\r\n};\r\n\r\n/**\r\n * Filters options list by pattern of internal search for available options\r\n * @function\r\n * @param {Array} optionsList - pre-filtered list of oprions\r\n * @returns {boolean} filter\r\n */\r\nconst filterBySearchPattern = (optionsList) => {\r\n  return optionsList.filter((option) => {\r\n    if (option && typeof option === \"object\") {\r\n      if (Array.isArray(option)) {\r\n        return searchState.searchPattern.test(\r\n          option.length ? option.join(\", \") : emptyObjectsPlaceholder.value,\r\n        );\r\n      }\r\n\r\n      let internalSearchResult;\r\n\r\n      if (searchByField.value.length) {\r\n        if (!option[searchByField.value]) return false;\r\n\r\n        internalSearchResult = option[searchByField.value].toString();\r\n      } else {\r\n        internalSearchResult = option[label.value].toString();\r\n      }\r\n\r\n      return searchState.searchPattern.test(internalSearchResult);\r\n    } else {\r\n      return searchState.searchPattern.test(option.toString());\r\n    }\r\n  });\r\n};\r\n\r\n/**\r\n * Blocks keys pressed in combination with \"enter\" key\r\n * for not to select options by them\r\n * @function\r\n * @param {KeyboardEvent} keyboardEvent - KeyboardEvent instance\r\n * @returns {boolean} block\r\n */\r\nconst keyBlocker = (keyboardEvent) => {\r\n  if (!keyboardEvent) return false;\r\n\r\n  const altKeyBlock = specialKeysBlock.value.includes(\"alt\");\r\n  const ctrlKeyBlock = specialKeysBlock.value.includes(\"ctrl\");\r\n  const shiftKeyBlock = specialKeysBlock.value.includes(\"shift\");\r\n\r\n  if (altKeyBlock && keyboardEvent.altKey) return true;\r\n  if (ctrlKeyBlock && keyboardEvent.ctrlKey) return true;\r\n  if (shiftKeyBlock && keyboardEvent.shiftKey) return true;\r\n\r\n  return false;\r\n};\r\n\r\n/**\r\n * Searchs for already selected options in particular\r\n * for options of type \"object\"\r\n * @function\r\n * @param {UnionPropType} option - option for search\r\n * @returns {boolean} selected\r\n */\r\nconst lookForObjectOptions = (option) => {\r\n  if (option && typeof option === \"object\") {\r\n    let calculatedOptionLabel;\r\n\r\n    if (Array.isArray(option) && !!option.length) {\r\n      calculatedOptionLabel = option.join(\", \");\r\n    } else {\r\n      const hasLabel = Object.getOwnPropertyNames(option).includes(label.value);\r\n\r\n      if (hasLabel) {\r\n        calculatedOptionLabel =\r\n          option[label.value] && typeof option[label.value] === \"object\"\r\n            ? JSON.stringify(option[label.value])\r\n            : option[label.value].toString();\r\n      } else {\r\n        calculatedOptionLabel = JSON.stringify(option);\r\n      }\r\n\r\n      if (Object.keys(option).length === 0) {\r\n        calculatedOptionLabel = emptyObjectsPlaceholder.value;\r\n      }\r\n    }\r\n\r\n    return compareWithSelected(calculatedOptionLabel);\r\n  } else {\r\n    return !selectedOptions.value.includes(option);\r\n  }\r\n};\r\n\r\n/**\r\n * Searches for already selected options in particular\r\n * for options of primitive types or of type \"function\"\r\n * @function\r\n * @param {UnionPropType} option - option for search\r\n * @returns {boolean} selected\r\n */\r\nconst lookForSimpleOptions = (option) => {\r\n  if (option && typeof option === \"object\" && Object.keys(option).length === 0) {\r\n    const emptyObject = selectedOptions.value.find((emptyObject) => {\r\n      return (\r\n        emptyObject && typeof emptyObject === \"object\" && !Object.keys(emptyObject).length\r\n      );\r\n    });\r\n\r\n    if (!emptyObject || selectedOptionsShown.value) return true;\r\n\r\n    return false;\r\n  }\r\n\r\n  if (\r\n    option &&\r\n    typeof option === \"object\" &&\r\n    !Array.isArray(option) &&\r\n    !Object.keys(option).includes(label.value)\r\n  )\r\n    return false;\r\n\r\n  return true;\r\n};\r\n\r\n/**\r\n * Defines a class for \"marker\" slot content\r\n * @function\r\n * @param {UnionPropType} option - option in options list\r\n * @returns {string} class\r\n */\r\nconst markerShapeClass = (option) => {\r\n  if (lookForSimpleOptions(option) && lookForObjectOptions(option)) {\r\n    return \"extended__multiselect-marker-shape--selected\";\r\n  }\r\n\r\n  return \"extended__multiselect-marker-shape\";\r\n};\r\n\r\n/**\r\n * Creates role of every option element for accessible applications\r\n * if it needed\r\n * @function\r\n * @param {UnionPropType} option - each option from options list\r\n * @returns {string|null} role\r\n */\r\nconst optionCreateRole = (option) => {\r\n  if (optionIsDisabled(option)) return null;\r\n  if (!option) return null;\r\n\r\n  return \"option\";\r\n};\r\n\r\n/**\r\n * Determines whether option is disabled\r\n * @function\r\n * @param {UnionPropType} option - each option from options list\r\n * @returns {boolean} blocking\r\n */\r\nconst optionIsDisabled = (option) => {\r\n  if (option[disableByField.value] || defineDisabledOption(option)) return true;\r\n\r\n  return false;\r\n};\r\n\r\n/**\r\n * Defines various classes for options dependent from props\r\n * @function\r\n * @param {UnionPropType} option - each option from options list\r\n * @returns {Array} classes\r\n */\r\nconst optionHighlightClasses = (option) => {\r\n  let theme = [];\r\n\r\n  if (highlightOptions.value) {\r\n    switch (themeType.value) {\r\n      case \"basic\":\r\n        theme.push(\"extended__multiselect-options_option\");\r\n        break;\r\n      case \"slate-grey\":\r\n        theme.push(\"extended__multiselect-options_option-slate-grey\");\r\n        break;\r\n      case \"slate-blue\":\r\n        theme.push(\"extended__multiselect-options_option-slate-blue\");\r\n        break;\r\n      case \"teal\":\r\n        theme.push(\"extended__multiselect-options_option-teal\");\r\n        break;\r\n      case \"strict\":\r\n        theme.push(\"extended__multiselect-options_option-strict\");\r\n        break;\r\n      default:\r\n        theme.push(\"extended__multiselect-options_option\");\r\n    }\r\n  }\r\n\r\n  if (showMarker.value) {\r\n    theme.push(\"extended__multiselect-options_option--marker\");\r\n  }\r\n\r\n  if (option && option[disableByField.value]) {\r\n    theme.push(\"extended__multiselect-options_option--disabled\");\r\n  }\r\n\r\n  if (disabledPrimitiveOptionsConverted.value && option && defineDisabledOption(option)) {\r\n    theme.push(\"extended__multiselect-options_option--disabled\");\r\n  }\r\n\r\n  return theme;\r\n};\r\n\r\n/**\r\n * Selects option\r\n * @function\r\n * @emits extended:deselect-option\r\n * @emits extended:preserve-search-field\r\n * @param {UnionPropType} option - option to select\r\n * @param {MouseEvent|KeyboardEvent} clickEvent - MouseEvent or KeyboardEvent instance\r\n */\r\nconst selectOption = (option, clickEvent) => {\r\n  emitter.value.emit(\"extended:trigger-selection\", false);\r\n  emitter.value.emit(\"extended:preserve-search-field\", false);\r\n\r\n  if (!clickEvent) return;\r\n  if (keyBlocker(clickEvent)) return;\r\n  if (loading.value) return;\r\n  if (maxOptionsWereSelected.value) return;\r\n  if (option[disableByField.value] || defineDisabledOption(option)) return;\r\n  if (\r\n    clickEvent.target.classList &&\r\n    (clickEvent.target.classList.contains(\"extended__multiselect-toggle\") ||\r\n      clickEvent.target.classList.contains(\"extended__multiselect-toggle--disabled\") ||\r\n      clickEvent.target.classList.contains(\"extended__multiselect-cancel\") ||\r\n      clickEvent.target.classList.contains(\"extended__multiselect-cancel--disabled\"))\r\n  )\r\n    return;\r\n\r\n  if (selectedOptionsShown.value || externalOptionsLoader.value) {\r\n    const optionDeselected = lookForObjectOptions(option);\r\n\r\n    if (!optionDeselected) {\r\n      const index = selectedOptions.value.findIndex((selectedOption) => {\r\n        return JSON.stringify(selectedOption) === JSON.stringify(option);\r\n      });\r\n\r\n      emitter.value.emit(\"extended:deselect-option\", { skipNextRemoval: true, index });\r\n\r\n      return;\r\n    }\r\n  }\r\n\r\n  const isObject = option && typeof option === \"object\" && !Array.isArray(option);\r\n\r\n  if (isObject && !Object.keys(option).includes(label.value)) {\r\n    if (showInsertWarnings.value) {\r\n      console.warn(\"vue-extended-multiselect: wrong label type inserted\");\r\n    }\r\n  }\r\n\r\n  selectOptionEmitter(option);\r\n};\r\n\r\n/**\r\n * Emits select events or clear event\r\n * if prop \"clearBySelectWhenMultiple\" equals true\r\n * @function\r\n * @emits extended:clear-field\r\n * @emits extended:select-option\r\n * @param {UnionPropType} - option to select\r\n */\r\nconst selectOptionEmitter = (option) => {\r\n  const isObjectOrArray = option && typeof option === \"object\";\r\n  const label = createLabel(isObjectOrArray, option);\r\n\r\n  if (multiple.value) {\r\n    if (clearBySelectWhenMultiple.value) {\r\n      emitter.value.emit(\"extended:clear-field\");\r\n    }\r\n\r\n    emitter.value.emit(\"extended:select-option\", {\r\n      label,\r\n      option,\r\n    });\r\n  } else {\r\n    emitter.value.emit(\"extended:select-option\", {\r\n      label,\r\n      option,\r\n    });\r\n  }\r\n};\r\n\r\n/**\r\n * Determines an option which will be selected\r\n * by pressing \"enter\" key on it\r\n * @function\r\n * @param {MouseEvent} event - MouseEvent instance\r\n */\r\nconst setEnterIndex = (event) => {\r\n  enterIndex.value = event.target.getAttribute(\"enter-locator\");\r\n};\r\n\r\n/**\r\n * Determines whether to show marker beside option by its selection\r\n * @function\r\n * @param {UnionPropType} option - each option from options list\r\n * @returns {boolean} display\r\n */\r\nconst showCurrentMarker = (option) => {\r\n  if (!lookForSimpleOptions(option) || !lookForObjectOptions(option)) {\r\n    return true;\r\n  }\r\n\r\n  return false;\r\n};\r\n\r\n/**\r\n * Emits event which listener will add special class\r\n * to search field before option selection\r\n * @function\r\n * @emits extended:trigger-selection\r\n * @emits extended:preserve-search-field\r\n */\r\nconst triggerOptionBeforeSelection = () => {\r\n  if (fieldWasShown.value) {\r\n    emitter.value.emit(\"extended:trigger-selection\", true);\r\n  }\r\n\r\n  emitter.value.emit(\"extended:preserve-search-field\", true);\r\n};\r\n\r\n/**\r\n * Triggers appearance side restrictor to set a position\r\n * of dropdown appearance\r\n * @function\r\n * @emits extended:available-options\r\n */\r\nwatch(availableOptions, () => {\r\n  emitter.value.emit(\"extended:available-options\");\r\n});\r\n\r\n/**\r\n * \"onBeforeMount\" hook of ExtendedMultiselectOptions component\r\n * @listens extended:select-enter\r\n * @listens extended:renew-field-forwarding\r\n * @listens extended:reset-index\r\n */\r\nonBeforeMount(() => {\r\n  const objectFields = restrictedOptions.value.filter((option) => {\r\n    if (!option) return false;\r\n\r\n    return (\r\n      option &&\r\n      typeof option === \"object\" &&\r\n      option[label.value] &&\r\n      typeof option[label.value] === \"object\"\r\n    );\r\n  });\r\n\r\n  if (objectFields.length && showInsertWarnings.value) {\r\n    console.warn(\r\n      \"vue-extended-multiselect: «label» property can not be of type «object»\",\r\n    );\r\n  }\r\n\r\n  emitter.value.on(\"extended:select-enter\", (keyboardEvent) => {\r\n    if (!enterIndex.value) return;\r\n\r\n    const option = availableOptions.value[enterIndex.value];\r\n\r\n    selectOption(option, keyboardEvent);\r\n  });\r\n\r\n  emitter.value.on(\"extended:renew-field-forwarding\", (value) => {\r\n    fieldWasShown.value = value;\r\n  });\r\n\r\n  emitter.value.on(\"extended:reset-index\", () => {\r\n    enterIndex.value = null;\r\n  });\r\n});\r\n\r\n/**\r\n * \"onMounted\" hook of ExtendedMultiselectOptions component\r\n */\r\nonMounted(() => {\r\n  new ResizeObserver(() => {\r\n    calculateTopOffset();\r\n  }).observe(optionsWrapper.value);\r\n});\r\n</script>\r\n","<template>\r\n  <svg\r\n    version=\"1.1\"\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n    xmlns:xlink=\"http://www.w3.org/1999/xlink\"\r\n    x=\"0px\"\r\n    y=\"0px\"\r\n    viewBox=\"0 0 490 490\"\r\n    style=\"enable-background: new 0 0 490 490\"\r\n    xml:space=\"preserve\"\r\n  >\r\n    <g>\r\n      <g>\r\n        <polygon\r\n          points=\"0,332.668 245.004,82.631 490,332.668 413.507,407.369 245.004,235.402 76.493,407.369 \t\t\"\r\n        />\r\n      </g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n    </g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n  </svg>\r\n</template>\r\n","<template>\r\n  <svg\r\n    version=\"1.1\"\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n    viewBox=\"0 0 26 26\"\r\n    xmlns:xlink=\"http://www.w3.org/1999/xlink\"\r\n    enable-background=\"new 0 0 26 26\"\r\n  >\r\n    <g>\r\n      <path\r\n        d=\"m13,0c-7.2,0-13,5.8-13,13s5.8,13 13,13 13-5.8 13-13-5.8-13-13-13zm0,22c-5,0-9-4-9-9s4-9 9-9 9,4 9,9-4,9-9,9z\"\r\n      />\r\n      <path\r\n        d=\"M18.8,14.4l-5-6C13.6,8.2,13.3,8,13,8s-0.6,0.1-0.8,0.4l-5,6l-0.1,0.1C7,14.7,7,14.8,7,15c0,0.3,0.2,0.7,0.5,0.9l1.7,1   C9.3,17,9.5,17,9.7,17c0.3,0,0.5-0.1,0.7-0.3l1.8-2.1c0.4-0.5,1.1-0.5,1.5,0l1.8,2.1c0.2,0.2,0.4,0.3,0.7,0.3c0.2,0,0.4,0,0.5-0.1   l1.7-1c0.3-0.2,0.5-0.5,0.5-0.9c0-0.2,0-0.3-0.1-0.5C18.8,14.4,18.8,14.4,18.8,14.4z\"\r\n      />\r\n    </g>\r\n  </svg>\r\n</template>\r\n","<template>\r\n  <svg\r\n    version=\"1.1\"\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n    xmlns:xlink=\"http://www.w3.org/1999/xlink\"\r\n    x=\"0px\"\r\n    y=\"0px\"\r\n    viewBox=\"0 0 490.037 490.037\"\r\n    style=\"enable-background: new 0 0 490.037 490.037\"\r\n    xml:space=\"preserve\"\r\n  >\r\n    <path\r\n      d=\"M91.483,490.019l153.535-160.332l153.535,160.332l91.483-91.439l-69.81-72.906l69.81-69.775L245.019,0.019L0,255.898\r\n      l69.81,69.775L0,398.58L91.483,490.019z M42.905,255.434L245.019,44.346l202.114,211.089l-48.1,48.07L245.019,142.678\r\n      L91.004,303.504L42.905,255.434z M245.019,187.02l202.114,211.081l-48.1,48.085L245.019,285.345L91.004,446.186l-48.1-48.085\r\n      L245.019,187.02z\"\r\n    />\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n  </svg>\r\n</template>\r\n","<template>\r\n  <svg\r\n    version=\"1.1\"\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n    viewBox=\"0 0 137.145 137.145\"\r\n    xmlns:xlink=\"http://www.w3.org/1999/xlink\"\r\n    enable-background=\"new 0 0 137.145 137.145\"\r\n  >\r\n    <g>\r\n      <g>\r\n        <path\r\n          d=\"m37.711,89.198l30.861-28.835-10.287-9.612-30.861,28.835 10.287,9.612zm72.004-89.198h-82.286c-15.149,0-27.429,12.281-27.429,27.429v82.287c0,15.148 12.28,27.429 27.429,27.429h82.286c15.149,0 27.429-12.28 27.429-27.429v-82.287c0-15.148-12.28-27.429-27.429-27.429zm13.715,102.858c0,11.361-9.21,20.572-20.572,20.572h-68.572c-11.361,0-20.571-9.211-20.571-20.572v-68.572c0-11.361 9.21-20.572 20.571-20.572h68.572c11.361,0 20.572,9.211 20.572,20.572v68.572zm-65.145-52.107l41.148,38.447 10.287-9.612-41.148-38.446-10.287,9.611z\"\r\n        />\r\n      </g>\r\n    </g>\r\n  </svg>\r\n</template>\r\n","<template>\r\n  <svg\r\n    version=\"1.1\"\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n    xmlns:xlink=\"http://www.w3.org/1999/xlink\"\r\n    x=\"0px\"\r\n    y=\"0px\"\r\n    viewBox=\"0 0 16 16\"\r\n    style=\"enable-background: new 0 0 16 16\"\r\n    xml:space=\"preserve\"\r\n  >\r\n    <g>\r\n      <path\r\n        style=\"fill: #030104\"\r\n        d=\"M8,0C3.582,0,0,3.582,0,8s3.582,8,8,8s8-3.582,8-8S12.418,0,8,0z M4,11l4-7l4,7H4z\"\r\n      />\r\n    </g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n  </svg>\r\n</template>\r\n","<template>\r\n  <svg\r\n    version=\"1.1\"\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n    xmlns:xlink=\"http://www.w3.org/1999/xlink\"\r\n    x=\"0px\"\r\n    y=\"0px\"\r\n    viewBox=\"0 0 490 490\"\r\n    style=\"enable-background: new 0 0 490 490\"\r\n    xml:space=\"preserve\"\r\n  >\r\n    <g>\r\n      <g>\r\n        <g>\r\n          <polygon\r\n            points=\"0,249.888 245.004,8.139 490,249.888 490,481.861 245.004,239.71 0,481.861 \t\t\t\"\r\n          />\r\n        </g>\r\n      </g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n    </g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n  </svg>\r\n</template>\r\n","<template>\r\n  <svg\r\n    version=\"1.1\"\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n    xmlns:xlink=\"http://www.w3.org/1999/xlink\"\r\n    x=\"0px\"\r\n    y=\"0px\"\r\n    viewBox=\"0 0 491.858 491.858\"\r\n    style=\"enable-background: new 0 0 491.858 491.858\"\r\n    xml:space=\"preserve\"\r\n  >\r\n    <g>\r\n      <g>\r\n        <path\r\n          d=\"M491.858,442.461c0,13.931-11.293,25.224-25.224,25.224L245.93,373.097L25.224,467.686\r\n          C11.292,467.686,0,456.392,0,442.461L227.011,32.58c0,0,18.918-18.918,37.834,0C283.764,51.499,491.858,442.461,491.858,442.461z\"\r\n        />\r\n      </g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n    </g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n  </svg>\r\n</template>\r\n","<template>\r\n  <div\r\n    aria-label=\"Toggle options list\"\r\n    role=\"switch\"\r\n    :aria-checked=\"dropdownActive\"\r\n    :class=\"toggleSlotClass\"\r\n    :tabindex=\"increasedTabindex\"\r\n    @click.stop.left=\"toggleOptionsList\"\r\n    @click.stop.middle=\"toggleOptionsList\"\r\n    @keypress.stop=\"toggleOptionsList($event)\"\r\n  >\r\n    <component v-if=\"!loading\" :class=\"classesSummary\" :is=\"icon\" :key=\"icon\" />\r\n    <extended-multiselect-loader\r\n      v-else\r\n      :icon-filter=\"loaderIconFilter\"\r\n      :icon-size=\"iconSize\"\r\n    />\r\n    <svg\r\n      version=\"1.1\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      xmlns:xlink=\"http://www.w3.org/1999/xlink\"\r\n      width=\"0\"\r\n      height=\"0\"\r\n    >\r\n      <defs>\r\n        <filter x=\"0\" y=\"0\" width=\"1\" height=\"1\" id=\"basicFilter\">\r\n          <feFlood flood-color=\"#BDBDBD\" />\r\n          <feComposite out=\"SourceGraphic\" in2=\"SourceGraphic\" operator=\"in\" />\r\n        </filter>\r\n        <filter x=\"0\" y=\"0\" width=\"1\" height=\"1\" id=\"blackFilter\">\r\n          <feFlood flood-color=\"#000000\" />\r\n          <feComposite out=\"SourceGraphic\" in2=\"SourceGraphic\" operator=\"in\" />\r\n        </filter>\r\n        <filter x=\"0\" y=\"0\" width=\"1\" height=\"1\" id=\"greenFilter\">\r\n          <feFlood flood-color=\"#068504\" />\r\n          <feComposite out=\"SourceGraphic\" in2=\"SourceGraphic\" operator=\"in\" />\r\n        </filter>\r\n      </defs>\r\n    </svg>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { computed, defineProps, toRefs } from \"vue\";\r\n\r\nimport useToggle from \"../composition/toggle\";\r\nimport useSizes from \"../composition/sizes\";\r\n\r\nimport ExtendedMultiselectLoader from \"./ExtendedMultiselectLoader.vue\";\r\nimport BaseArrowIcon from \"../icons/BaseArrowIcon.vue\";\r\nimport CircleArrowIcon from \"../icons/CircleArrowIcon.vue\";\r\nimport DoubleArrowIcon from \"../icons/DoubleArrowIcon.vue\";\r\nimport InnerArrowIcon from \"../icons/InnerArrowIcon.vue\";\r\nimport TriangleCircleArrowIcon from \"../icons/TriangleCircleArrowIcon.vue\";\r\nimport WideArrowIcon from \"../icons/WideArrowIcon.vue\";\r\nimport TriangleArrowIcon from \"../icons/TriangleArrowIcon.vue\";\r\n\r\nconst props = defineProps({\r\n  /**\r\n   * Determines what class to use on toggle slot\r\n   * @default false\r\n   * @property {boolean} disabled\r\n   */\r\n  disabled: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n\r\n  /**\r\n   * Determines whether option list expanded or not\r\n   * @property {boolean} dropdownActive\r\n   */\r\n  dropdownActive: {\r\n    type: Boolean,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Defines a svg-filter for icons\r\n   * @property {string} iconFilter\r\n   */\r\n  iconFilter: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Defines a svg-filter for loader icons\r\n   * @property {string} loaderIconFilter\r\n   */\r\n  loaderIconFilter: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Provides size to create special size-class\r\n   * for each kind of icon\r\n   * @property {string} iconSize\r\n   */\r\n  iconSize: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Replaces toggle button with loader\r\n   * @property {boolean} loading\r\n   */\r\n  loading: {\r\n    type: Boolean,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Determines toggle icon to be used in default toggle slot\r\n   * @property {string} toggleIcon\r\n   */\r\n  toggleIcon: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Defines \"tabindex\" attribute of toggle button\r\n   * @default null\r\n   * @property {number|null} tabindex\r\n   */\r\n  tabindex: {\r\n    type: Number,\r\n    default: null,\r\n  },\r\n\r\n  /**\r\n   * Reactive instance of LocalEmitter class\r\n   * @property {object} emitter\r\n   */\r\n  emitter: {\r\n    type: Object,\r\n    required: true,\r\n  },\r\n});\r\n\r\nconst {\r\n  disabled,\r\n  dropdownActive,\r\n  emitter,\r\n  iconFilter,\r\n  loaderIconFilter,\r\n  iconSize,\r\n  loading,\r\n  tabindex,\r\n  toggleIcon,\r\n} = toRefs(props);\r\n\r\nconst { toggleSlotClass, toggleOptionsList } = useToggle(loading, disabled, emitter);\r\nconst { iconSizeClass } = useSizes(iconSize);\r\n\r\n/**\r\n * Defines a list of toggle button classes\r\n * @function\r\n * @returns {Array} classes\r\n */\r\nconst classesSummary = computed(() => {\r\n  return [iconFilterClass.value, iconSizeClass.value, iconFilterRotationClass.value];\r\n});\r\n\r\n/**\r\n * Determines kind of toggle icon based on\r\n * \"toggleIcon\" prop\r\n * @function\r\n * @returns {string} icon\r\n */\r\nconst icon = computed(() => {\r\n  switch (toggleIcon.value) {\r\n    case \"base-arrow\":\r\n      return BaseArrowIcon;\r\n    case \"double-arrow\":\r\n      return DoubleArrowIcon;\r\n    case \"wide-arrow\":\r\n      return WideArrowIcon;\r\n    case \"circle-arrow\":\r\n      return CircleArrowIcon;\r\n    case \"inner-arrow\":\r\n      return InnerArrowIcon;\r\n    case \"triangle-arrow\":\r\n      return TriangleArrowIcon;\r\n    case \"triangle-circle-arrow\":\r\n      return TriangleCircleArrowIcon;\r\n    default:\r\n      return BaseArrowIcon;\r\n  }\r\n});\r\n\r\n/**\r\n * Defines svg-filter for toggle icon\r\n * @function\r\n * @returns {string} svg-filter\r\n */\r\nconst iconFilterClass = computed(() => {\r\n  const basicFilter = \"extended__multiselect-filter\";\r\n\r\n  switch (iconFilter.value) {\r\n    case \"basic\":\r\n      return `${basicFilter}_basic`;\r\n    case \"black\":\r\n      return `${basicFilter}_black`;\r\n    case \"green\":\r\n      return `${basicFilter}_green`;\r\n    default:\r\n      return `${basicFilter}_basic`;\r\n  }\r\n});\r\n\r\n/**\r\n * Defines rotation class of toggle icon based on\r\n * \"dropdownActive\" prop\r\n * @function\r\n * @returns {string} class\r\n */\r\nconst iconFilterRotationClass = computed(() => {\r\n  return dropdownActive.value\r\n    ? \"extended__multiselect-toggle--active\"\r\n    : \"extended__multiselect-toggle--locked\";\r\n});\r\n\r\n/**\r\n * Sets \"tabindex\" attibute of toggle button based on\r\n * given tabindex\r\n * @function\r\n * @returns {number} tabindex\r\n */\r\nconst increasedTabindex = computed(() => {\r\n  return tabindex.value ? tabindex.value + 1 : 0;\r\n});\r\n</script>\r\n","<template>\r\n  <section\r\n    aria-owns=\"extended-search-field\"\r\n    ref=\"extendedMultiselectWrapper\"\r\n    role=\"combobox\"\r\n    :aria-roledescription=\"roledescription\"\r\n    :class=\"wrapperClasses\"\r\n    :tabindex=\"tabindexIfSearch\"\r\n    @click.stop.left=\"fieldFocus\"\r\n    @click.stop.middle=\"fieldFocus\"\r\n    @keyup.stop.esc=\"rollUp\"\r\n    @keyup.stop.enter=\"selectByEnter\"\r\n    @mousedown.stop.left=\"toggleRestrictor\"\r\n    @mousedown.stop.middle=\"toggleRestrictor\"\r\n    @mouseleave.stop=\"resetEnterIndex\"\r\n  >\r\n    <div\r\n      ref=\"extendedMultiselect\"\r\n      :class=\"classes\"\r\n      :style=\"[displayWrongValue, expanded]\"\r\n    >\r\n      <div>\r\n        <extended-multiselect-input\r\n          :accesskey=\"attrs.accesskey\"\r\n          :autocomplete=\"attrs.autocomplete\"\r\n          :name=\"attrs.name\"\r\n          :spellcheck=\"attrs.spellcheck\"\r\n          :tabindex=\"attrs.tabindex\"\r\n          :translate=\"attrs.translate\"\r\n          :auto-select-search-value=\"autoSelectSearchValue\"\r\n          :create-on-the-go=\"createOnTheGo\"\r\n          :disabled=\"disabled\"\r\n          :loading=\"internalLoading\"\r\n          :loader-icon-filter=\"loaderIconFilter\"\r\n          :multiple=\"multiple\"\r\n          :search-filter-active=\"searchFilterActive\"\r\n          :show-deselect-icon-loader=\"showDeselectIconLoader\"\r\n          :toggling-saves-search-value=\"togglingSavesSearchValue\"\r\n          :toggle-options-by-select=\"toggleOptionsBySelect\"\r\n          :placeholder=\"placeholder\"\r\n          :show-search-field=\"showSearchField\"\r\n          :empty-objects-placeholder=\"emptyObjectsPlaceholder\"\r\n          :label=\"label\"\r\n          :multiple-blocks-limit-message=\"multipleBlocksLimitMessage\"\r\n          :theme-type=\"themeType\"\r\n          :increase-display-by=\"increaseDisplayBy\"\r\n          :multipleBlocksLimit=\"multipleBlocksLimit\"\r\n          :toggle-multiple-blocks-limit=\"toggleMultipleBlocksLimit\"\r\n          :selected-options=\"selectedOptions\"\r\n          :emitter=\"emitter\"\r\n          :create-custom-option-label=\"createCustomOptionLabel\"\r\n          :create-option-placeholder=\"createOptionPlaceholder\"\r\n          :external-options-loader=\"externalOptionsLoader\"\r\n          :input-id=\"inputId\"\r\n        >\r\n          <template v-if=\"slots.labelBlock\" #labelBlock=\"{ labelBlockValue }\">\r\n            <slot name=\"labelBlock\" :label-block-value=\"labelBlockValue\"> </slot>\r\n          </template>\r\n          <template\r\n            v-if=\"slots.multipleBlocks\"\r\n            #multipleBlocks=\"{ selectedOptions, deselectBlock }\"\r\n          >\r\n            <slot\r\n              name=\"multipleBlocks\"\r\n              :selected-options=\"selectedOptions\"\r\n              :deselect-block=\"deselectBlock\"\r\n            >\r\n            </slot>\r\n          </template>\r\n          <template\r\n            v-if=\"slots.optionBlock\"\r\n            #optionBlock=\"{ label, deselectBlock, index }\"\r\n          >\r\n            <slot\r\n              name=\"optionBlock\"\r\n              :label=\"label\"\r\n              :index=\"index\"\r\n              :deselect-block=\"deselectBlock\"\r\n            >\r\n            </slot>\r\n          </template>\r\n          <template v-if=\"slots.maxElements\" #maxElements>\r\n            <slot name=\"maxElements\"></slot>\r\n          </template>\r\n          <template v-if=\"toggleMultipleBlocksLimit\" #showMore=\"{ showMoreOptions }\">\r\n            <slot name=\"showMore\" :show-more-options=\"showMoreOptions\"> </slot>\r\n          </template>\r\n        </extended-multiselect-input>\r\n      </div>\r\n      <div class=\"extended__multiselect-toggle_wrapper\">\r\n        <slot name=\"toggle\" :toggle-options-list=\"toggleOptionsList\">\r\n          <extended-multiselect-toggle\r\n            ref=\"extendedMultiselectToggle\"\r\n            :tabindex=\"attrs.tabindex\"\r\n            :disabled=\"disabled\"\r\n            :dropdown-active=\"dropdownActive\"\r\n            :loading=\"internalLoading\"\r\n            :icon-filter=\"iconFilter\"\r\n            :loader-icon-filter=\"loaderIconFilter\"\r\n            :icon-size=\"iconSize\"\r\n            :toggle-icon=\"toggleIcon\"\r\n            :emitter=\"emitter\"\r\n          />\r\n        </slot>\r\n      </div>\r\n      <div class=\"extended__multiselect-cancel_wrapper\">\r\n        <slot name=\"cancel\" :cancel=\"cancel\">\r\n          <extended-multiselect-cancel\r\n            v-if=\"showClearIcon\"\r\n            :tabindex=\"attrs.tabindex\"\r\n            :disabled=\"disabled\"\r\n            :show-search-field=\"showSearchField\"\r\n            :loading=\"internalLoading\"\r\n            :loader-icon-filter=\"loaderIconFilter\"\r\n            :icon-size=\"iconSize\"\r\n            :selected-options=\"selectedOptions\"\r\n            :emitter=\"emitter\"\r\n          />\r\n        </slot>\r\n      </div>\r\n    </div>\r\n    <transition name=\"extended-toggle\" type=\"transition\">\r\n      <extended-multiselect-options\r\n        ref=\"extendedMultiselectOptions\"\r\n        v-if=\"dropdownActive\"\r\n        :auto-select-created-option=\"autoSelectCreatedOption\"\r\n        :clear-by-select-when-multiple=\"clearBySelectWhenMultiple\"\r\n        :create-on-the-go=\"createOnTheGo\"\r\n        :disabled-primitive-options-converted=\"disabledPrimitiveOptionsConverted\"\r\n        :highlight-options=\"highlightOptions\"\r\n        :loading=\"internalLoading\"\r\n        :multiple=\"multiple\"\r\n        :selected-options-shown=\"selectedOptionsShown\"\r\n        :show-insert-warnings=\"showInsertWarnings\"\r\n        :show-marker=\"showMarker\"\r\n        :chosen-toggle-appearance-side=\"chosenToggleAppearanceSide\"\r\n        :create-option-type=\"createOptionType\"\r\n        :disable-by-field=\"disableByField\"\r\n        :empty-objects-placeholder=\"emptyObjectsPlaceholder\"\r\n        :label=\"label\"\r\n        :search-by-field=\"searchByField\"\r\n        :theme-type=\"themeType\"\r\n        :any-option-wrapper-block-height=\"anyOptionWrapperBlockHeight\"\r\n        :max-options-count=\"maxOptionsCount\"\r\n        :min-options-count=\"minOptionsCount\"\r\n        :options-padding=\"optionsPadding\"\r\n        :toggle-max-height=\"toggleMaxHeight\"\r\n        :toggle-min-height=\"toggleMinHeight\"\r\n        :create-option-fields=\"createOptionFields\"\r\n        :options=\"restrictedOptions\"\r\n        :restricted-options=\"restrictedOptions\"\r\n        :selected-options=\"selectedOptions\"\r\n        :special-keys-block=\"specialKeysBlock\"\r\n        :preselected-option=\"preselectedOption\"\r\n        :preselected-options=\"preselectedOptions\"\r\n        :emitter=\"emitter\"\r\n        :create-custom-option-label=\"createCustomOptionLabel\"\r\n        :external-options-loader=\"externalOptionsLoader\"\r\n      >\r\n        <template v-if=\"slots.listHeader\" #listHeader>\r\n          <slot name=\"listHeader\"></slot>\r\n        </template>\r\n        <template v-if=\"maxOptionsCount\" #moreThanLimit>\r\n          <slot name=\"moreThanLimit\"></slot>\r\n        </template>\r\n        <template v-if=\"minOptionsCount\" #lessThanLimit>\r\n          <slot name=\"lessThanLimit\"></slot>\r\n        </template>\r\n        <template v-if=\"slots.option\" #option=\"{ option, createCustomOptionLabel }\">\r\n          <slot\r\n            name=\"option\"\r\n            :option=\"option\"\r\n            :create-custom-option-label=\"createCustomOptionLabel\"\r\n          >\r\n          </slot>\r\n        </template>\r\n        <template v-if=\"slots.marker\" #marker=\"{ selected }\">\r\n          <slot name=\"marker\" :selected=\"selected\"> </slot>\r\n        </template>\r\n        <template v-if=\"noResultsBlockShown\" #noResults>\r\n          <slot name=\"noResults\"></slot>\r\n        </template>\r\n        <template v-if=\"slots.noOptions\" #noOptions>\r\n          <slot name=\"noOptions\"></slot>\r\n        </template>\r\n        <template v-if=\"slots.listFooter\" #listFooter>\r\n          <slot name=\"listFooter\"></slot>\r\n        </template>\r\n      </extended-multiselect-options>\r\n    </transition>\r\n  </section>\r\n</template>\r\n\r\n<script setup>\r\nimport {\r\n  computed,\r\n  defineEmits,\r\n  defineExpose,\r\n  defineProps,\r\n  nextTick,\r\n  onBeforeMount,\r\n  onMounted,\r\n  provide,\r\n  ref,\r\n  toRaw,\r\n  toRefs,\r\n  useAttrs,\r\n  useSlots,\r\n  watch,\r\n} from \"vue\";\r\n\r\nimport {\r\n  themeTypes,\r\n  loaderThemeTypes,\r\n  toggleIcons,\r\n  iconFilters,\r\n  iconSizes,\r\n  createOptionTypes,\r\n  specialKeysToBlock,\r\n  toggleAppearenceSides,\r\n  UnionPropType,\r\n} from \"../sets/sets\";\r\n\r\nimport localEmitter from \"../tools/instance.js\";\r\n\r\nimport useToggle from \"../composition/toggle\";\r\nimport useCancel from \"../composition/cancel\";\r\nimport useLabels from \"../composition/labels\";\r\nimport useEmitter from \"../composition/emitter\";\r\nimport useClickOutside from \"../composition/click-outside\";\r\nimport usePreselectedOptions from \"../composition/preselected-options\";\r\nimport useSearchValue from \"../composition/search-value\";\r\n\r\nimport ExtendedMultiselectCancel from \"./ExtendedMultiselectCancel.vue\";\r\nimport ExtendedMultiselectInput from \"./ExtendedMultiselectInput.vue\";\r\nimport ExtendedMultiselectOptions from \"./ExtendedMultiselectOptions.vue\";\r\nimport ExtendedMultiselectToggle from \"./ExtendedMultiselectToggle.vue\";\r\n\r\n/**\r\n * @todo Mark optional arguments of the functions\r\n */\r\n\r\n/**\r\n * @author Ridiger Daniil Dmitrievich, 2022\r\n * @version 3.0.1\r\n */\r\nconst props = defineProps({\r\n  /**\r\n   * Determines whether to select just now created option\r\n   * automatically\r\n   * @default false\r\n   * @property {boolean} autoSelectCreatedOption\r\n   */\r\n  autoSelectCreatedOption: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n\r\n  /**\r\n   * Determines whether to take search value from current\r\n   * selected option if \"multiple\" prop equals false\r\n   * @default false\r\n   * @property {boolean} autoSelectSearchValue\r\n   */\r\n  autoSelectSearchValue: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n\r\n  /**\r\n   * Determines whether to clear search field by option selection\r\n   * @default false\r\n   * @property {boolean} clearBySelectWhenMultiple\r\n   */\r\n  clearBySelectWhenMultiple: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n\r\n  /**\r\n   * Allows user to create new options from search field\r\n   * @default false\r\n   * @property {boolean} createOnTheGo\r\n   */\r\n  createOnTheGo: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n\r\n  /**\r\n   * Determines whether options list should be expanded by default\r\n   * @default false\r\n   * @property {boolean} defaultExpanded\r\n   */\r\n  defaultExpanded: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n\r\n  /**\r\n   * Disables extended multiselect\r\n   * @default false\r\n   * @property {boolean} disabled\r\n   */\r\n  disabled: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n\r\n  /**\r\n   * Disables dropdown toggle\r\n   * @default false\r\n   * @property {boolean} dropdownDisabled\r\n   */\r\n  dropdownDisabled: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n\r\n  /**\r\n   * Switches options highlighting while hovering\r\n   * @default true\r\n   * @property {boolean} highlightOptions\r\n   */\r\n  highlightOptions: {\r\n    type: Boolean,\r\n    default: true,\r\n  },\r\n\r\n  /**\r\n   * Switches loading state of extended multiselect\r\n   * @default false\r\n   * @property {boolean} loading\r\n   */\r\n  loading: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n\r\n  /**\r\n   * Allows user to select multiple options\r\n   * @default false\r\n   * @property {boolean} multiple\r\n   */\r\n  multiple: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n\r\n  /**\r\n   * Determines whether to show special hint if no options were found\r\n   * @default true\r\n   * @property {boolean} noResultsBlockShown\r\n   */\r\n  noResultsBlockShown: {\r\n    type: Boolean,\r\n    default: true,\r\n  },\r\n\r\n  /**\r\n   * Determines whether to clear search field by selection/deselection of options\r\n   * @default true\r\n   * @property {boolean} resetSearchByValue\r\n   */\r\n  resetSearchByValue: {\r\n    type: Boolean,\r\n    default: true,\r\n  },\r\n\r\n  /**\r\n   * Allows user to use internal search for options\r\n   * @default true\r\n   * @property {boolean} searchFilterActive\r\n   */\r\n  searchFilterActive: {\r\n    type: Boolean,\r\n    default: true,\r\n  },\r\n\r\n  /**\r\n   * Switches full payload of extended multiselect events\r\n   * @default true\r\n   * @property {boolean} simpleEvents\r\n   */\r\n  simpleEvents: {\r\n    type: Boolean,\r\n    default: true,\r\n  },\r\n\r\n  /**\r\n   * Determines whether to show selected options in options list\r\n   * @default false\r\n   * @property {boolean} selectedOptionsShown\r\n   */\r\n  selectedOptionsShown: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n\r\n  /**\r\n   * Allows user to deselect all options by special icon\r\n   * @default false\r\n   * @property {boolean} showClearIcon\r\n   */\r\n  showClearIcon: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n\r\n  /**\r\n   * Determines whether to show loader icon in multiple\r\n   * options block if \"loading\" prop equals true\r\n   * @default true\r\n   * @property {boolean} showDeselectIconLoader\r\n   */\r\n  showDeselectIconLoader: {\r\n    type: Boolean,\r\n    default: true,\r\n  },\r\n\r\n  /**\r\n   * Determines whether to show useful internal warnings in console\r\n   * @default false\r\n   * @property {boolean} showInsertWarnings\r\n   */\r\n  showInsertWarnings: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n\r\n  /**\r\n   * Determines whether to show slot with special marker beside option in options list\r\n   * @default false\r\n   * @property {boolean} showMarker\r\n   */\r\n  showMarker: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n\r\n  /**\r\n   * Determines whether to show search field which allows user\r\n   * to search for options with internal search\r\n   * @default true\r\n   * @property {boolean} showSearchField\r\n   */\r\n  showSearchField: {\r\n    type: Boolean,\r\n    default: true,\r\n  },\r\n\r\n  /**\r\n   * Allows user to increase limit of shown elements with selected options\r\n   * by special icon\r\n   * @default false\r\n   * @property {boolean} toggleMultipleBlocksLimit\r\n   */\r\n  toggleMultipleBlocksLimit: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n\r\n  /**\r\n   * Determines whether to roll up options list by selection of option\r\n   * @default true\r\n   * @property {boolean} toggleOptionsBySelect\r\n   */\r\n  toggleOptionsBySelect: {\r\n    type: Boolean,\r\n    default: true,\r\n  },\r\n\r\n  /**\r\n   * Determines whether to save current search value if\r\n   * display of options list was toggled\r\n   * @default true\r\n   * @property {boolean} togglingSavesSearchValue\r\n   */\r\n  togglingSavesSearchValue: {\r\n    type: Boolean,\r\n    default: true,\r\n  },\r\n\r\n  /**\r\n   * Determines whether to define special class for extended multiselect\r\n   * if value is wrong\r\n   * Irregularity of value is defined by user\r\n   * @default false\r\n   * @property {boolean} wrongCurrentValue\r\n   */\r\n  wrongCurrentValue: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n\r\n  /**\r\n   * Placeholder for the search field to be used if\r\n   * user is allowed to create new options\r\n   * @default \"Select or create features\"\r\n   * @property {string} createOptionPlaceholder\r\n   */\r\n  createOptionPlaceholder: {\r\n    type: String,\r\n    default: \"Select or create features\",\r\n  },\r\n\r\n  /**\r\n   * Defines kind for all options which will be created by user\r\n   * @default \"primitive\"\r\n   * @property {string} createOptionType\r\n   */\r\n  createOptionType: {\r\n    type: String,\r\n    default: \"primitive\",\r\n    validator(value) {\r\n      return createOptionTypes.includes(value);\r\n    },\r\n  },\r\n\r\n  /**\r\n   * Determines a field in options of type \"object\"\r\n   * which value will be used to disable such options.\r\n   * @default \"disabled\"\r\n   * @property {string} disableByField\r\n   */\r\n  disableByField: {\r\n    type: String,\r\n    default: \"disabled\",\r\n  },\r\n\r\n  /**\r\n   * Placeholder for options of type \"object\"\r\n   * or Array instances which length/keys length equals 0\r\n   * @default \"Empty Object/Array\"\r\n   * @property {string} emptyObjectsPlaceholder\r\n   */\r\n  emptyObjectsPlaceholder: {\r\n    type: String,\r\n    default: \"Empty Object/Array\",\r\n  },\r\n\r\n  /**\r\n   * Defines \"border-color\" css-property for extended multiselect with wrong value\r\n   * @default \"#FF0000\"\r\n   * @property {string} errorBorderColor\r\n   */\r\n  errorBorderColor: {\r\n    type: String,\r\n    default: \"#FF0000\",\r\n  },\r\n\r\n  /**\r\n   * Defines svg-filter with color settings for all icons except loader\r\n   * @default \"basic\"\r\n   * @property {string} iconFilter\r\n   */\r\n  iconFilter: {\r\n    type: String,\r\n    default: \"basic\",\r\n    validator(value) {\r\n      return iconFilters.includes(value);\r\n    },\r\n  },\r\n\r\n  /**\r\n   * Defines sizes for all icons in pixels except loader\r\n   * @default \"large\"\r\n   * @property {string} iconSize\r\n   */\r\n  iconSize: {\r\n    type: String,\r\n    default: \"large\",\r\n    validator(value) {\r\n      return iconSizes.includes(value);\r\n    },\r\n  },\r\n\r\n  /**\r\n   * Defines field in options of type \"object\" that will be the label of option\r\n   * @default \"label\"\r\n   * @property {string} label\r\n   */\r\n  label: {\r\n    type: String,\r\n    default: \"label\",\r\n  },\r\n\r\n  /**\r\n   * Defines svg-filter with color settings for loader icon\r\n   * @default \"loader-default\"\r\n   * @property {string} loaderIconFilter\r\n   */\r\n  loaderIconFilter: {\r\n    type: String,\r\n    default: \"loader-default\",\r\n    validator(value) {\r\n      return loaderThemeTypes.includes(value);\r\n    },\r\n  },\r\n\r\n  /**\r\n   * Placeholder for search field to be used if\r\n   * user is not allowed to create new options\r\n   * @default \"Select features\"\r\n   * @property {string} placeholder\r\n   */\r\n  placeholder: {\r\n    type: String,\r\n    default: \"Select features\",\r\n  },\r\n\r\n  /**\r\n   * Determines field in options of type \"object\"\r\n   * to use in internal search.\r\n   * @default \"\"\r\n   * @property {string} searchByField\r\n   */\r\n  searchByField: {\r\n    type: String,\r\n    default: \"\",\r\n  },\r\n\r\n  /**\r\n   * Defines overall color theme for extended multiselect\r\n   * @default \"basic\"\r\n   * @property {string} themeType\r\n   */\r\n  themeType: {\r\n    type: String,\r\n    default: \"basic\",\r\n    validator(value) {\r\n      return themeTypes.includes(value);\r\n    },\r\n  },\r\n\r\n  /**\r\n   * Defines which side options list will be displayed on\r\n   * @default \"auto\"\r\n   * @property {string} toggleAppearanceSide\r\n   */\r\n  toggleAppearanceSide: {\r\n    type: String,\r\n    default: \"auto\",\r\n    validator(value) {\r\n      return toggleAppearenceSides.includes(value);\r\n    },\r\n  },\r\n\r\n  /**\r\n   * Defines kind of toggle icon from icons collection\r\n   * @default \"base-arrow\"\r\n   * @property {string} toggleIcon\r\n   */\r\n  toggleIcon: {\r\n    type: String,\r\n    default: \"base-arrow\",\r\n    validator(value) {\r\n      return toggleIcons.includes(value);\r\n    },\r\n  },\r\n\r\n  /**\r\n   * Defines gap which increases limit of displayed elements with selected options\r\n   * @default 5\r\n   * @property {number} increaseDisplayBy\r\n   */\r\n  increaseDisplayBy: {\r\n    type: Number,\r\n    default: 5,\r\n  },\r\n\r\n  /**\r\n   * Maximal limit of selected options\r\n   * @default null\r\n   * @property {number|null} maxOptionsCount\r\n   */\r\n  maxOptionsCount: {\r\n    type: Number,\r\n    default: null,\r\n  },\r\n\r\n  /**\r\n   * Minimal limit of selected options\r\n   * @default null\r\n   * @property {number|null} minOptionsCount\r\n   */\r\n  minOptionsCount: {\r\n    type: Number,\r\n    default: null,\r\n  },\r\n\r\n  /**\r\n   * Defines limit of displayed elements with selected options\r\n   * @default null\r\n   * @property {number|null} multipleBlocksLimit\r\n   */\r\n  multipleBlocksLimit: {\r\n    type: Number,\r\n    default: null,\r\n  },\r\n\r\n  /**\r\n   * Defines maximal limit of options list length\r\n   * @default null\r\n   * @property {number|null} optionsCountRestriction\r\n   */\r\n  optionsCountRestriction: {\r\n    type: Number,\r\n    default: null,\r\n  },\r\n\r\n  /**\r\n   * Defines maximal value in pixels of \"max-height\" css-property for options list\r\n   * @default 400\r\n   * @property {number} toggleMaxHeight\r\n   */\r\n  toggleMaxHeight: {\r\n    type: Number,\r\n    default: 400,\r\n  },\r\n\r\n  /**\r\n   * Defines minimal value in pixels of \"max-height\" css-property for options list\r\n   * @default null\r\n   * @property {number} toggleMaxHeight\r\n   */\r\n  toggleMinHeight: {\r\n    type: Number,\r\n    default: null,\r\n  },\r\n\r\n  /**\r\n   * Defines a list of fields for options of type \"object\" created by user\r\n   * @default [\"label\"]\r\n   * @property {Array} createOptionFields\r\n   */\r\n  createOptionFields: {\r\n    type: Array,\r\n    default: () => [\"label\"],\r\n    validator(value) {\r\n      return !value.some((field) => {\r\n        return typeof field !== \"string\";\r\n      });\r\n    },\r\n  },\r\n\r\n  /**\r\n   * Defines a list of primitive types for options.\r\n   * Options of given types will be disabled for selection.\r\n   * @default []\r\n   * @property {Array} disabledPrimitiveOptions\r\n   */\r\n  disabledPrimitiveOptions: {\r\n    type: Array,\r\n    default: () => [],\r\n    validator(value) {\r\n      return value.every((option) => {\r\n        return (\r\n          typeof option === \"string\" ||\r\n          typeof option === \"number\" ||\r\n          typeof option === \"boolean\" ||\r\n          typeof option === \"function\"\r\n        );\r\n      });\r\n    },\r\n  },\r\n\r\n  /**\r\n   * Raw options list\r\n   * @default []\r\n   * @property {Array|Function} options\r\n   */\r\n  options: {\r\n    type: [Array, Function],\r\n    default: () => [],\r\n  },\r\n\r\n  /**\r\n   * Defines a list with \"padding-top\", \"padding-left\", \"padding-bottom\"\r\n   * and \"padding-right\" css-properties for options in options list.\r\n   * Property \"padding-top\" matches index zero.\r\n   * Property \"padding-right\" matches index three.\r\n   * @default []\r\n   * @property {Array} optionsPadding\r\n   */\r\n  optionsPadding: {\r\n    type: Array,\r\n    default: () => [],\r\n    validator(value) {\r\n      return (\r\n        value.length < 5 &&\r\n        !value.some((padding) => {\r\n          return typeof padding !== \"number\";\r\n        })\r\n      );\r\n    },\r\n  },\r\n\r\n  /**\r\n   * Defines a list of options that will be select by default\r\n   * @default []\r\n   * @property {Array} preselectedOptions\r\n   */\r\n  preselectedOptions: {\r\n    type: Array,\r\n    default: () => [],\r\n  },\r\n\r\n  /**\r\n   * Defines a list of keys which in combination with mouse buttons or \"enter\" key\r\n   * will prevent selection of option\r\n   * @default []\r\n   * @property {Array} specialKeysBlock\r\n   */\r\n  specialKeysBlock: {\r\n    type: Array,\r\n    default: () => [],\r\n    validator(value) {\r\n      return value.every((keyBlock) => {\r\n        return specialKeysToBlock.includes(keyBlock);\r\n      });\r\n    },\r\n  },\r\n\r\n  /**\r\n   * Defines value of extended multiselect that can be used in \"v-model\" attribute\r\n   * @default []\r\n   * @property {Array|null} modelValue\r\n   */\r\n  modelValue: {\r\n    type: UnionPropType,\r\n    default: null,\r\n  },\r\n\r\n  /**\r\n   * Defines function that creates custom label for each option\r\n   * @default (option)=>null\r\n   * @property {Function} createCustomOptionLabel\r\n   */\r\n  createCustomOptionLabel: {\r\n    type: Function,\r\n    default: () => null,\r\n  },\r\n\r\n  /**\r\n   * Defines function that creates notification when maximal limit\r\n   * of selected options has been reached\r\n   * @default (number)=>string\r\n   * @property {Function} multipleBlocksLimitMessage\r\n   */\r\n  multipleBlocksLimitMessage: {\r\n    type: Function,\r\n    default: (number) => `and ${number} more items`,\r\n  },\r\n\r\n  /**\r\n   * Defines \"height\" css-property for each option in options list\r\n   * @default 30\r\n   * @property {number} anyOptionWrapperBlockHeight\r\n   */\r\n  anyOptionWrapperBlockHeight: {\r\n    type: [Number, String],\r\n    default: \"auto\",\r\n  },\r\n\r\n  /**\r\n   * \"id\" attribute of search field\r\n   * @default null\r\n   * @property {string|number|null} inputId\r\n   */\r\n  inputId: {\r\n    type: [String, Number],\r\n    default: null,\r\n  },\r\n\r\n  /**\r\n   * Defines options that will be select by default\r\n   * @default null\r\n   * @property {UnionPropType|null} preselectedOption\r\n   */\r\n  preselectedOption: {\r\n    type: UnionPropType,\r\n    default: null,\r\n  },\r\n});\r\n\r\nconst emit = defineEmits([\r\n  \"active\",\r\n  \"clean\",\r\n  \"close\",\r\n  \"increase\",\r\n  \"option-created\",\r\n  \"pattern-changed\",\r\n  \"select\",\r\n  \"update:modelValue\",\r\n]);\r\n\r\nconst dropdownActive = ref(false);\r\nconst skipNextRemoval = ref(false);\r\nconst externalOptionsLoader = ref(null);\r\nconst chosenToggleAppearanceSide = ref(null);\r\nconst selectedOptionsWatcher = ref(null);\r\nconst rawOptions = ref([]);\r\nconst selectedOptions = ref([]);\r\nconst togglePattern = /^extended__multiselect-toggle_wrapper/i;\r\n\r\n/**\r\n * Element references\r\n */\r\nconst extendedMultiselect = ref(null);\r\nconst extendedMultiselectToggle = ref(null);\r\nconst extendedMultiselectWrapper = ref(null);\r\nconst extendedMultiselectOptions = ref(null);\r\n\r\nconst {\r\n  defaultExpanded,\r\n  disabled,\r\n  dropdownDisabled,\r\n  disabledPrimitiveOptions,\r\n  emptyObjectsPlaceholder,\r\n  errorBorderColor,\r\n  inputId,\r\n  label,\r\n  loading,\r\n  loaderIconFilter,\r\n  modelValue,\r\n  multiple,\r\n  options,\r\n  optionsCountRestriction,\r\n  preselectedOption,\r\n  preselectedOptions,\r\n  resetSearchByValue,\r\n  simpleEvents,\r\n  showClearIcon,\r\n  showInsertWarnings,\r\n  showSearchField,\r\n  themeType,\r\n  toggleAppearanceSide,\r\n  toggleMaxHeight,\r\n  toggleOptionsBySelect,\r\n  wrongCurrentValue,\r\n  createCustomOptionLabel,\r\n} = toRefs(props);\r\n\r\nconst { searchState, setSearchValue, setSearchPattern } = useSearchValue();\r\n\r\nprovide(\"loaderIconFilter\", loaderIconFilter.value);\r\nprovide(\"searchState\", searchState);\r\nprovide(\"setSearchValue\", setSearchValue);\r\nprovide(\"setSearchPattern\", setSearchPattern);\r\n\r\nconst { emitter } = useEmitter();\r\nconst { clickOutside } = useClickOutside();\r\nconst { toggleOptionsList } = useToggle(loading, disabled, emitter);\r\nconst { cancel } = useCancel(\r\n  disabled,\r\n  showSearchField,\r\n  selectedOptions,\r\n  emitter,\r\n  setSearchValue,\r\n  setSearchPattern,\r\n);\r\nconst { createLabel, optionTypeRestrictor } = usePreselectedOptions(\r\n  label,\r\n  emptyObjectsPlaceholder,\r\n  showInsertWarnings,\r\n);\r\nconst { optionCreateLabel } = useLabels(\r\n  label,\r\n  createCustomOptionLabel,\r\n  emptyObjectsPlaceholder,\r\n);\r\nconst attrs = useAttrs();\r\nconst slots = useSlots();\r\n\r\n/**\r\n * Defines a list of extended multiselect wrapper classes\r\n * @function\r\n * @returns {Array} classes\r\n */\r\nconst classes = computed(() => {\r\n  let theme;\r\n  const localClassList = [];\r\n\r\n  switch (themeType.value) {\r\n    case \"basic\":\r\n      theme = \"extended__multiselect\";\r\n      break;\r\n    case \"slate-grey\":\r\n      theme = \"extended__multiselect-slate-grey\";\r\n      break;\r\n    case \"slate-blue\":\r\n      theme = \"extended__multiselect-slate-blue\";\r\n      break;\r\n    case \"teal\":\r\n      theme = \"extended__multiselect-teal\";\r\n      break;\r\n    case \"strict\":\r\n      theme = \"extended__multiselect-strict\";\r\n      break;\r\n    default:\r\n      theme = \"extended__multiselect\";\r\n  }\r\n\r\n  localClassList.push(theme);\r\n\r\n  const clear = showClearIcon.value\r\n    ? \"extended__multiselect-clear--active\"\r\n    : \"extended__multiselect-clear--locked\";\r\n\r\n  localClassList.push(clear);\r\n  localClassList.push(\"extended__multiselect-container\");\r\n\r\n  return localClassList;\r\n});\r\n\r\n/**\r\n * Defines a list of disabled primitive options given in \"disabledPrimitiveOptions\" prop\r\n * @function\r\n * @returns {Array} options\r\n */\r\nconst disabledPrimitiveOptionsConverted = computed(() => {\r\n  if (!disabledPrimitiveOptions.value) return null;\r\n\r\n  return disabledPrimitiveOptions.value.map((disabledOption) => {\r\n    if (\r\n      disabledOption &&\r\n      (Array.isArray(disabledOption) || typeof disabledOption === \"object\")\r\n    ) {\r\n      return null;\r\n    }\r\n\r\n    return disabledOption;\r\n  });\r\n});\r\n\r\n/**\r\n * Determines whether to display irregularity of value by \"border-color\" css-property\r\n * @function\r\n * @returns {Object|null} styles\r\n */\r\nconst displayWrongValue = computed(() => {\r\n  return wrongCurrentValue.value ? { borderColor: errorBorderColor.value } : null;\r\n});\r\n\r\n/**\r\n * Defines styles depending on current options list dropdown state\r\n * @function\r\n * @returns {Object|null} styles\r\n */\r\nconst expanded = computed(() => {\r\n  let borderStyles;\r\n\r\n  if (chosenToggleAppearanceSide.value === \"atop\") {\r\n    borderStyles = {\r\n      borderTopLeftRadius: 0,\r\n      borderTopRightRadius: 0,\r\n    };\r\n  } else {\r\n    borderStyles = {\r\n      borderBottomLeftRadius: 0,\r\n      borderBottomRightRadius: 0,\r\n    };\r\n  }\r\n\r\n  return dropdownActive.value ? borderStyles : null;\r\n});\r\n\r\n/**\r\n * Determines whether to activate loading state by \"loading\" prop\r\n * or by internal loading sign\r\n * @function\r\n * @returns {boolean} loading\r\n */\r\nconst internalLoading = computed(() => {\r\n  return loading.value;\r\n});\r\n\r\n/**\r\n * Defines mapped list of previously restricted options\r\n * @function\r\n * @returns {Array} options\r\n */\r\nconst mappedOptions = computed(() => {\r\n  return restrictedOptions.value.map((restrictedOption) => {\r\n    return JSON.stringify(restrictedOption);\r\n  });\r\n});\r\n\r\n/**\r\n * Defines a list of options filtered by maximal admissible options amount\r\n * @function\r\n * @returns {Array} options\r\n */\r\nconst restrictedOptions = computed(() => {\r\n  if (!rawOptions.value) return [];\r\n\r\n  return optionsCountRestriction.value\r\n    ? rawOptions.value.filter((_, index) => index + 1 <= optionsCountRestriction.value)\r\n    : rawOptions.value;\r\n});\r\n\r\n/**\r\n * Defines \"aria-roledescription\" attribute of extended multiselect wrapper\r\n * @function\r\n * @returns {string} aria-roledescription\r\n */\r\nconst roledescription = computed(() => {\r\n  return multiple.value ? \"Multiselect\" : \"Select\";\r\n});\r\n\r\n/**\r\n * Defines \"tabindex\" attribute of extended multiselect wrapper if needed\r\n * @function\r\n * @returns {number} tabindex\r\n */\r\nconst tabindexIfSearch = computed(() => {\r\n  return showSearchField.value ? attrs.tabindex : -1;\r\n});\r\n\r\n/**\r\n * Defines special class which indicates disabled or loading state\r\n * of extended multiselect wrapper\r\n * @function\r\n * @returns {string} class\r\n */\r\nconst wrapperClasses = computed(() => {\r\n  return disabled.value && !internalLoading.value\r\n    ? \"extended__multiselect-wrapper--disabled\"\r\n    : \"extended__multiselect-wrapper\";\r\n});\r\n\r\n/**\r\n * Forcibly rolls up dropdown options list by changing \"dropdownActive\" flag\r\n * @function\r\n * @emits extended:rollup-options\r\n * @param {boolean} value - \"dropdownActive\" flag\r\n */\r\nwatch(dropdownActive, (value) => {\r\n  if (!value) {\r\n    emitter.value.emit(\"extended:rollup-options\");\r\n  }\r\n});\r\n\r\n/**\r\n * Changes selected options based on external modelValue changes\r\n * @function\r\n */\r\nwatch(\r\n  modelValue,\r\n  (value, prevValue) => {\r\n    if (\r\n      JSON.stringify(toRaw(value)) === JSON.stringify(toRaw(prevValue)) ||\r\n      skipNextRemoval.value\r\n    ) {\r\n      skipNextRemoval.value = false;\r\n\r\n      return;\r\n    }\r\n\r\n    setPreselectedOptionsByModelValue(true);\r\n  },\r\n  { deep: true },\r\n);\r\n\r\n/**\r\n * Emits \"active\" when dropdown options list is active\r\n * @function\r\n * @emits active\r\n */\r\nconst activeEmitter = () => {\r\n  const eventData = simpleEvents.value\r\n    ? null\r\n    : {\r\n        inputId: inputId.value,\r\n      };\r\n\r\n  /**\r\n   * @event active\r\n   * @type {object|null}\r\n   * @property {string} inputId - id of search field set by \"id\" prop\r\n   */\r\n  emit(\"active\", eventData);\r\n};\r\n\r\n/**\r\n * Emits \"close\" when dropdown options list is rolled up\r\n * @function\r\n * @emits close\r\n */\r\nconst closeEmitter = () => {\r\n  const eventData = simpleEvents.value\r\n    ? selectedOptions.value\r\n    : createEventFields(selectedOptions.value, \"options\");\r\n\r\n  /**\r\n   * @event close\r\n   * @type {object|Array}\r\n   * @property {string} inputId - id of search field set by \"id\" prop\r\n   * @property {Array} options - array of selected options\r\n   */\r\n  emit(\"close\", eventData);\r\n};\r\n\r\n/**\r\n * Creates payload for events that can be listened by outer listeners\r\n * @function\r\n * @param {UnionPropType} field - main payload of event\r\n * @param {string} fieldName - name of field with main payload of event\r\n * @returns {object} payload\r\n */\r\nconst createEventFields = (field, fieldName) => {\r\n  const eventFields = {\r\n    inputId: inputId.value,\r\n  };\r\n\r\n  Object.defineProperty(eventFields, fieldName, {\r\n    value: field,\r\n    enumerable: true,\r\n  });\r\n\r\n  return eventFields;\r\n};\r\n\r\n/**\r\n * Focuses search field if \"click\" native event was triggered on available element\r\n * @function\r\n * @emits extended:field-focus\r\n * @param {MouseEvent} mouseEvent - MouseEvent instance\r\n */\r\nconst fieldFocus = (mouseEvent) => {\r\n  if (disabled.value) return;\r\n\r\n  if (!toggleOptionsBySelect.value) {\r\n    const customFilteredOptions = toggleOptionsRestrictor(mouseEvent);\r\n\r\n    if (customFilteredOptions) return;\r\n  }\r\n\r\n  const customFilteredCancel = toggleCustomRestrictor(mouseEvent, 2);\r\n  const customFilteredSelf = toggleCustomRestrictor(mouseEvent, 1);\r\n  const filteredHasCancel = toggleDetector(\r\n    mouseEvent,\r\n    /^extended__multiselect-cancel_wrapper/i,\r\n  );\r\n  const filteredHasToggle = toggleDetector(mouseEvent, togglePattern);\r\n\r\n  if (customFilteredCancel) return;\r\n  if (customFilteredSelf && dropdownActive.value === false) return;\r\n  if (filteredHasCancel.length) return;\r\n  if (filteredHasToggle.length && dropdownActive.value === false) return;\r\n\r\n  emitter.value.emit(\"extended:field-focus\");\r\n};\r\n\r\n/**\r\n * Initialises options list loading by external async method\r\n * @function\r\n * @param {string} pattern - value of search field\r\n * @param {boolean} initialValue - preselected options flag\r\n */\r\nconst loadOptionsByExternalLoader = (pattern, initialValue) => {\r\n  externalOptionsLoader.value = options.value;\r\n\r\n  options.value(pattern).then((options) => {\r\n    rawOptions.value = options;\r\n\r\n    if (initialValue) setPreselectedOptionsByConditions();\r\n  });\r\n};\r\n\r\n/**\r\n * Makes removal of selected options based on external modelValue changes\r\n * @function\r\n * @param {boolean} single - \"multiple\" prop flag\r\n */\r\nconst removeSelectedOptions = (single = false) => {\r\n  if (!single) {\r\n    const modelValueMapped = modelValue.value.map((option) => {\r\n      return JSON.stringify(option);\r\n    });\r\n\r\n    selectedOptions.value = selectedOptions.value.filter((option) => {\r\n      return modelValueMapped.includes(JSON.stringify(option));\r\n    });\r\n  } else {\r\n    if (!modelValue.value) cancel();\r\n  }\r\n};\r\n\r\n/**\r\n * Emits event whose listener resets index of \"enter\" key pressing\r\n * @function\r\n * @emits extended:reset-index\r\n */\r\nconst resetEnterIndex = () => {\r\n  emitter.value.emit(\"extended:reset-index\");\r\n};\r\n\r\n/**\r\n * Rolls up dropdown options list\r\n * @function\r\n * @emits extended:rollup-options\r\n */\r\nconst rollUp = () => {\r\n  dropdownActive.value = false;\r\n\r\n  emitter.value.emit(\"extended:rollup-options\");\r\n};\r\n\r\n/**\r\n * Rolls up dropdown options lists of other instances\r\n * @function\r\n * @emits extended:rollup-instances\r\n */\r\nconst rollupInstanses = () => {\r\n  localEmitter.emit(\"extended:rollup-instances\", extendedMultiselectWrapper.value);\r\n};\r\n\r\n/**\r\n * Triggers selection of option by \"enter\" key pressing\r\n * @function\r\n * @emits extended:select-enter\r\n * @param {KeyboardEvent} keyboardEvent - KeyboardEvent instance\r\n */\r\nconst selectByEnter = (keyboardEvent) => {\r\n  emitter.value.emit(\"extended:select-enter\", keyboardEvent);\r\n};\r\n\r\n/**\r\n * Sets preselected option provided by \"preselectedOption\" prop\r\n * @function\r\n * @emits extended:preselect-option\r\n * @param {UnionPropType} preselectedOption - option to be selected\r\n * @param {boolean} restriction - restriction of preselected option\r\n */\r\nconst setPreselectedOption = (preselectedOption, restriction = true) => {\r\n  const availableOptionType = optionTypeRestrictor(preselectedOption);\r\n  const mappedSelectedOptions = selectedOptions.value.map((selectedOption) => {\r\n    return JSON.stringify(selectedOption);\r\n  });\r\n\r\n  if (!availableOptionType) return;\r\n\r\n  if (\r\n    !mappedOptions.value.includes(JSON.stringify(preselectedOption)) &&\r\n    restriction &&\r\n    !mappedSelectedOptions.includes(JSON.stringify(preselectedOption))\r\n  ) {\r\n    if (showInsertWarnings.value) {\r\n      console.warn(\r\n        \"vue-extended-multiselect: option in «preselectedOption» property should be the same as analogue in «options» property\",\r\n      );\r\n    }\r\n\r\n    return;\r\n  }\r\n\r\n  const isObjectOrArray = preselectedOption && typeof preselectedOption === \"object\";\r\n  const label = createLabel(isObjectOrArray, preselectedOption);\r\n\r\n  emitter.value.emit(\"extended:preselect-option\", {\r\n    label,\r\n    option: preselectedOption,\r\n  });\r\n};\r\n\r\n/**\r\n * Sets preselected options provided by \"preselectedOptions\" prop\r\n * if \"multiple\" prop equals true\r\n * @function\r\n * @emits extended:preselect-option\r\n * @param {Array} preselectedOptions - options to be selected\r\n * @param {boolean} restriction - restriction of preselected options\r\n */\r\nconst setPreselectedOptions = async (preselectedOptions, restriction = true) => {\r\n  let allOptionsWereSelected = 0;\r\n  const mappedSelectedOptions = selectedOptions.value.map((selectedOption) => {\r\n    return JSON.stringify(selectedOption);\r\n  });\r\n\r\n  preselectedOptions.forEach((preselectedOption) => {\r\n    const availableOptionType = optionTypeRestrictor(preselectedOption);\r\n\r\n    if (!preselectedOption || !availableOptionType) return;\r\n    if (selectedOptions.value.includes(preselectedOption)) return;\r\n\r\n    if (\r\n      (mappedOptions.value.includes(JSON.stringify(preselectedOption)) || !restriction) &&\r\n      !mappedSelectedOptions.includes(JSON.stringify(preselectedOption))\r\n    ) {\r\n      const isObjectOrArray = preselectedOption && typeof preselectedOption === \"object\";\r\n      const label = createLabel(isObjectOrArray, preselectedOption);\r\n\r\n      allOptionsWereSelected++;\r\n\r\n      emitter.value.emit(\"extended:preselect-option\", {\r\n        label,\r\n        option: preselectedOption,\r\n      });\r\n    }\r\n  });\r\n\r\n  if (allOptionsWereSelected !== preselectedOptions.length && showInsertWarnings.value) {\r\n    console.warn(\r\n      \"vue-extended-multiselect: options in «preselectedOptions» property should be the same as analogues in «options» property\",\r\n    );\r\n  }\r\n};\r\n\r\n/**\r\n * Determines conditions that control preselected options installattion\r\n * if \"modelValue\" prop is defined\r\n * @function\r\n * @emits update:wrapper\r\n * @param {boolean} withRemoval - removal of selected options flag\r\n */\r\nconst setPreselectedOptionsByModelValue = (withRemoval = false) => {\r\n  if (!modelValue.value && !withRemoval) return;\r\n\r\n  if (withRemoval) selectedOptionsWatcher.value();\r\n\r\n  if (Array.isArray(modelValue.value) && multiple.value) {\r\n    if (withRemoval) removeSelectedOptions();\r\n\r\n    setPreselectedOptions(modelValue.value, false);\r\n  } else {\r\n    if (withRemoval) removeSelectedOptions(true);\r\n\r\n    setPreselectedOption(modelValue.value, false);\r\n  }\r\n\r\n  if (withRemoval) {\r\n    updateModelValue();\r\n\r\n    selectedOptionsWatcher.value = watch(\r\n      selectedOptions,\r\n      () => {\r\n        updateModelValue();\r\n\r\n        if (resetSearchByValue.value) {\r\n          emitter.value.emit(\"extended:clear-field\");\r\n        }\r\n      },\r\n      { deep: true },\r\n    );\r\n  }\r\n};\r\n\r\n/**\r\n * Determines conditions that control preselected options installattion\r\n * by \"preselectedOption\" and \"preselectedOptions\" props\r\n * @function\r\n */\r\nconst setPreselectedOptionsByConditions = () => {\r\n  if (preselectedOption.value && !multiple.value) {\r\n    setPreselectedOption(preselectedOption.value);\r\n\r\n    if (selectedOptions.value.length) {\r\n      updateModelValue();\r\n    }\r\n  }\r\n\r\n  if (!!preselectedOptions.value.length && multiple.value) {\r\n    const initialLength = selectedOptions.value.length;\r\n\r\n    setPreselectedOptions(preselectedOptions.value);\r\n\r\n    if (initialLength !== selectedOptions.value.length) {\r\n      updateModelValue();\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * Defines a position of dropdown appearance\r\n * @function\r\n * @returns {string} position\r\n */\r\nconst toggleAppearanceRestrictor = () => {\r\n  if (!window || !extendedMultiselectOptions.value.$el) return \"under\";\r\n\r\n  const innerHeight = window.innerHeight;\r\n  const offsetHeight =\r\n    extendedMultiselectOptions.value.$el.offsetHeight +\r\n    extendedMultiselect.value.offsetHeight;\r\n  const offsetTop = extendedMultiselect.value\r\n    ? extendedMultiselect.value.getBoundingClientRect().y\r\n    : 0;\r\n  const difference = innerHeight - offsetTop;\r\n\r\n  if (difference > offsetHeight) {\r\n    return \"under\";\r\n  } else {\r\n    return \"atop\";\r\n  }\r\n};\r\n\r\n/**\r\n * Sets a position of dropdown appearance\r\n * @function\r\n */\r\nconst toggleAppearanceRestrictorActivate = () => {\r\n  if (dropdownActive.value) {\r\n    chosenToggleAppearanceSide.value =\r\n      toggleAppearanceSide.value !== \"auto\"\r\n        ? toggleAppearanceSide.value\r\n        : toggleAppearanceRestrictor();\r\n  }\r\n};\r\n\r\n/**\r\n * Restricts toggling of dropdown options list\r\n * @function\r\n * @emits extended:skip-block-blur\r\n * @param {MouseEvent} mouseEvent - MouseEvent instance\r\n * @returns {boolean} toggling\r\n */\r\nconst toggleBlockRestrictor = (mouseEvent) => {\r\n  let generalRestriction;\r\n  let filteredCustomSelf;\r\n  const filteredHasBlock = toggleDetector(\r\n    mouseEvent,\r\n    /^extended__multiselect-block/i,\r\n    true,\r\n  );\r\n  const filteredHasSlot = toggleDetector(\r\n    mouseEvent,\r\n    /^extended__multiselect-options(?!_option)/i,\r\n    true,\r\n  );\r\n  const filteredSelf = toggleDetector(mouseEvent, /^extended__multiselect-clear/i, true);\r\n\r\n  if (filteredSelf.length || filteredHasBlock.length || filteredHasSlot.length) {\r\n    filteredCustomSelf = true;\r\n  } else {\r\n    filteredCustomSelf = toggleCustomRestrictor(mouseEvent);\r\n  }\r\n\r\n  if (extendedMultiselectToggle.value) {\r\n    generalRestriction =\r\n      (filteredHasBlock.length && dropdownActive.value && filteredCustomSelf) ||\r\n      (filteredSelf.length && dropdownActive.value && filteredCustomSelf) ||\r\n      (filteredHasSlot.length && dropdownActive.value && filteredCustomSelf);\r\n  } else {\r\n    generalRestriction =\r\n      (filteredHasBlock.length && dropdownActive.value) ||\r\n      (filteredSelf.length && dropdownActive.value) ||\r\n      (filteredHasSlot.length && dropdownActive.value);\r\n  }\r\n\r\n  if (generalRestriction) {\r\n    emitter.value.emit(\"extended:skip-block-blur\");\r\n\r\n    return true;\r\n  }\r\n\r\n  return false;\r\n};\r\n\r\n/**\r\n * Restricts toggling of dropdown options list by clicking\r\n * on particular descendants of toggle wrapper element\r\n * @function\r\n * @param {MouseEvent} mouseEvent - MouseEvent instance\r\n * @param {number} blockType - type of block which needs restriction\r\n * @returns {boolean} restriction\r\n */\r\nconst toggleCustomRestrictor = (mouseEvent, blockType) => {\r\n  let eventTarget = mouseEvent.target;\r\n  const toggleWrapper = extendedMultiselect.value;\r\n  const customToggle = toggleWrapper.children[blockType];\r\n\r\n  while (eventTarget) {\r\n    if (eventTarget === customToggle) return true;\r\n\r\n    eventTarget = eventTarget.parentNode;\r\n  }\r\n\r\n  return false;\r\n};\r\n\r\n/**\r\n * Restricts toggling of dropdown options list by clicking\r\n * on particular elements defined by given pattern\r\n * @function\r\n * @param {MouseEvent} mouseEvent - MouseEvent instance\r\n * @param {string} pattern - pattern with block class partial name\r\n * @param {boolean} mode - marks whether restrict by parent element or by current target\r\n * @returns {Array} classes\r\n */\r\nconst toggleDetector = (mouseEvent, pattern, mode) => {\r\n  let target = mouseEvent.target;\r\n\r\n  let filteredHasToggle = Array.prototype.filter.call(target.classList, (className) => {\r\n    return pattern.test(className) === true;\r\n  });\r\n\r\n  while (\r\n    target &&\r\n    ((target.classList && !target.classList.contains(\"extended__multiselect-wrapper\")) ||\r\n      (target.classList && !target.classList.length)) &&\r\n    mode &&\r\n    !filteredHasToggle.length\r\n  ) {\r\n    filteredHasToggle = Array.prototype.filter.call(target.classList, (className) => {\r\n      return pattern.test(className) === true;\r\n    });\r\n\r\n    if (target.classList.contains(\"extended__multiselect-options_container\")) {\r\n      filteredHasToggle.push(\"extended__multiselect-options_container\");\r\n\r\n      return filteredHasToggle;\r\n    }\r\n\r\n    if (target.classList.contains(\"extended__multiselect-toggle_wrapper\")) {\r\n      filteredHasToggle.push(\"extended__multiselect-toggle_wrapper\");\r\n\r\n      return filteredHasToggle;\r\n    }\r\n\r\n    target = target.parentNode;\r\n  }\r\n\r\n  return filteredHasToggle;\r\n};\r\n\r\n/**\r\n * Toggles dropdown options list and activates\r\n * necessary methods with relevant events\r\n * @function\r\n */\r\nconst toggleOptions = () => {\r\n  if (internalLoading.value || disabled.value || dropdownDisabled.value) return;\r\n\r\n  dropdownActive.value = !dropdownActive.value;\r\n\r\n  nextTick(() => {\r\n    toggleAppearanceRestrictorActivate();\r\n  });\r\n\r\n  if (!dropdownActive.value) {\r\n    activeEmitter();\r\n  } else {\r\n    closeEmitter();\r\n  }\r\n};\r\n\r\n/**\r\n * Prevents toggling dropdown options list\r\n * by selecting/deselecting option\r\n * @function\r\n * @param {MouseEvent} mouseEvent - MouseEvent instance\r\n * @returns {boolean} restriction\r\n */\r\nconst toggleOptionsRestrictor = (mouseEvent) => {\r\n  try {\r\n    let eventTarget = mouseEvent.target;\r\n    const optionsWrapper = optionsWrapper.value;\r\n\r\n    while (eventTarget) {\r\n      if (eventTarget === optionsWrapper) return true;\r\n\r\n      eventTarget = eventTarget.parentNode;\r\n    }\r\n\r\n    return false;\r\n  } catch (e) {\r\n    return false;\r\n  }\r\n};\r\n\r\n/**\r\n * Collects restrictions from other methods and defines\r\n * general restriction of toggling dropdown options list\r\n * @function\r\n * @emits extended:skip-blur\r\n * @param {MouseEvent} mouseEvent - MouseEvent instance\r\n */\r\nconst toggleRestrictor = (mouseEvent) => {\r\n  rollupInstanses();\r\n\r\n  const targetContentBlock = toggleBlockRestrictor(mouseEvent);\r\n\r\n  if (targetContentBlock) return;\r\n\r\n  const filteredHasToggle = toggleDetector(mouseEvent, togglePattern);\r\n\r\n  if (filteredHasToggle.length && dropdownActive.value) {\r\n    emitter.value.emit(\"extended:skip-blur\");\r\n  }\r\n};\r\n\r\n/**\r\n * Triggers modelValue updating when v-model has\r\n * been changed programmatically\r\n * @function\r\n * @emits update:modelValue\r\n */\r\nconst updateModelValue = () => {\r\n  if (multiple.value) {\r\n    emit(\"update:modelValue\", selectedOptions.value);\r\n  } else {\r\n    emit(\"update:modelValue\", selectedOptions.value[0]);\r\n  }\r\n};\r\n\r\n/**\r\n * \"onBeforeMount\" hook of the Vue3ExtendedMultiselect component\r\n * @emits select\r\n * @emits clean\r\n * @emits option-created\r\n * @emits increase\r\n * @emits pattern-changed\r\n * @emits extended:rollup-options\r\n * @listens extended:available-options\r\n * @listens extended:rollup-options\r\n * @listens extended:toggle-options\r\n * @listens extended:select-option\r\n * @listens extended:preselect-option\r\n * @listens extended:deselect-option\r\n * @listens extended:create-option\r\n * @listens extended:increase-display\r\n * @listens extended:loader-pattern-changed\r\n * @listens extended:search-pattern-changed\r\n */\r\nonBeforeMount(() => {\r\n  selectedOptionsWatcher.value = watch(\r\n    selectedOptions,\r\n    () => {\r\n      updateModelValue();\r\n\r\n      if (resetSearchByValue.value) {\r\n        emitter.value.emit(\"extended:clear-field\");\r\n      }\r\n    },\r\n    { deep: true },\r\n  );\r\n\r\n  chosenToggleAppearanceSide.value = toggleAppearanceSide.value;\r\n\r\n  emitter.value.on(\"extended:available-options\", () => {\r\n    nextTick(() => {\r\n      toggleAppearanceRestrictorActivate();\r\n    });\r\n  });\r\n\r\n  emitter.value.on(\"extended:rollup-options\", () => {\r\n    if (!dropdownActive.value) return;\r\n\r\n    closeEmitter();\r\n\r\n    dropdownActive.value = false;\r\n  });\r\n\r\n  emitter.value.on(\"extended:toggle-options\", () => {\r\n    toggleOptions();\r\n  });\r\n\r\n  emitter.value.on(\"extended:select-option\", (option) => {\r\n    const eventData = simpleEvents.value\r\n      ? option.option\r\n      : createEventFields(option.option, \"option\");\r\n\r\n    if (multiple.value) {\r\n      selectedOptions.value.push(option.option);\r\n      /**\r\n       * @event select\r\n       * @type {Object}\r\n       * @property {string} inputId - id of search field set by \"id\" prop\r\n       * @property {UnionPropType} option - just now selected option\r\n       */\r\n      emit(\"select\", eventData);\r\n    } else {\r\n      selectedOptions.value = [option.option];\r\n      /**\r\n       * @see select\r\n       */\r\n      emit(\"select\", eventData);\r\n    }\r\n\r\n    updateModelValue();\r\n  });\r\n\r\n  emitter.value.on(\"extended:preselect-option\", (option) => {\r\n    if (multiple.value) {\r\n      selectedOptions.value.push(option.option);\r\n    } else {\r\n      selectedOptions.value = [option.option];\r\n    }\r\n\r\n    updateModelValue();\r\n  });\r\n\r\n  emitter.value.on(\"extended:deselect-option\", (payload) => {\r\n    if (multiple.value && payload && !payload.clearAll) {\r\n      const deselectedOption = selectedOptions.value[payload.index];\r\n\r\n      const eventData = simpleEvents.value\r\n        ? deselectedOption\r\n        : createEventFields(deselectedOption, \"option\");\r\n\r\n      /**\r\n       * @event clean\r\n       * @type {Object}\r\n       * @property {string} inputId - id of search field set by \"id\" prop\r\n       * @property {UnionPropType} option - just now deselected option\r\n       */\r\n      emit(\"clean\", eventData);\r\n\r\n      if (payload.skipNextRemoval) {\r\n        skipNextRemoval.value = true;\r\n      }\r\n\r\n      selectedOptions.value.splice(payload.index, 1);\r\n      updateModelValue();\r\n\r\n      return;\r\n    } else {\r\n      if (!selectedOptions.value.length) return;\r\n\r\n      const deselectedOption = payload.deselectedOptions\r\n        ? payload.deselectedOptions\r\n        : selectedOptions.value;\r\n\r\n      const eventData = simpleEvents.value\r\n        ? deselectedOption\r\n        : createEventFields(deselectedOption, \"option\");\r\n\r\n      /**\r\n       * @event clean\r\n       * @type {Object}\r\n       * @property {string} inputId - id of search field set by \"id\" prop\r\n       * @property {UnionPropType} options - just now deselected options\r\n       */\r\n      emit(\"clean\", eventData);\r\n\r\n      selectedOptions.value = [];\r\n      updateModelValue();\r\n    }\r\n\r\n    if (toggleOptionsBySelect.value) {\r\n      emitter.value.emit(\"extended:rollup-options\");\r\n    }\r\n  });\r\n\r\n  emitter.value.on(\"extended:create-option\", (createdOption) => {\r\n    const eventData = simpleEvents.value\r\n      ? createdOption\r\n      : createEventFields(createdOption, \"option\");\r\n\r\n    /**\r\n     * @event option-created\r\n     * @type {PluginObject}\r\n     * @property {string} inputId - id of search field set by \"id\" prop\r\n     * @property {UnionPropType} option - option created by user\r\n     */\r\n    emit(\"option-created\", eventData);\r\n  });\r\n\r\n  emitter.value.on(\"extended:increase-display\", (limit) => {\r\n    const eventData = simpleEvents.value ? limit : createEventFields(limit, \"limit\");\r\n\r\n    /**\r\n     * @event increase\r\n     * @type {Object}\r\n     * @property {string} inputId - id of search field set by \"id\" prop\r\n     * @property {limit} - current limit of options to be shown next\r\n     */\r\n    emit(\"increase\", eventData);\r\n  });\r\n\r\n  emitter.value.on(\"extended:loader-pattern-changed\", (pattern) => {\r\n    const eventData = simpleEvents.value\r\n      ? pattern\r\n      : createEventFields(pattern, \"pattern\");\r\n\r\n    /**\r\n     * @event pattern-changed\r\n     * @type {Object}\r\n     * @property {string} inputId - id of search field set by \"id\" prop\r\n     * @property {pattern} - pattern of internal search for available options\r\n     */\r\n    emit(\"pattern-changed\", eventData);\r\n  });\r\n\r\n  emitter.value.on(\"extended:search-pattern-changed\", (pattern) => {\r\n    const eventData = simpleEvents.value\r\n      ? pattern\r\n      : createEventFields(pattern, \"pattern\");\r\n\r\n    /**\r\n     * @event pattern-changed\r\n     * @type {Object}\r\n     * @property {string} inputId - id of search field set by \"id\" prop\r\n     * @property {pattern} - pattern of internal search for available options\r\n     */\r\n    emit(\"pattern-changed\", eventData);\r\n  });\r\n});\r\n\r\n/**\r\n * \"onMounted\" hook of the Vue3ExtendedMultiselect component\r\n * @listens extended:expand-options\r\n * @listens extended:rollup-instances\r\n * @listens extended:loader-pattern-changed\r\n */\r\nonMounted(() => {\r\n  if (typeof options.value === \"function\") {\r\n    loadOptionsByExternalLoader(null, true);\r\n  } else {\r\n    rawOptions.value = options.value;\r\n\r\n    setPreselectedOptionsByConditions();\r\n  }\r\n\r\n  setPreselectedOptionsByModelValue();\r\n\r\n  if (defaultExpanded.value && !disabled.value && typeof options.value !== \"function\") {\r\n    dropdownActive.value = true;\r\n\r\n    nextTick(() => {\r\n      toggleAppearanceRestrictorActivate();\r\n    });\r\n  }\r\n\r\n  emitter.value.on(\"extended:expand-options\", () => {\r\n    if (dropdownActive.value || dropdownDisabled.value) return;\r\n\r\n    dropdownActive.value = true;\r\n\r\n    nextTick(() => {\r\n      toggleAppearanceRestrictorActivate();\r\n    });\r\n    activeEmitter();\r\n  });\r\n\r\n  emitter.value.on(\"extended:loader-pattern-changed\", (pattern) => {\r\n    loadOptionsByExternalLoader(pattern, false);\r\n  });\r\n\r\n  clickOutside.value.init(extendedMultiselectWrapper.value, () => {\r\n    emitter.value.emit(\"extended:rollup-options\");\r\n  });\r\n\r\n  localEmitter.on(\"extended:rollup-instances\", (instanceRef) => {\r\n    if (instanceRef !== extendedMultiselectWrapper.value) {\r\n      emitter.value.emit(\"extended:rollup-options\");\r\n    }\r\n  });\r\n});\r\n\r\ndefineExpose({\r\n  optionCreateLabel,\r\n});\r\n</script>\r\n\r\n<style>\r\n.extended__multiselect-wrapper,\r\n.extended__multiselect-wrapper--disabled {\r\n  --basic-color: #708090;\r\n  --basic-transparent: rgba(112, 128, 144, 0.6);\r\n  --cancel: #b22222;\r\n  --cancel-backgound-color: rgba(179, 33, 33, 0.1);\r\n  --dark-slate-blue: #483d8b;\r\n  --dark-slate-blue-transparent: rgba(72, 61, 139, 0.6);\r\n  --dark-slate-grey: #2f4f4f;\r\n  --dark-slate-grey-transparent: rgba(47, 79, 79, 0.6);\r\n  --disabled: rgba(176, 176, 176, 0.6);\r\n  --hover-color: #ffffff;\r\n  --default-color: #ffffff;\r\n  --loader-color: #00bfff;\r\n  --placeholder: #808080;\r\n  --strict: #000000;\r\n  --strict-transparent: rgba(0, 0, 0, 0.6);\r\n  --teal: #008080;\r\n  --teal-transparent: rgba(0, 128, 128, 0.6);\r\n\r\n  --block-border-radius: 4px;\r\n  --block-cancel-padding: 4px;\r\n  --block-gap: 6px;\r\n  --block-padding: 1px 3px 1px 7px;\r\n  --border-radius: 6px;\r\n  --border-radius-small: 3px;\r\n  --cancel-padding: 3px 8px;\r\n  --grid-columns: 1fr 36px 36px;\r\n  --grid-rows: 1fr 36px;\r\n  --half-size: 50%;\r\n  --icon-size-block: 14px;\r\n  --icon-size-large: 18px;\r\n  --icon-size-medium: 15px;\r\n  --icon-size-small: 12px;\r\n  --increaser-padding: 3px 7px;\r\n  --max-size: 100%;\r\n  --min-block-height: 25px;\r\n  --options-padding: 6px 0;\r\n  --outer-gap: 10px;\r\n  --root-padding: 6px 10px;\r\n  --toggle-icon-gap: 1px;\r\n  --wide-text: 700;\r\n  --wrapper-padding: 5px 10px;\r\n  --z-index-options: 10;\r\n\r\n  --border: 1px solid;\r\n  --default-cursor: default;\r\n  --icons-align-self: center;\r\n  --icons-justify-self: center;\r\n  --pointer-cursor: pointer;\r\n  --wrapper-transition: border-top-left-radius 250ms ease 0s,\r\n    border-top-right-radius 250ms ease 0s, border-bottom-left-radius 250ms ease-out,\r\n    border-bottom-right-radius 250ms ease-out;\r\n}\r\n\r\n.extended-toggle-enter-active,\r\n.extended-toggle-leave-active {\r\n  transition: opacity 250ms;\r\n}\r\n\r\n.extended-toggle-enter,\r\n.extended-toggle-leave-to {\r\n  opacity: 0;\r\n}\r\n\r\n@keyframes loading {\r\n  0% {\r\n    transform: rotate(0deg);\r\n  }\r\n  100% {\r\n    transform: rotate(2turn);\r\n  }\r\n}\r\n\r\n.extended__multiselect-wrapper,\r\n.extended__multiselect-wrapper--disabled {\r\n  position: relative;\r\n  width: var(--max-size);\r\n  height: auto;\r\n  cursor: var(--pointer-cursor);\r\n}\r\n\r\n.extended__multiselect-wrapper *,\r\n.extended__multiselect-wrapper--disabled * {\r\n  box-sizing: border-box;\r\n  font-family: inherit;\r\n  font-size: inherit;\r\n  font-style: inherit;\r\n}\r\n\r\n.extended-multiselect-wrapper,\r\n.extended__multiselect-options_container {\r\n  background-color: var(--default-color);\r\n}\r\n\r\n.extended__multiselect-wrapper--disabled .extended__multiselect-container {\r\n  background-color: var(--disabled);\r\n  user-select: none;\r\n  cursor: var(--default-cursor);\r\n}\r\n\r\n.extended__multiselect-wrapper--disabled .extended__multiselect-input,\r\n.extended__multiselect-wrapper--disabled .extended__multiselect-input--hidden {\r\n  cursor: var(--default-cursor);\r\n}\r\n\r\n.extended__multiselect-container {\r\n  align-items: center;\r\n  transition: var(--wrapper-transition);\r\n}\r\n\r\n.extended__multiselect,\r\n.extended__multiselect-slate-grey,\r\n.extended__multiselect-slate-blue,\r\n.extended__multiselect-teal,\r\n.extended__multiselect-strict {\r\n  border: var(--border);\r\n  border-radius: var(--border-radius);\r\n  display: grid;\r\n  padding: var(--wrapper-padding);\r\n  width: var(--max-size);\r\n  background-color: var(--default-color);\r\n}\r\n\r\n.extended__multiselect,\r\n.extended__multiselect .extended__multiselect-increaser:active {\r\n  border-color: var(--basic-color);\r\n}\r\n\r\n.extended__multiselect .extended__multiselect-increaser:active {\r\n  border-color: var(--basic-color);\r\n}\r\n\r\n.extended__multiselect-slate-grey,\r\n.extended__multiselect-slate-grey .extended__multiselect-increaser:active {\r\n  border-color: var(--dark-slate-grey);\r\n}\r\n\r\n.extended__multiselect-slate-blue,\r\n.extended__multiselect-slate-blue .extended__multiselect-increaser:active {\r\n  border-color: var(--dark-slate-blue);\r\n}\r\n\r\n.extended__multiselect-teal,\r\n.extended__multiselect-teal .extended__multiselect-increaser:active {\r\n  border-color: var(--teal);\r\n}\r\n\r\n.extended__multiselect-strict,\r\n.extended__multiselect-strict .extended__multiselect-increaser:active {\r\n  border-color: var(--strict);\r\n}\r\n\r\n.extended__multiselect-options,\r\n.extended__multiselect-options-slate-grey,\r\n.extended__multiselect-options-slate-blue,\r\n.extended__multiselect-options-teal,\r\n.extended__multiselect-options-strict {\r\n  display: flex;\r\n  flex-flow: column nowrap;\r\n  position: absolute;\r\n  cursor: var(--pointer-cursor);\r\n  border: var(--border);\r\n  color: inherit;\r\n  user-select: none;\r\n  background-color: var(--default-color);\r\n  border-top-right-radius: 0;\r\n  border-top-left-radius: 0;\r\n  z-index: var(--z-index-options);\r\n  border-bottom-right-radius: var(--border-radius);\r\n  border-bottom-left-radius: var(--border-radius);\r\n  width: var(--max-size);\r\n  overflow: auto;\r\n  border-top: none;\r\n  top: var(--max-size);\r\n  -webkit-overflow-scrolling: touch;\r\n}\r\n\r\n.extended__multiselect-options\r\n  > *:not([class^=\"extended__multiselect-options_option\"]):not(\r\n    [class=\"extended__multiselect-options_container\"]\r\n  ),\r\n.extended__multiselect-options-slate-grey\r\n  > *:not([class^=\"extended__multiselect-options_option\"]):not(\r\n    [class=\"extended__multiselect-options_container\"]\r\n  ),\r\n.extended__multiselect-options-slate-blue\r\n  > *:not([class^=\"extended__multiselect-options_option\"]):not(\r\n    [class=\"extended__multiselect-options_container\"]\r\n  ),\r\n.extended__multiselect-options-teal\r\n  > *:not([class^=\"extended__multiselect-options_option\"]):not(\r\n    [class=\"extended__multiselect-options_container\"]\r\n  ),\r\n.extended__multiselect-options-strict\r\n  > *:not([class^=\"extended__multiselect-options_option\"]):not(\r\n    [class=\"extended__multiselect-options_container\"]\r\n  ) {\r\n  padding: var(--root-padding);\r\n}\r\n\r\n.extended__multiselect-options--atop {\r\n  border-top-right-radius: var(--border-radius);\r\n  border-top-left-radius: var(--border-radius);\r\n  border-bottom-right-radius: 0;\r\n  border-bottom-left-radius: 0;\r\n  border-top: var(--border);\r\n}\r\n\r\n.extended__multiselect-clear--active {\r\n  grid-template-columns: var(--grid-columns);\r\n}\r\n\r\n.extended__multiselect-clear--locked {\r\n  grid-template-columns: var(--grid-rows);\r\n}\r\n\r\n.extended__multiselect,\r\n.extended__multiselect-options {\r\n  border-color: var(--basic-color);\r\n}\r\n\r\n.extended__multiselect-slate-grey,\r\n.extended__multiselect-options-slate-grey {\r\n  border-color: var(--dark-slate-grey);\r\n}\r\n\r\n.extended__multiselect-slate-blue,\r\n.extended__multiselect-options-slate-blue {\r\n  border-color: var(--dark-slate-blue);\r\n}\r\n\r\n.extended__multiselect-teal,\r\n.extended__multiselect-options-teal {\r\n  border-color: var(--teal);\r\n}\r\n\r\n.extended__multiselect-strict,\r\n.extended__multiselect-options-strict {\r\n  border-color: var(--strict);\r\n}\r\n\r\n.extended__multiselect-input {\r\n  cursor: text;\r\n  color: inherit;\r\n}\r\n\r\n.extended__multiselect-input,\r\n.extended__multiselect-block {\r\n  border: none;\r\n  outline: none;\r\n  min-height: var(--min-block-height);\r\n  width: var(--max-size);\r\n}\r\n\r\n.extended__multiselect-block > span {\r\n  word-break: break-all;\r\n  white-space: pre-line;\r\n}\r\n\r\n.extended__multiselect-input:focus::placeholder,\r\n.extended__multiselect-input--trigger-option::placeholder,\r\n.extended__multiselect-input--preserved::placeholder {\r\n  color: var(--strict);\r\n  font-weight: var(--wide-text);\r\n}\r\n\r\n.extended__multiselect-block {\r\n  display: flex;\r\n  flex-flow: row nowrap;\r\n  align-items: center;\r\n  user-select: none;\r\n  color: inherit;\r\n}\r\n\r\n.extended__multiselect-input--hidden {\r\n  position: absolute;\r\n  cursor: var(--pointer-cursor);\r\n  border: none;\r\n  width: 0;\r\n  height: 0;\r\n  opacity: 0;\r\n  padding: 0;\r\n}\r\n\r\n.extended__multiselect-toggle,\r\n.extended__multiselect-toggle--disabled,\r\n.extended__multiselect-cancel,\r\n.extended__multiselect-cancel--disabled,\r\n.extended__multiselect-loader {\r\n  display: flex;\r\n  flex-flow: row nowrap;\r\n  align-items: center;\r\n  justify-content: center;\r\n  user-select: none;\r\n}\r\n\r\n.extended__multiselect-toggle--active,\r\n.extended__multiselect-toggle--locked {\r\n  transform-origin: 50% 50%;\r\n  transition: transform 0.2s ease-out;\r\n}\r\n\r\n.extended__multiselect-toggle--active {\r\n  transform: rotate(0deg);\r\n}\r\n\r\n.extended__multiselect-toggle--locked {\r\n  transform: rotate(180deg);\r\n}\r\n\r\n.extended__multiselect-toggle_wrapper,\r\n.extended__multiselect-cancel_wrapper {\r\n  align-self: var(--icons-align-self);\r\n  justify-self: var(--icons-justify-self);\r\n  cursor: var(--pointer-cursor);\r\n}\r\n\r\n.extended__multiselect-toggle {\r\n  margin-top: var(--toggle-icon-gap);\r\n}\r\n\r\n.extended__multiselect-toggle,\r\n.extended__multiselect-toggle--disabled {\r\n  padding: var(--cancel-padding);\r\n}\r\n\r\n.extended__multiselect-toggle_icon-large,\r\n.extended__multiselect-toggle--disabled_icon-large,\r\n.extended__multiselect-cancel_icon-large,\r\n.extended__multiselect-cancel--disabled_icon-large,\r\n.extended__multiselect-loader_icon-large {\r\n  width: var(--icon-size-large);\r\n  height: var(--icon-size-large);\r\n}\r\n\r\n.extended__multiselect-toggle_icon-medium,\r\n.extended__multiselect-toggle--disabled_icon-medium,\r\n.extended__multiselect-cancel_icon-medium,\r\n.extended__multiselect-cancel--disabled_icon-medium,\r\n.extended__multiselect-loader_icon-medium {\r\n  width: var(--icon-size-medium);\r\n  height: var(--icon-size-medium);\r\n}\r\n\r\n.extended__multiselect-toggle_icon-small,\r\n.extended__multiselect-toggle--disabled_icon-small,\r\n.extended__multiselect-cancel_icon-small,\r\n.extended__multiselect-cancel--disabled_icon-small,\r\n.extended__multiselect-loader_icon-small {\r\n  width: var(--icon-size-small);\r\n  height: var(--icon-size-small);\r\n}\r\n\r\n.extended__multiselect-toggle_icon-deselect,\r\n.extended__multiselect-toggle--disabled_icon-deselect,\r\n.extended__multiselect-cancel_icon-deselect,\r\n.extended__multiselect-cancel--disabled_icon-deselect,\r\n.extended__multiselect-loader_icon-deselect {\r\n  width: var(--icon-size-block);\r\n  height: var(--icon-size-block);\r\n}\r\n\r\n.extended__multiselect-cancel,\r\n.extended__multiselect-cancel--disabled {\r\n  border: var(--border);\r\n  border-color: transparent;\r\n  display: flex;\r\n  flex-flow: row nowrap;\r\n  align-items: center;\r\n  padding: var(--cancel-padding);\r\n}\r\n\r\n.extended__multiselect-cancel:active {\r\n  border-color: var(--cancel);\r\n  border-radius: var(--border-radius-small);\r\n  background-color: var(--cancel-backgound-color);\r\n}\r\n\r\n.extended__multiselect-filter_basic {\r\n  filter: url(#basicFilter);\r\n}\r\n\r\n.extended__multiselect-filter_black {\r\n  filter: url(#blackFilter);\r\n}\r\n\r\n.extended__multiselect-filter_green {\r\n  filter: url(#greenFilter);\r\n}\r\n\r\n.extended__multiselect-loader_default-loader {\r\n  filter: url(#filterLoaderDefault);\r\n}\r\n\r\n.extended__multiselect-loader_basic {\r\n  filter: url(#filterLoaderBasic);\r\n}\r\n\r\n.extended__multiselect-loader_slate-grey {\r\n  filter: url(#filterLoaderSlateGrey);\r\n}\r\n\r\n.extended__multiselect-loader_slate-blue {\r\n  filter: url(#filterLoaderSlateBlue);\r\n}\r\n\r\n.extended__multiselect-loader_teal {\r\n  filter: url(#filterLoaderTeal);\r\n}\r\n\r\n.extended__multiselect-loader_strict {\r\n  filter: url(#filterLoaderStrict);\r\n}\r\n\r\n.extended__multiselect-loader-animate {\r\n  animation-name: loading;\r\n  animation-duration: 3s;\r\n  animation-timing-function: linear;\r\n  animation-iteration-count: infinite;\r\n}\r\n\r\n.extended__multiselect-options_container {\r\n  display: flex;\r\n  flex-flow: column nowrap;\r\n}\r\n\r\n.extended__multiselect-options_option,\r\n.extended__multiselect-options_option-slate-grey,\r\n.extended__multiselect-options_option-slate-blue,\r\n.extended__multiselect-options_option-teal,\r\n.extended__multiselect-options_option-strict {\r\n  display: flex;\r\n  flex-flow: row nowrap;\r\n  align-items: center;\r\n  padding: var(--root-padding);\r\n  color: inherit;\r\n}\r\n\r\n.extended__multiselect--multiple-basic,\r\n.extended__multiselect--multiple-slate-grey,\r\n.extended__multiselect--multiple-slate-blue,\r\n.extended__multiselect--multiple-teal,\r\n.extended__multiselect--multiple-strict {\r\n  display: flex;\r\n  flex-flow: row nowrap;\r\n  align-items: center;\r\n  border-radius: var(--block-border-radius);\r\n  padding: var(--block-padding);\r\n  gap: var(--block-gap);\r\n  max-height: var(--min-block-height);\r\n}\r\n\r\n.extended__multiselect-options_option:hover,\r\n.extended__multiselect--multiple-basic {\r\n  background-color: var(--basic-transparent);\r\n  color: var(--hover-color);\r\n}\r\n\r\n.extended__multiselect-options_option-slate-grey:hover,\r\n.extended__multiselect--multiple-slate-grey {\r\n  background-color: var(--dark-slate-grey-transparent);\r\n  color: var(--hover-color);\r\n}\r\n\r\n.extended__multiselect-options_option-slate-blue:hover,\r\n.extended__multiselect--multiple-slate-blue {\r\n  background-color: var(--dark-slate-blue-transparent);\r\n  color: var(--hover-color);\r\n}\r\n\r\n.extended__multiselect-options_option-teal:hover,\r\n.extended__multiselect--multiple-teal {\r\n  background-color: var(--teal-transparent);\r\n  color: var(--hover-color);\r\n}\r\n\r\n.extended__multiselect-options_option-strict:hover,\r\n.extended__multiselect--multiple-strict {\r\n  background-color: var(--strict-transparent);\r\n  color: var(--hover-color);\r\n}\r\n\r\n.extended__multiselect-marker-shape {\r\n  width: var(--icon-size-block);\r\n  height: var(--icon-size-block);\r\n  margin-right: var(--block-gap);\r\n  border-radius: var(--half-size);\r\n  border: var(--border);\r\n  border-color: var(--basic-color);\r\n}\r\n\r\n.extended__multiselect-marker-shape--selected {\r\n  border-color: var(--cancel);\r\n}\r\n\r\n.extended__multiselect-marker-shape-only {\r\n  width: var(--icon-size-block);\r\n  height: var(--icon-size-block);\r\n  margin-left: var(--block-gap);\r\n  border: var(--border);\r\n  border-color: transparent;\r\n}\r\n\r\n.extended__multiselect-container\r\n  + .extended__multiselect-options--marker\r\n  > span:not([id^=\"option-label\"]),\r\n.extended__multiselect-container\r\n  + .extended__multiselect-options--marker\r\n  > .extended__multiselect-option-create {\r\n  padding-left: 30px;\r\n}\r\n\r\n.extended__multiselect-options_option--disabled {\r\n  background-color: var(--disabled);\r\n  user-select: none;\r\n  cursor: var(--default-cursor);\r\n}\r\n\r\n.extended__multiselect_deselect-block-icon {\r\n  width: var(--icon-size-block);\r\n  height: var(--icon-size-block);\r\n}\r\n\r\n.extended__multiselect-block--multiple > div {\r\n  display: flex;\r\n  flex-flow: row wrap;\r\n  gap: var(--outer-gap);\r\n}\r\n\r\n.extended__multiselect-block_cancel-wrapper,\r\n.extended__multiselect-block_cancel-wrapper--loading {\r\n  border: var(--border);\r\n  border-color: transparent;\r\n  display: flex;\r\n  flex-flow: row nowrap;\r\n  align-items: center;\r\n  padding: var(--block-cancel-padding);\r\n}\r\n\r\n.extended__multiselect-block_cancel-wrapper:active {\r\n  border-color: var(--cancel);\r\n  border-radius: var(--border-radius-small);\r\n  background-color: var(--cancel-backgound-color);\r\n}\r\n\r\n.extended__multiselect-increaser {\r\n  border: var(--border);\r\n  border-color: transparent;\r\n  padding: var(--increaser-padding);\r\n}\r\n\r\n.extended__multiselect-placeholder {\r\n  color: var(--placeholder);\r\n  min-height: var(--min-block-height);\r\n  display: flex;\r\n  flex-flow: row nowrap;\r\n  align-items: center;\r\n  margin-left: 2px;\r\n}\r\n</style>\r\n","import { reactive, readonly } from \"vue\";\n\nexport default function useSearchValue() {\n  /**\n   * @property {string|null} searchValue - value of search field\n   * @property {string|null} searchPattern - pattern of inner search for available options\n   */\n  const searchState = reactive({\n    searchValue: null,\n    searchPattern: null,\n  });\n\n  /**\n   * @function setSearchValue\n   * @param {string|null} value - new value of search field\n   */\n  const setSearchValue = (value) => {\n    searchState.searchValue = value;\n  };\n\n  /**\n   * @function setSearchPattern\n   * @param {string|null} pattern - new pattern of inner search for available options\n   */\n  const setSearchPattern = (pattern) => {\n    searchState.searchPattern = pattern;\n  };\n\n  return {\n    searchState: readonly(searchState),\n    setSearchValue,\n    setSearchPattern,\n  };\n}\n","import { ref } from \"vue\";\n\nimport LocalEmitter from \"../tools/LocalEmitter\";\n\nexport default function useEmitter() {\n  const emitter = ref(new LocalEmitter());\n\n  return { emitter };\n}\n","import { ref } from \"vue\";\n\nimport ExtendedClickOutside from \"extended-click-outside\";\n\nexport default function useClickOutside() {\n  const clickOutside = ref(new ExtendedClickOutside());\n\n  return { clickOutside };\n}\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n"],"names":["themeTypes","loaderThemeTypes","toggleIcons","iconFilters","iconSizes","createOptionTypes","specialKeysToBlock","toggleAppearenceSides","UnionPropType","String","Number","Boolean","Array","Object","Function","undefined","LocalEmitter","constructor","this","_eventsStack","payload","_eventsRegistered","emit","eventName","proxies","filter","event","length","forEach","proxy","on","callback","push","Proxy","set","target","localEmitter","useToggle","loading","disabled","emitter","toggleSlotClass","computed","value","readonly","toggleOptionsList","code","useCancel","showSearchField","selectedOptions","setSearchValue","setSearchPattern","cancel","deselectedOptions","index","clearAll","useLabels","label","createCustomOptionLabel","emptyObjectsPlaceholder","optionCreateLabel","option","customOptionLabel","isArray","join","toString","keys","getOwnPropertyNames","includes","JSON","stringify","usePreselectedOptions","showInsertWarnings","createLabel","isObjectOrArray","createdLabel","optionTypeRestrictor","isObjectArrayInstance","getPrototypeOf","name","isAnyInstance","isSymbol","console","warn","useSizes","iconSize","iconSizeClass","basicIconSize","getCurrentInstance","type","__name","style","version","viewBox","xmlns","_openBlock","_createElementBlock","_hoisted_1","_cache","_createElementVNode","d","props","__props","loaderIconFilter","inject","toRefs","iconFilterClass","basicFilter","_createVNode","LoaderIcon","class","_normalizeClass","_unref","width","height","x","y","id","out","in2","operator","tabindex","classes","increasedTabindex","role","onClick","args","onKeypress","_createBlock","ExtendedMultiselectLoader","CancelIcon","Debounce","timer","_localTimeout","_callback","_timer","start","clearTimeout","setTimeout","increaseDisplayBy","showDeselectIconLoader","multipleBlocksLimit","themeType","toggleMultipleBlocksLimit","optionsLimitIncreaser","ref","increaserClass","basicClassName","deselectClasses","limitRestriction","_","optionIncreaserAvailable","optionsLimitAchieved","overLimitOptionsCount","showLoaderIcon","watch","deep","deselectBlock","showMoreOptions","onBeforeMount","_hoisted_2","_toDisplayString","appropriatePlaceholder","_renderSlot","_ctx","$slots","_Fragment","_renderList","key","_withModifiers","$event","iconFilter","_createTextVNode","multipleBlocksLimitMessage","searchState","toRef","DebounceConstructor","blurSkip","searchFieldFocused","optionWillBeTriggered","searchFieldPreserving","searchPlaceholderPreserving","searchValue","singleLabel","blurSkipByToggleIcon","blurSkipByBlock","searchDebounce","searchPattern","RegExp","externalOptionsLoader","extendedInput","autoSelectSearchValue","createOnTheGo","createOptionPlaceholder","multiple","placeholder","searchFilterActive","toggleOptionsBySelect","togglingSavesSearchValue","attrs","useAttrs","hintBlockShown","multipleBlocksMargin","searchFieldForwarding","marginTop","placeholderBlockShown","searchFieldClass","mainClass","searchFieldClasses","prevState","state","pattern","expand","rollUp","rollupIfSelected","search","internalRollup","triggerState","preserveState","onMounted","nextTick","focus","accesskey","autocomplete","inputId","spellcheck","translate","onBlur","onFocus","onInput","labelBlockValue","_hoisted_3","ExtendedMultiselectMultiple","multipleBlocks","_withCtx","optionBlock","maxElements","fn","_hoisted_4","_hoisted_5","_hoisted_6","fieldWasShown","atopWithScroll","enterIndex","heightFromMounted","reactive","underWithScroll","optionsWrapper","anyOptionWrapperBlockHeight","autoSelectCreatedOption","chosenToggleAppearanceSide","clearBySelectWhenMultiple","createOptionFields","createOptionType","disableByField","disabledPrimitiveOptionsConverted","highlightOptions","searchByField","maxOptionsCount","minOptionsCount","options","optionsPadding","restrictedOptions","selectedOptionsShown","showMarker","specialKeysBlock","toggleMaxHeight","toggleMinHeight","availableOptions","filteredOptions","availableOptionType","lookForSimpleOptions","lookForObjectOptions","finalOptionsList","filterBySearchPattern","theme","emptyOptionsList","emptySearchResult","heightFromProps","heightRecord","defineProperty","enumerable","errorMessage","maxOptionsWereSelected","minOptionsWereNotSelected","optionHeightByProps","padding","paddingTop","paddingLeft","paddingBottom","paddingRight","assign","showCreateNewOptionBlock","styles","createNewOption","newOption","createObjectOption","unshift","selectOption","field","writable","configurable","defineDisabledOption","convertedOption","optionsList","test","internalSearchResult","calculatedOptionLabel","find","selectedOption","calculatedSelectedOptionLabel","compareWithSelected","emptyObject","markerShapeClass","optionCreateRole","optionIsDisabled","optionHighlightClasses","clickEvent","keyboardEvent","altKeyBlock","ctrlKeyBlock","shiftKeyBlock","altKey","ctrlKey","shiftKey","keyBlocker","classList","contains","findIndex","skipNextRemoval","selectOptionEmitter","setEnterIndex","getAttribute","showCurrentMarker","triggerOptionBeforeSelection","ResizeObserver","afterLoading","offsetHeight","scrollHeight","borderTopRightRadius","top","borderBottomRightRadius","calculateTopOffset","observe","onMousedown","onMouseenter","selected","fill","dropdownActive","toggleIcon","classesSummary","iconFilterRotationClass","icon","BaseArrowIcon","DoubleArrowIcon","WideArrowIcon","CircleArrowIcon","InnerArrowIcon","TriangleArrowIcon","TriangleCircleArrowIcon","_resolveDynamicComponent","__emit","selectedOptionsWatcher","rawOptions","togglePattern","extendedMultiselect","extendedMultiselectToggle","extendedMultiselectWrapper","extendedMultiselectOptions","defaultExpanded","dropdownDisabled","disabledPrimitiveOptions","errorBorderColor","modelValue","optionsCountRestriction","preselectedOption","preselectedOptions","resetSearchByValue","simpleEvents","showClearIcon","toggleAppearanceSide","wrongCurrentValue","useSearchValue","provide","clickOutside","ExtendedClickOutside","slots","useSlots","localClassList","clear","map","disabledOption","displayWrongValue","borderColor","expanded","borderStyles","borderTopLeftRadius","borderBottomLeftRadius","internalLoading","mappedOptions","restrictedOption","roledescription","tabindexIfSearch","wrapperClasses","prevValue","toRaw","setPreselectedOptionsByModelValue","activeEmitter","eventData","closeEmitter","createEventFields","fieldName","eventFields","fieldFocus","mouseEvent","toggleOptionsRestrictor","customFilteredCancel","toggleCustomRestrictor","customFilteredSelf","filteredHasCancel","toggleDetector","filteredHasToggle","loadOptionsByExternalLoader","initialValue","then","setPreselectedOptionsByConditions","removeSelectedOptions","single","modelValueMapped","resetEnterIndex","selectByEnter","setPreselectedOption","restriction","mappedSelectedOptions","setPreselectedOptions","async","allOptionsWereSelected","withRemoval","updateModelValue","initialLength","toggleAppearanceRestrictorActivate","window","$el","innerHeight","getBoundingClientRect","toggleAppearanceRestrictor","blockType","eventTarget","customToggle","children","parentNode","mode","prototype","call","className","e","toggleRestrictor","targetContentBlock","generalRestriction","filteredCustomSelf","filteredHasBlock","filteredHasSlot","filteredSelf","toggleBlockRestrictor","deselectedOption","splice","createdOption","limit","init","instanceRef","__expose","onKeyup","onMouseleave","_normalizeStyle","ExtendedMultiselectInput","ExtendedMultiselectToggle","ExtendedMultiselectCancel","_Transition","ExtendedMultiselectOptions","css","insertAt","document","head","getElementsByTagName","createElement","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode"],"mappings":"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","x_google_ignoreList":[29]}