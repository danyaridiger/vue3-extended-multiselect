{"version":3,"file":"index.umd.js","sources":["../src/sets/sets.js","../src/tools/LocalEmitter.js","../src/tools/instance.js","../src/composition/toggle.js","../src/composition/cancel.js","../src/composition/labels.js","../src/composition/preselected-options.js","../src/composition/sizes.js","../src/icons/LoaderIcon.vue?vue&type=template&id=e755968c&lang.js","../src/components/ExtendedMultiselectLoader.vue","../src/icons/CancelIcon.vue?vue&type=template&id=343647be&lang.js","../src/components/ExtendedMultiselectCancel.vue","../src/tools/Debounce.js","../src/components/ExtendedMultiselectMultiple.vue","../src/components/ExtendedMultiselectInput.vue","../src/composition/debounce.js","../src/components/ExtendedMultiselectOptions.vue","../src/icons/BaseArrowIcon.vue?vue&type=template&id=a4a66c9a&lang.js","../src/icons/CircleArrowIcon.vue?vue&type=template&id=df1340d8&lang.js","../src/icons/DoubleArrowIcon.vue?vue&type=template&id=09f7ca33&lang.js","../src/icons/InnerArrowIcon.vue?vue&type=template&id=6b2f14fa&lang.js","../src/icons/TriangleCircleArrowIcon.vue?vue&type=template&id=907bb328&lang.js","../src/icons/WideArrowIcon.vue?vue&type=template&id=144fb4f1&lang.js","../src/icons/TriangleArrowIcon.vue?vue&type=template&id=b8157a48&lang.js","../src/components/ExtendedMultiselectToggle.vue","../src/components/Vue3ExtendedMultiselect.vue","../src/composition/search-value.js","../src/composition/emitter.js","../src/composition/click-outside.js","../node_modules/style-inject/dist/style-inject.es.js"],"sourcesContent":["/**\r\n * Set of background- and border- style variants\r\n * @constant {Array} themeTypes\r\n */\r\nexport const themeTypes = [\"basic\", \"slate-grey\", \"slate-blue\", \"teal\", \"strict\"];\r\n\r\n/**\r\n * Set of color-style variants for loader\r\n * @constant {Array} loaderThemeTypes\r\n */\r\nexport const loaderThemeTypes = [\"loader-default\", ...themeTypes];\r\n\r\n/**\r\n * Set of icon filenames\r\n * @constant {Array} toggleIcons\r\n */\r\nexport const toggleIcons = [\r\n  \"base-arrow\",\r\n  \"double-arrow\",\r\n  \"wide-arrow\",\r\n  \"circle-arrow\",\r\n  \"inner-arrow\",\r\n  \"triangle-arrow\",\r\n  \"triangle-circle-arrow\",\r\n];\r\n\r\n/**\r\n * Set of icon colors filtered by svg\r\n * @constant {Array} iconFilters\r\n */\r\nexport const iconFilters = [\"basic\", \"black\", \"green\"];\r\n\r\n/**\r\n * Set of icons sizes filtered by css\r\n * @constant {Array} iconSizes\r\n */\r\nexport const iconSizes = [\"large\", \"medium\", \"small\"];\r\n\r\n/**\r\n * Set of types for options created by user\r\n * @constant {Array} createOptionTypes\r\n */\r\nexport const createOptionTypes = [\"primitive\", \"array\", \"object\"];\r\n\r\n/**\r\n * Set of keys to combine with cliks on options list and blocking choice\r\n * @constant {Array} specialKeysToBlock\r\n */\r\nexport const specialKeysToBlock = [\"alt\", \"ctrl\", \"shift\"];\r\n\r\n/**\r\n * Set of appearance variants of options list\r\n * @constant {Array} toggleAppearenceSides\r\n */\r\nexport const toggleAppearenceSides = [\"auto\", \"atop\", \"under\"];\r\n\r\n/**\r\n * Set of available types for options\r\n * @constant {Array} UnionPropType\r\n * @typedef {(string|number|boolean|Array|Object|Function|null|undefined)} UnionPropType\r\n */\r\nexport const UnionPropType = [\r\n  String,\r\n  Number,\r\n  Boolean,\r\n  Array,\r\n  Object,\r\n  Function,\r\n  null,\r\n  undefined,\r\n];\r\n","/**\r\n * Event emitter\r\n * @class\r\n */\r\n\r\nclass LocalEmitter {\r\n  _eventsStack = {\r\n    payload: null,\r\n  };\r\n  _eventsRegistered = [];\r\n\r\n  /**\r\n   * Triggers some event with given name\r\n   * @method\r\n   * @param {string} eventName - name of event\r\n   * @param {} payload - data of event\r\n   */\r\n  emit(eventName, payload = null) {\r\n    const proxies = this._eventsRegistered.filter(\r\n      (event) => event.eventName === eventName,\r\n    );\r\n\r\n    if (!proxies.length) return;\r\n\r\n    proxies.forEach((proxy) => {\r\n      this._eventsStack.payload = payload;\r\n      proxy.proxy.payload = payload;\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Registers an event listener with the given name\r\n   * @method\r\n   * @param {string} eventName - name of event\r\n   * @param {Function} callback - function to fire due to event\r\n   */\r\n  on(eventName, callback) {\r\n    this._eventsRegistered.push({\r\n      eventName,\r\n      proxy: new Proxy(this._eventsStack, {\r\n        set(target) {\r\n          callback(target.payload);\r\n\r\n          return target;\r\n        },\r\n      }),\r\n    });\r\n  }\r\n}\r\n\r\nexport default LocalEmitter;\r\n","import LocalEmitter from \"../tools/LocalEmitter\";\r\n\r\nexport default new LocalEmitter();\r\n","import { computed, readonly } from \"vue\";\r\n\r\nexport default function useToggle(loading, disabled, emitter) {\r\n  /**\r\n   * Toggles classes of slots if \"loading\"\r\n   * or \"disabled\" props equals true\r\n   * @function\r\n   * @returns {string} class\r\n   */\r\n  const toggleSlotClass = computed(() => {\r\n    return loading.value || disabled.value\r\n      ? \"extended__multiselect-toggle--disabled\"\r\n      : \"extended__multiselect-toggle\";\r\n  });\r\n\r\n  /**\r\n   * Emits an event which listeners will toggle options list\r\n   * @function\r\n   * @emits extended:toggle-options\r\n   * @param {MouseEvent|KeyboardEvent} event - MouseEvent or KeyboardEvent instance\r\n   */\r\n  const toggleOptionsList = (event) => {\r\n    if (event && event.code === \"Tab\") return;\r\n\r\n    emitter.value.emit(\"extended:toggle-options\");\r\n  };\r\n\r\n  return {\r\n    toggleSlotClass: readonly(toggleSlotClass),\r\n    toggleOptionsList,\r\n  };\r\n}\r\n","export default function useCancel(\r\n  disabled,\r\n  loading,\r\n  showSearchField,\r\n  selectedOptions,\r\n  emitter,\r\n  setSearchValue,\r\n  setSearchPattern,\r\n) {\r\n  /**\r\n   * Removes all selected options or single selected option\r\n   * when \"multiple\" prop equals false\r\n   * @function\r\n   * @emits extended:skip-block-blur-zeroing\r\n   * @emits extended:deselect-option\r\n   * @emits extended:clean-options\r\n   */\r\n  const cancel = () => {\r\n    if (disabled.value || loading.value) return;\r\n\r\n    const deselectedOptions = selectedOptions.value;\r\n\r\n    emitter.value.emit(\"extended:skip-block-blur-zeroing\");\r\n    emitter.value.emit(\"extended:deselect-option\", {\r\n      index: null,\r\n      clearAll: true,\r\n      deselectedOptions,\r\n    });\r\n\r\n    if (!showSearchField.value) return;\r\n\r\n    emitter.value.emit(\"extended:clean-options\");\r\n\r\n    setSearchValue(null);\r\n    setSearchPattern(null);\r\n  };\r\n\r\n  return { cancel };\r\n}\r\n","export default function useLabels(\r\n  label,\r\n  createCustomOptionLabel,\r\n  emptyObjectsPlaceholder,\r\n) {\r\n  /**\r\n   * Creates label of any kind of option\r\n   * @function\r\n   * @param {string} label - label field in options of type \"object\"\r\n   * @param {option} UnionPropType\r\n   * @returns {string} label\r\n   */\r\n  const optionCreateLabel = (option) => {\r\n    const isFunction = typeof option === \"function\";\r\n\r\n    if (!option && isFunction) return \"\";\r\n\r\n    const customOptionLabel = createCustomOptionLabel.value(option);\r\n\r\n    if (customOptionLabel) return customOptionLabel;\r\n\r\n    if (Array.isArray(option) && option.length > 0) {\r\n      return option.join(\", \");\r\n    }\r\n\r\n    if (typeof option !== \"object\") return option.toString();\r\n\r\n    if (Object.keys(option).length === 0) {\r\n      return emptyObjectsPlaceholder.value;\r\n    }\r\n\r\n    const hasLabel = Object.getOwnPropertyNames(option).includes(label.value);\r\n\r\n    if (hasLabel) {\r\n      return option[label.value] && typeof option[label.value] === \"object\"\r\n        ? JSON.stringify(option[label.value])\r\n        : option[label.value];\r\n    }\r\n\r\n    return \"\";\r\n  };\r\n\r\n  return { optionCreateLabel };\r\n}\r\n","export default function usePreselectedOptions(\r\n  label,\r\n  emptyObjectsPlaceholder,\r\n  showInsertWarnings,\r\n) {\r\n  /**\r\n   * Creates string label for any kind of option\r\n   * @function\r\n   * @param {string} label - label field in options of type \"object\"\r\n   * @param {boolean} isObjectOrArray - determines whether option is of type \"object\" or instance of Array\r\n   * @param {UnionPropType} option - option which needs label\r\n   * @returns {string} label\r\n   */\r\n  const createLabel = (isObjectOrArray, option) => {\r\n    let createdLabel;\r\n\r\n    if (isObjectOrArray) {\r\n      if (Array.isArray(option) && option.length > 0) {\r\n        createdLabel = option.join(\", \");\r\n      } else {\r\n        createdLabel =\r\n          option[label.value] && typeof option[label.value] === \"object\"\r\n            ? JSON.stringify(option[label.value])\r\n            : option[label.value];\r\n      }\r\n\r\n      if (Object.keys(option).length === 0) {\r\n        createdLabel = emptyObjectsPlaceholder.value;\r\n      }\r\n    } else {\r\n      createdLabel = option.toString();\r\n    }\r\n\r\n    return createdLabel;\r\n  };\r\n\r\n  /**\r\n   * Restricts wrong types of options in options list\r\n   * @method\r\n   * @param {UnionPropType} option - option to restrict\r\n   * @returns {boolean} restriction\r\n   */\r\n  const optionTypeRestrictor = (option) => {\r\n    if (!option) return false;\r\n\r\n    const isObjectArrayInstance =\r\n      Object.getPrototypeOf(option).constructor.name !== \"Object\" &&\r\n      Object.getPrototypeOf(option).constructor.name !== \"Array\";\r\n    const isAnyInstance = option && typeof option === \"object\" && isObjectArrayInstance;\r\n    const isSymbol = typeof option === \"symbol\";\r\n\r\n    if (isSymbol && showInsertWarnings.value) {\r\n      console.warn(\"vue-extended-multiselect: option can not be of type «symbol»\");\r\n    }\r\n\r\n    if (isAnyInstance && showInsertWarnings.value) {\r\n      console.warn(\r\n        \"vue-extended-multiselect: option can not be an instance of any constructor function\",\r\n      );\r\n    }\r\n\r\n    if (isSymbol || isAnyInstance) return false;\r\n\r\n    return true;\r\n  };\r\n\r\n  return {\r\n    createLabel,\r\n    optionTypeRestrictor,\r\n  };\r\n}\r\n","import { computed, getCurrentInstance, readonly } from \"vue\";\r\n\r\nexport default function useSizes(iconSize) {\r\n  /**\r\n   * Defines classes for each kind of icon\r\n   * @function\r\n   * @returns {string} class\r\n   */\r\n  const iconSizeClass = computed(() => {\r\n    let basicIconSize = \"extended__multiselect\";\r\n\r\n    switch (getCurrentInstance().type.__name) {\r\n      case \"ExtendedMultiselectLoader\":\r\n        basicIconSize += \"-loader_icon\";\r\n        break;\r\n      case \"ExtendedMultiselectToggle\":\r\n        basicIconSize += \"-toggle_icon\";\r\n        break;\r\n      case \"ExtendedMultiselectCancel\":\r\n        basicIconSize += \"-cancel_icon\";\r\n        break;\r\n      default:\r\n        basicIconSize += \"-toggle_icon\";\r\n    }\r\n\r\n    switch (iconSize.value) {\r\n      case \"large\":\r\n        return `${basicIconSize}-large`;\r\n      case \"medium\":\r\n        return `${basicIconSize}-medium`;\r\n      case \"small\":\r\n        return `${basicIconSize}-small`;\r\n      case \"deselect\":\r\n        return `${basicIconSize}-deselect`;\r\n      default:\r\n        return `${basicIconSize}-large`;\r\n    }\r\n  });\r\n\r\n  return { iconSizeClass: readonly(iconSizeClass) };\r\n}\r\n","<template>\r\n  <svg\r\n    style=\"enable-background: new 0 0 128 128\"\r\n    version=\"1.1\"\r\n    viewBox=\"0 0 128 128\"\r\n    xml:space=\"preserve\"\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n    xmlns:xlink=\"http://www.w3.org/1999/xlink\"\r\n  >\r\n    <g>\r\n      <path\r\n        d=\"M96.1,103.6c-10.4,8.4-23.5,12.4-36.8,11.1c-10.5-1-20.3-5.1-28.2-11.8H44v-8H18v26h8v-11.9c9.1,7.7,20.4,12.5,32.6,13.6   c1.9,0.2,3.7,0.3,5.5,0.3c13.5,0,26.5-4.6,37-13.2c19.1-15.4,26.6-40.5,19.1-63.9l-7.6,2.4C119,68.6,112.6,90.3,96.1,103.6z\"\r\n      />\r\n      <path\r\n        d=\"M103,19.7c-21.2-18.7-53.5-20-76.1-1.6C7.9,33.5,0.4,58.4,7.7,81.7l7.6-2.4C9,59.2,15.5,37.6,31.9,24.4   C51.6,8.4,79.7,9.6,98,26H85v8h26V8h-8V19.7z\"\r\n      />\r\n    </g>\r\n  </svg>\r\n</template>\r\n","<template>\r\n  <div class=\"extended__multiselect-loader\">\r\n    <loader-icon\r\n      :class=\"[iconFilterClass, iconSizeClass, 'extended__multiselect-loader-animate']\"\r\n    />\r\n    <svg\r\n      version=\"1.1\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      xmlns:xlink=\"http://www.w3.org/1999/xlink\"\r\n      width=\"0\"\r\n      height=\"0\"\r\n    >\r\n      <defs>\r\n        <filter x=\"0\" y=\"0\" width=\"1\" height=\"1\" id=\"filterLoaderDefault\">\r\n          <feFlood flood-color=\"#00BFFF\" />\r\n          <feComposite out=\"SourceGraphic\" in2=\"SourceGraphic\" operator=\"in\" />\r\n        </filter>\r\n        <filter x=\"0\" y=\"0\" width=\"1\" height=\"1\" id=\"filterLoaderBasic\">\r\n          <feFlood flood-color=\"#708090\" />\r\n          <feComposite out=\"SourceGraphic\" in2=\"SourceGraphic\" operator=\"in\" />\r\n        </filter>\r\n        <filter x=\"0\" y=\"0\" width=\"1\" height=\"1\" id=\"filterLoaderSlateGrey\">\r\n          <feFlood flood-color=\"#2F4F4F\" />\r\n          <feComposite out=\"SourceGraphic\" in2=\"SourceGraphic\" operator=\"in\" />\r\n        </filter>\r\n        <filter x=\"0\" y=\"0\" width=\"1\" height=\"1\" id=\"filterLoaderSlateBlue\">\r\n          <feFlood flood-color=\"#483D8B\" />\r\n          <feComposite out=\"SourceGraphic\" in2=\"SourceGraphic\" operator=\"in\" />\r\n        </filter>\r\n        <filter x=\"0\" y=\"0\" width=\"1\" height=\"1\" id=\"filterLoaderTeal\">\r\n          <feFlood flood-color=\"#008080\" />\r\n          <feComposite out=\"SourceGraphic\" in2=\"SourceGraphic\" operator=\"in\" />\r\n        </filter>\r\n        <filter x=\"0\" y=\"0\" width=\"1\" height=\"1\" id=\"filterLoaderStrict\">\r\n          <feFlood flood-color=\"#00BFFF\" />\r\n          <feComposite out=\"SourceGraphic\" in2=\"SourceGraphic\" operator=\"in\" />\r\n        </filter>\r\n      </defs>\r\n    </svg>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { computed, defineProps, inject, toRefs } from \"vue\";\r\n\r\nimport useSizes from \"../composition/sizes\";\r\n\r\nimport LoaderIcon from \"../icons/LoaderIcon.vue\";\r\n\r\nconst props = defineProps({\r\n  /**\r\n   * Provides size to create special size-class\r\n   * for each kind of icon\r\n   * @property {string} iconSize\r\n   */\r\n  iconSize: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n});\r\n\r\nconst loaderIconFilter = inject(\"loaderIconFilter\");\r\n\r\nconst { iconSize } = toRefs(props);\r\n\r\nconst { iconSizeClass } = useSizes(iconSize);\r\n\r\n/**\r\n * Defines class for loader icon\r\n * depends on injected filter name\r\n * @function\r\n * @returns {string} class\r\n */\r\nconst iconFilterClass = computed(() => {\r\n  let basicFilter = \"extended__multiselect-loader\";\r\n\r\n  switch (loaderIconFilter) {\r\n    case \"default-loader\":\r\n      basicFilter = `${basicFilter}_default-loader`;\r\n      break;\r\n    case \"basic\":\r\n      basicFilter = `${basicFilter}_basic`;\r\n      break;\r\n    case \"slate-grey\":\r\n      basicFilter = `${basicFilter}_slate-grey`;\r\n      break;\r\n    case \"slate-blue\":\r\n      basicFilter = `${basicFilter}_slate-blue`;\r\n      break;\r\n    case \"teal\":\r\n      basicFilter = `${basicFilter}_teal`;\r\n      break;\r\n    case \"strict\":\r\n      basicFilter = `${basicFilter}_strict`;\r\n      break;\r\n    default:\r\n      basicFilter = `${basicFilter}_default-loader`;\r\n  }\r\n\r\n  return basicFilter;\r\n});\r\n</script>\r\n","<template>\r\n  <svg\r\n    style=\"enable-background: new 0 0 35.999 36.005\"\r\n    version=\"1.1\"\r\n    viewBox=\"0 0 35.505 36.005\"\r\n    xml:space=\"preserve\"\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n    xmlns:xlink=\"http://www.w3.org/1999/xlink\"\r\n  >\r\n    <g>\r\n      <g>\r\n        <g>\r\n          <path\r\n            d=\"M0,0v36.005h35.999V0H0z\"\r\n            marker-end=\"none\"\r\n            marker-start=\"none\"\r\n            style=\"fill: none\"\r\n          />\r\n          <g>\r\n            <defs>\r\n              <rect height=\"36.005\" width=\"35.999\" y=\"0\" />\r\n            </defs>\r\n            <clipPath>\r\n              <use style=\"overflow: visible\" xlink:href=\"#SVGID_1_\" />\r\n            </clipPath>\r\n            <g style=\"clip-path: url(#SVGID_2_)\">\r\n              <g>\r\n                <path\r\n                  d=\"M2.995,4.799v26.403c0,0.995,0.805,1.8,1.799,1.8        h26.405c0.995,0,1.8-0.805,1.8-1.8V4.799c0-0.994-0.805-1.799-1.8-1.799H4.794C3.8,3,2.995,3.805,2.995,4.799z\"\r\n                  marker-end=\"none\"\r\n                  marker-start=\"none\"\r\n                  style=\"fill: #990e0d\"\r\n                />\r\n                <linearGradient\r\n                  gradientTransform=\"matrix(1 0 0 1 167.998 491.77)\"\r\n                  gradientUnits=\"userSpaceOnUse\"\r\n                  x1=\"-150.3105\"\r\n                  x2=\"-149.2125\"\r\n                  y1=\"-461.7169\"\r\n                  y2=\"-504.473\"\r\n                >\r\n                  <stop offset=\"0\" style=\"stop-color: #df1413\" />\r\n                  <stop offset=\"1\" style=\"stop-color: #990e0d\" />\r\n                </linearGradient>\r\n                <path\r\n                  d=\"M3.745,31.202V4.799        c0-0.579,0.469-1.049,1.049-1.049h26.405c0.581,0,1.05,0.47,1.05,1.049v26.403c0,0.581-0.47,1.05-1.05,1.05H4.794        C4.214,32.252,3.745,31.784,3.745,31.202z\"\r\n                  marker-end=\"none\"\r\n                  marker-start=\"none\"\r\n                  style=\"fill: url(#SVGID_3_)\"\r\n                />\r\n              </g>\r\n              <g>\r\n                <path\r\n                  d=\"M9.961,8.892        l16.073,16.072\"\r\n                  style=\"\r\n                    fill: none;\r\n                    stroke: #990e0d;\r\n                    stroke-width: 4.287;\r\n                    stroke-linejoin: round;\r\n                    stroke-miterlimit: 79.8403;\r\n                  \"\r\n                />\r\n                <path\r\n                  d=\"        M26.034,8.892L9.961,24.964\"\r\n                  style=\"\r\n                    fill: none;\r\n                    stroke: #990e0d;\r\n                    stroke-width: 4.287;\r\n                    stroke-linejoin: round;\r\n                    stroke-miterlimit: 79.8403;\r\n                  \"\r\n                />\r\n              </g>\r\n              <g>\r\n                <path\r\n                  d=\"M9.961,9.964        l16.073,16.073\"\r\n                  style=\"\r\n                    fill: none;\r\n                    stroke: #ffffff;\r\n                    stroke-width: 4.287;\r\n                    stroke-linejoin: round;\r\n                    stroke-miterlimit: 79.8403;\r\n                  \"\r\n                />\r\n                <path\r\n                  d=\"        M26.034,9.964L9.961,26.037\"\r\n                  style=\"\r\n                    fill: none;\r\n                    stroke: #ffffff;\r\n                    stroke-width: 4.287;\r\n                    stroke-linejoin: round;\r\n                    stroke-miterlimit: 79.8403;\r\n                  \"\r\n                />\r\n              </g>\r\n            </g>\r\n          </g>\r\n        </g>\r\n      </g>\r\n    </g>\r\n    <g />\r\n  </svg>\r\n</template>\r\n","<template>\r\n  <div\r\n    aria-label=\"Clear options list\"\r\n    role=\"button\"\r\n    :class=\"classes\"\r\n    :tabindex=\"increasedTabindex\"\r\n    @click=\"cancel\"\r\n    @keypress.stop=\"cancel\"\r\n  >\r\n    <cancel-icon v-if=\"!loading\" :class=\"iconSizeClass\" />\r\n    <extended-multiselect-loader\r\n      v-else\r\n      :icon-filter=\"loaderIconFilter\"\r\n      :icon-size=\"iconSize\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { computed, defineProps, inject, toRefs } from \"vue\";\r\n\r\nimport useCancel from \"../composition/cancel\";\r\nimport useSizes from \"../composition/sizes\";\r\n\r\nimport ExtendedMultiselectLoader from \"./ExtendedMultiselectLoader.vue\";\r\nimport CancelIcon from \"../icons/CancelIcon.vue\";\r\n\r\nconst props = defineProps({\r\n  /**\r\n   * Blocks cancel button\r\n   * @property {boolean} disabled\r\n   */\r\n  disabled: {\r\n    type: Boolean,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Defines a svg-filter for loader icons\r\n   * @property {string} loaderIconFilter\r\n   */\r\n  loaderIconFilter: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Provides size to create special size-class\r\n   * for each kind of icon\r\n   * @property {string} iconSize\r\n   */\r\n  iconSize: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Replaces cancel button with loader\r\n   * @property {boolean} loading\r\n   */\r\n  loading: {\r\n    type: Boolean,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Determines whether to clear current value of search field\r\n   * @property {boolean} showSearchField\r\n   */\r\n  showSearchField: {\r\n    type: Boolean,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Defines \"tabindex\" attribute of cancel button\r\n   * @default null\r\n   * @property {number|null} tabindex\r\n   */\r\n  tabindex: {\r\n    type: Number,\r\n    default: null,\r\n  },\r\n\r\n  /**\r\n   * List of selected options\r\n   * @property {Array} selectedOptions\r\n   */\r\n  selectedOptions: {\r\n    type: Array,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Reactive instance of LocalEmitter class\r\n   * @property {object} emitter\r\n   */\r\n  emitter: {\r\n    type: Object,\r\n    required: true,\r\n  },\r\n});\r\n\r\nconst setSearchValue = inject(\"setSearchValue\");\r\nconst setSearchPattern = inject(\"setSearchPattern\");\r\n\r\nconst {\r\n  disabled,\r\n  emitter,\r\n  loaderIconFilter,\r\n  iconSize,\r\n  loading,\r\n  selectedOptions,\r\n  showSearchField,\r\n  tabindex,\r\n} = toRefs(props);\r\n\r\nconst { cancel } = useCancel(\r\n  disabled,\r\n  loading,\r\n  showSearchField,\r\n  selectedOptions,\r\n  emitter,\r\n  setSearchValue,\r\n  setSearchPattern,\r\n);\r\nconst { iconSizeClass } = useSizes(iconSize);\r\n\r\n/**\r\n * Toggles classes of component if \"loading\"\r\n * or \"disabled\" props equals true\r\n * @function\r\n * @returns {string} class\r\n */\r\nconst classes = computed(() => {\r\n  return loading.value || disabled.value\r\n    ? \"extended__multiselect-cancel--disabled\"\r\n    : \"extended__multiselect-cancel\";\r\n});\r\n\r\n/**\r\n * Sets \"tabindex\" attibute of clear button based on\r\n * given tabindex\r\n * @function\r\n * @returns {number} tabindex\r\n */\r\nconst increasedTabindex = computed(() => {\r\n  return tabindex.value ? tabindex.value + 2 : 0;\r\n});\r\n</script>\r\n","/**\r\n * Debounce functions generator\r\n * @class\r\n */\r\nclass Debounce {\r\n  _localTimeout = null;\r\n  _callback = null;\r\n  _timer = 0;\r\n\r\n  /**\r\n   * Debounce constructor\r\n   * @constructor\r\n   * @param {Function} callback - debounce function\r\n   * @param {number} timer - milliseconds\r\n   */\r\n  constructor(callback, timer) {\r\n    this._callback = callback;\r\n    this._timer = timer;\r\n  }\r\n\r\n  /**\r\n   * Runs debounce function\r\n   * @method\r\n   */\r\n  start() {\r\n    if (this._localTimeout) {\r\n      clearTimeout(this._localTimeout);\r\n    }\r\n\r\n    this._localTimeout = setTimeout(() => {\r\n      this._callback();\r\n    }, this._timer);\r\n  }\r\n}\r\n\r\nexport default Debounce;\r\n","<template>\r\n  <div class=\"extended__multiselect-block extended__multiselect-block--multiple\">\r\n    <span v-if=\"placeholderBlockShown\" class=\"extended__multiselect-placeholder\">\r\n      {{ appropriatePlaceholder }}\r\n    </span>\r\n    <div>\r\n      <slot\r\n        name=\"multipleBlocks\"\r\n        :selected-options=\"limitRestriction\"\r\n        :deselect-block=\"deselectBlock\"\r\n      >\r\n        <div v-for=\"(option, index) in limitRestriction\" :key=\"index\">\r\n          <slot\r\n            name=\"optionBlock\"\r\n            :label=\"optionCreateLabel(option)\"\r\n            :index=\"index\"\r\n            :deselect-block=\"deselectBlock\"\r\n          >\r\n            <div :class=\"classes\">\r\n              <span>{{ optionCreateLabel(option) }}</span>\r\n              <div :class=\"deselectClasses\" @click.stop=\"deselectBlock(index)\">\r\n                <CancelIcon\r\n                  class=\"extended__multiselect_deselect-block-icon\"\r\n                  v-if=\"!showLoaderIcon\"\r\n                />\r\n                <extended-multiselect-loader\r\n                  v-else\r\n                  :icon-filter=\"iconFilter\"\r\n                  icon-size=\"deselect\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </slot>\r\n        </div>\r\n        <slot\r\n          name=\"maxElements\"\r\n          v-if=\"optionsLimitAchieved && !toggleMultipleBlocksLimit\"\r\n        >\r\n          {{ multipleBlocksLimitMessage(overLimitOptionsCount) }}\r\n        </slot>\r\n        <slot\r\n          name=\"showMore\"\r\n          v-if=\"optionIncreaserAvailable\"\r\n          :show-more-options=\"showMoreOptions\"\r\n        >\r\n          <div :class=\"[classes, increaserClass]\" @click.stop=\"showMoreOptions\">\r\n            Show more options\r\n          </div>\r\n        </slot>\r\n      </slot>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { computed, defineProps, onBeforeMount, ref, toRefs, watch } from \"vue\";\r\n\r\nimport useLabels from \"../composition/labels\";\r\n\r\nimport ExtendedMultiselectLoader from \"./ExtendedMultiselectLoader.vue\";\r\nimport CancelIcon from \"../icons/CancelIcon.vue\";\r\n\r\nconst props = defineProps({\r\n  /**\r\n   * Blocks deselect block button\r\n   * @property {boolean} disabled\r\n   */\r\n  disabled: {\r\n    type: Boolean,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Hides all deselect buttons if equals true\r\n   * @property {boolean} loading\r\n   */\r\n  loading: {\r\n    type: Boolean,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Determines whether to show extended multiselect\r\n   * placeholder element\r\n   * @property {boolean} placeholderBlockShown\r\n   */\r\n  placeholderBlockShown: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n\r\n  /**\r\n   * Determines whether to show loader icon in multiple\r\n   * options block if \"loading\" prop equals true\r\n   * @default true\r\n   * @property {boolean} showDeselectIconLoader\r\n   */\r\n  showDeselectIconLoader: {\r\n    type: Boolean,\r\n    default: true,\r\n  },\r\n\r\n  /**\r\n   * Allows to increase limit of displayed selected option blocks\r\n   * @property {boolean} toggleMultipleBlocksLimit\r\n   */\r\n  toggleMultipleBlocksLimit: {\r\n    type: Boolean,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Defines placeholder for extended multiselect\r\n   * placeholder element\r\n   * @property {string} appropriatePlaceholder\r\n   */\r\n  appropriatePlaceholder: {\r\n    type: String,\r\n    default: \"\",\r\n  },\r\n\r\n  /**\r\n   * Defines label for blocks with options of type \"object\"\r\n   * or Array instances which length/keys length equals 0\r\n   * @property {string} emptyObjectsPlaceholder\r\n   */\r\n  emptyObjectsPlaceholder: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Defines a svg-filter for icons\r\n   * @property {string} iconFilter\r\n   */\r\n  iconFilter: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Determines field of option which will be displayed as label\r\n   * @property {string} label\r\n   */\r\n  label: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Current theme of extended-multiselect\r\n   * used in class definition\r\n   * @property {string} themeType\r\n   */\r\n  themeType: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Limit of hidden options amount to be shown next\r\n   * @property {number} increaseDisplayBy\r\n   */\r\n  increaseDisplayBy: {\r\n    type: Number,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Limit of option blocks amount\r\n   * @property {number} multipleBlocksLimit\r\n   */\r\n  multipleBlocksLimit: {\r\n    type: Number,\r\n    default: null,\r\n  },\r\n\r\n  /**\r\n   * List of selected options that will be shown as option blocks\r\n   * @property {Array} selectedOptions\r\n   */\r\n  selectedOptions: {\r\n    type: Array,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Reactive instance of LocalEmitter class\r\n   * @property {object} emitter\r\n   */\r\n  emitter: {\r\n    type: Object,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Function that creates custom label for\r\n   * block with selected option\r\n   * @property {Function} createCustomOptionLabel\r\n   */\r\n  createCustomOptionLabel: {\r\n    type: Function,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Function that creates limit message for maximal of selected options\r\n   * @property {Function} multipleBlocksLimitMessage\r\n   */\r\n  multipleBlocksLimitMessage: {\r\n    type: Function,\r\n    required: true,\r\n  },\r\n});\r\n\r\nconst {\r\n  createCustomOptionLabel,\r\n  disabled,\r\n  emitter,\r\n  emptyObjectsPlaceholder,\r\n  label,\r\n  increaseDisplayBy,\r\n  loading,\r\n  showDeselectIconLoader,\r\n  multipleBlocksLimit,\r\n  selectedOptions,\r\n  themeType,\r\n  toggleMultipleBlocksLimit,\r\n} = toRefs(props);\r\n\r\nconst optionsLimitIncreaser = ref(null);\r\nconst increaserClass = ref(\"extended__multiselect-increaser\");\r\n\r\nconst { optionCreateLabel } = useLabels(\r\n  label,\r\n  createCustomOptionLabel,\r\n  emptyObjectsPlaceholder,\r\n);\r\n\r\n/**\r\n * Defines class for every selected option block\r\n * depends on current theme of extended multiselect\r\n * @function\r\n * @returns {string} class\r\n */\r\nconst classes = computed(() => {\r\n  const basicClassName = \"extended__multiselect--multiple\";\r\n\r\n  switch (themeType.value) {\r\n    case \"basic\":\r\n      return `${basicClassName}-basic`;\r\n    case \"slate-grey\":\r\n      return `${basicClassName}-slate-grey`;\r\n    case \"slate-blue\":\r\n      return `${basicClassName}-slate-blue`;\r\n    case \"teal\":\r\n      return `${basicClassName}-teal`;\r\n    case \"strict\":\r\n      return `${basicClassName}-strict`;\r\n    default:\r\n      return `${basicClassName}-basic`;\r\n  }\r\n});\r\n\r\n/**\r\n * Defines class for every deselect/loader icon in multiple\r\n * option blocks depends on \"loading\" prop\r\n * @function\r\n * @returns {string} class\r\n */\r\nconst deselectClasses = computed(() => {\r\n  return loading.value\r\n    ? \"extended__multiselect-block_cancel-wrapper--loading\"\r\n    : \"extended__multiselect-block_cancel-wrapper\";\r\n});\r\n\r\n/**\r\n * Defines current limited amount of displayed option blocks\r\n * @function\r\n * @returns {Array} UnionPropType\r\n */\r\nconst limitRestriction = computed(() => {\r\n  if (!optionsLimitIncreaser.value) return selectedOptions.value;\r\n\r\n  return selectedOptions.value.filter((_, index) => {\r\n    const limit =\r\n      typeof optionsLimitIncreaser.value === \"number\"\r\n        ? optionsLimitIncreaser.value\r\n        : optionsLimitIncreaser.value.value;\r\n\r\n    return ++index <= limit;\r\n  });\r\n});\r\n\r\n/**\r\n * Determines whether user can increase limited amount of displayed option blocks\r\n * @function\r\n * @returns {boolean} possibility\r\n */\r\nconst optionIncreaserAvailable = computed(() => {\r\n  return toggleMultipleBlocksLimit.value && optionsLimitAchieved.value;\r\n});\r\n\r\n/**\r\n * Determines whether current limit of displayed option blocks amount\r\n * was reached\r\n * @function\r\n * @returns {boolean} reaching\r\n */\r\nconst optionsLimitAchieved = computed(() => {\r\n  return (\r\n    optionsLimitIncreaser.value &&\r\n    selectedOptions.value.length > optionsLimitIncreaser.value\r\n  );\r\n});\r\n\r\n/**\r\n * Amount of selected options exceeding the limit\r\n * determined by \"multipleBlocksLimit\" prop\r\n * @function\r\n * @returns {number|null} amount\r\n */\r\nconst overLimitOptionsCount = computed(() => {\r\n  if (selectedOptions.value.length <= optionsLimitIncreaser.value) return null;\r\n\r\n  return selectedOptions.value.length - optionsLimitIncreaser.value;\r\n});\r\n\r\n/**\r\n * Determines whether to show loader icon if \"loading\" prop equals true\r\n * or show multiple option blocks as usual\r\n * @function\r\n * @returns {boolean} restriction\r\n */\r\nconst showLoaderIcon = computed(() => {\r\n  return showDeselectIconLoader.value ? loading.value : false;\r\n});\r\n\r\n/**\r\n * If limit of selected options was achieved restricts further\r\n * extension of options container if \"multiple\" prop equals true\r\n * @function\r\n * @param {Array} - array of selected options\r\n */\r\nwatch(\r\n  selectedOptions,\r\n  (value) => {\r\n    if (!value.length || value.length <= multipleBlocksLimit.value) {\r\n      optionsLimitIncreaser.value = multipleBlocksLimit.value;\r\n    }\r\n  },\r\n  { deep: true },\r\n);\r\n\r\n/**\r\n * Deselects option by users click on its element cancel icon\r\n * if \"multiple\" prop equals true\r\n * @function\r\n * @emits extended:deselect-option\r\n * @param {number} index - index of deselected option\r\n */\r\nconst deselectBlock = (index) => {\r\n  if (loading.value || disabled.value) return;\r\n\r\n  emitter.value.emit(\"extended:deselect-option\", { index });\r\n};\r\n\r\n/**\r\n * Shows next hidden options\r\n * This behavior restricts by \"toggleMultipleBlocksLimit\" prop\r\n * if \"multiple\" prop equals true\r\n * @function\r\n * @emits extended:increase-display\r\n */\r\nconst showMoreOptions = () => {\r\n  optionsLimitIncreaser.value += increaseDisplayBy.value;\r\n\r\n  emitter.value.emit(\"extended:increase-display\", optionsLimitIncreaser.value);\r\n};\r\n\r\n/**\r\n * \"onBeforeMount\" hook of ExtendedMultiselectMultiple component\r\n */\r\nonBeforeMount(() => {\r\n  optionsLimitIncreaser.value = multipleBlocksLimit.value;\r\n});\r\n</script>\r\n","<template>\r\n  <div v-if=\"showSearchField\">\r\n    <input\r\n      aria-controls=\"extended-search-field\"\r\n      ref=\"extendedInput\"\r\n      type=\"text\"\r\n      :accesskey=\"attrs.accesskey\"\r\n      :autocomplete=\"attrs.autocomplete\"\r\n      :class=\"searchFieldClass\"\r\n      :disabled=\"disabled\"\r\n      :id=\"inputId\"\r\n      :name=\"attrs.name\"\r\n      :placeholder=\"appropriatePlaceholder\"\r\n      :spellcheck=\"attrs.spellcheck\"\r\n      :tabindex=\"attrs.tabindex\"\r\n      :translate=\"attrs.translate\"\r\n      v-model=\"searchValue\"\r\n      @blur.prevent=\"rollUp\"\r\n      @focus.prevent=\"expand\"\r\n      @input=\"search\"\r\n    />\r\n    <div\r\n      class=\"extended__multiselect-block\"\r\n      v-show=\"!searchFieldForwarding && !multiple && !placeholderBlockShown\"\r\n      @click=\"expand\"\r\n    >\r\n      <slot name=\"labelBlock\" :label-block-value=\"singleLabel\">\r\n        <span>{{ singleLabel }}</span>\r\n      </slot>\r\n    </div>\r\n    <span v-if=\"placeholderBlockShown\" class=\"extended__multiselect-placeholder\">\r\n      {{ appropriatePlaceholder }}\r\n    </span>\r\n    <extended-multiselect-multiple\r\n      v-show=\"multiple && !!selectedOptions.length\"\r\n      :style=\"multipleBlocksMargin\"\r\n      :disabled=\"disabled\"\r\n      :loading=\"loading\"\r\n      :icon-filter=\"loaderIconFilter\"\r\n      :show-deselect-icon-loader=\"showDeselectIconLoader\"\r\n      :toggle-multiple-blocks-limit=\"toggleMultipleBlocksLimit\"\r\n      :empty-objects-placeholder=\"emptyObjectsPlaceholder\"\r\n      :label=\"label\"\r\n      :multiple-blocks-limit-message=\"multipleBlocksLimitMessage\"\r\n      :theme-type=\"themeType\"\r\n      :increase-display-by=\"increaseDisplayBy\"\r\n      :multipleBlocksLimit=\"multipleBlocksLimit\"\r\n      :selected-options=\"selectedOptions\"\r\n      :emitter=\"emitter\"\r\n      :create-custom-option-label=\"createCustomOptionLabel\"\r\n    >\r\n      <template #multipleBlocks=\"{ selectedOptions, deselectBlock }\">\r\n        <slot\r\n          name=\"multipleBlocks\"\r\n          :selected-options=\"selectedOptions\"\r\n          :deselect-block=\"deselectBlock\"\r\n        >\r\n        </slot>\r\n      </template>\r\n      <template #optionBlock=\"{ label, deselectBlock, index }\">\r\n        <slot\r\n          name=\"optionBlock\"\r\n          :label=\"label\"\r\n          :index=\"index\"\r\n          :deselect-block=\"deselectBlock\"\r\n        >\r\n        </slot>\r\n      </template>\r\n      <template #maxElements>\r\n        <slot name=\"maxElements\"></slot>\r\n      </template>\r\n      <template v-if=\"toggleMultipleBlocksLimit\" #showMore=\"{ showMoreOptions }\">\r\n        <slot name=\"showMore\" :show-more-options=\"showMoreOptions\"> </slot>\r\n      </template>\r\n    </extended-multiselect-multiple>\r\n  </div>\r\n  <div v-else-if=\"!showSearchField && multiple\">\r\n    <extended-multiselect-multiple\r\n      :disabled=\"disabled\"\r\n      :loading=\"loading\"\r\n      :icon-filter=\"loaderIconFilter\"\r\n      :placeholder-block-shown=\"!selectedOptions.length\"\r\n      :show-deselect-icon-loader=\"showDeselectIconLoader\"\r\n      :toggle-multiple-blocks-limit=\"toggleMultipleBlocksLimit\"\r\n      :appropriate-placeholder=\"appropriatePlaceholder\"\r\n      :empty-objects-placeholder=\"emptyObjectsPlaceholder\"\r\n      :label=\"label\"\r\n      :multiple-blocks-limit-message=\"multipleBlocksLimitMessage\"\r\n      :theme-type=\"themeType\"\r\n      :increase-display-by=\"increaseDisplayBy\"\r\n      :multipleBlocksLimit=\"multipleBlocksLimit\"\r\n      :selected-options=\"selectedOptions\"\r\n      :emitter=\"emitter\"\r\n      :create-custom-option-label=\"createCustomOptionLabel\"\r\n    >\r\n      <template #multipleBlocks=\"{ selectedOptions, deselectBlock }\">\r\n        <slot\r\n          name=\"multipleBlocks\"\r\n          :selected-options=\"selectedOptions\"\r\n          :deselect-block=\"deselectBlock\"\r\n        >\r\n        </slot>\r\n      </template>\r\n      <template #optionBlock=\"{ label, deselectBlock, index }\">\r\n        <slot\r\n          name=\"optionBlock\"\r\n          :label=\"label\"\r\n          :index=\"index\"\r\n          :deselect-block=\"deselectBlock\"\r\n        >\r\n        </slot>\r\n      </template>\r\n      <template v-if=\"toggleMultipleBlocksLimit\" #showMore=\"{ showMoreOptions }\">\r\n        <slot name=\"showMore\" :show-more-options=\"showMoreOptions\"></slot>\r\n      </template>\r\n    </extended-multiselect-multiple>\r\n    <input\r\n      class=\"extended__multiselect-input--hidden\"\r\n      ref=\"extendedInput\"\r\n      type=\"text\"\r\n      @blur.prevent=\"rollUp\"\r\n      @focus.prevent=\"expand\"\r\n    />\r\n  </div>\r\n  <div class=\"extended__multiselect-block\" v-else>\r\n    <span v-if=\"hintBlockShown\" class=\"extended__multiselect-placeholder\">\r\n      {{ appropriatePlaceholder }}\r\n    </span>\r\n    <slot name=\"labelBlock\" :label-block-value=\"singleLabel\">\r\n      <span>{{ singleLabel }}</span>\r\n    </slot>\r\n    <input\r\n      class=\"extended__multiselect-input--hidden\"\r\n      ref=\"extendedInput\"\r\n      type=\"text\"\r\n      @blur.prevent=\"rollUp\"\r\n      @focus.prevent=\"expand\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport {\r\n  computed,\r\n  defineProps,\r\n  inject,\r\n  nextTick,\r\n  onBeforeMount,\r\n  onMounted,\r\n  ref,\r\n  toRef,\r\n  toRefs,\r\n  useAttrs,\r\n  watch,\r\n} from \"vue\";\r\n\r\nimport useDebounce from \"../composition/debounce\";\r\n\r\nimport ExtendedMultiselectMultiple from \"./ExtendedMultiselectMultiple.vue\";\r\n\r\nconst props = defineProps({\r\n  /**\r\n   * Determines whether to take search value from current\r\n   * selected option if \"multiple\" prop equals false\r\n   * @property {boolean} autoSelectSearchValue\r\n   */\r\n  autoSelectSearchValue: {\r\n    type: Boolean,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Determines which placeholder to use\r\n   * depending on the options creation mode\r\n   * @property {boolean} createOnTheGo\r\n   */\r\n  createOnTheGo: {\r\n    type: Boolean,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Blocks search field\r\n   * @property {boolean} disabled\r\n   */\r\n  disabled: {\r\n    type: Boolean,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Provides \"loading\" state of component\r\n   * to ExtendedMultiselectMultiple child component\r\n   * @property {boolean} loading\r\n   */\r\n  loading: {\r\n    type: Boolean,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Determines whether to use ExtendedMultiselectMultiple\r\n   * child component and some other related functionality\r\n   * @property {boolean} multiple\r\n   */\r\n  multiple: {\r\n    type: Boolean,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Renews the pattern of internal search for available options\r\n   * @property {boolean} searchFilterActive\r\n   */\r\n  searchFilterActive: {\r\n    type: Boolean,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Determines whether to show search field\r\n   * @property {boolean} showSearchField\r\n   */\r\n  showSearchField: {\r\n    type: Boolean,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Determines whether to show loader icon in multiple\r\n   * options block if \"loading\" prop equals true\r\n   * @default true\r\n   * @property {boolean} showDeselectIconLoader\r\n   */\r\n  showDeselectIconLoader: {\r\n    type: Boolean,\r\n    default: true,\r\n  },\r\n\r\n  /**\r\n   * Determines whether to allow user to increase limit of shown\r\n   * elements with selected options by special icon\r\n   * @property {boolean} toggleMultipleBlocksLimit\r\n   */\r\n  toggleMultipleBlocksLimit: {\r\n    type: Boolean,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Determines whether to roll up options list\r\n   * by option selection\r\n   * @property {boolean} toggleOptionsBySelect\r\n   */\r\n  toggleOptionsBySelect: {\r\n    type: Boolean,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Determines whether to clear value of search field\r\n   * after next switch of search field display\r\n   * @property {boolean} togglingSavesSearchValue\r\n   */\r\n  togglingSavesSearchValue: {\r\n    type: Boolean,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Placeholder which will be shown\r\n   * if \"createOnTheGo\" prop equals true\r\n   * @property {string} createOptionPlaceholder\r\n   */\r\n  createOptionPlaceholder: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Placeholder used in internal options filters\r\n   * and provided to ExtendedMultiselectMultiple child component\r\n   * @property {string} emptyObjectsPlaceholder\r\n   */\r\n  emptyObjectsPlaceholder: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Defines a svg-filter for loader icons\r\n   * @property {string} loaderIconFilter\r\n   */\r\n  loaderIconFilter: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Determines field of option which will be displayed as label\r\n   * @property {string} label\r\n   */\r\n  label: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * \"placeholder\" attribute for search field\r\n   * @property {string} placeholder\r\n   */\r\n  placeholder: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Provides current theme of extended multiselect\r\n   * to ExtendedMultiselectMultiple child component\r\n   * @property {string} themeType\r\n   */\r\n  themeType: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Provides limit of hidden options amount to be shown next\r\n   * @property {number} increaseDisplayBy\r\n   */\r\n  increaseDisplayBy: {\r\n    type: Number,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Provides limit of multiple option blocks amount\r\n   * to ExtendedMultiselectMultiple child component\r\n   * @default null\r\n   * @property {number} multipleBlocksLimit\r\n   */\r\n  multipleBlocksLimit: {\r\n    type: Number,\r\n    default: null,\r\n  },\r\n\r\n  /**\r\n   * Provides list of selected options\r\n   * to ExtendedMultiselectMultiple child component\r\n   * @property {Array} selectedOptions\r\n   */\r\n  selectedOptions: {\r\n    type: Array,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Reactive instance of LocalEmitter class\r\n   * @property {object} emitter\r\n   */\r\n  emitter: {\r\n    type: Object,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Provides function that creates custom label for\r\n   * block with selected option to ExtendedMultiselectMultiple\r\n   * child component\r\n   * @property {Function} createCustomOptionLabel\r\n   */\r\n  createCustomOptionLabel: {\r\n    type: Function,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Loader function provided by user.\r\n   * @property {Function} externalOptionsLoader\r\n   * @default null\r\n   * @param {string} value - value of search field\r\n   */\r\n  externalOptionsLoader: {\r\n    type: Function,\r\n    default: null,\r\n  },\r\n\r\n  /**\r\n   * Provides function that creates limit message for maximal of selected\r\n   * options to ExtendedMultiselectMultiple child component\r\n   * @property {Function} multipleBlocksLimitMessage\r\n   */\r\n  multipleBlocksLimitMessage: {\r\n    type: Function,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * \"id\" attribute of search field\r\n   * @default null\r\n   * @property {string|number} inputId\r\n   */\r\n  inputId: {\r\n    type: [String, Number],\r\n    default: null,\r\n  },\r\n});\r\n\r\nconst searchState = inject(\"searchState\");\r\nconst setSearchValue = inject(\"setSearchValue\");\r\nconst setSearchPattern = inject(\"setSearchPattern\");\r\n\r\nconst emitter = toRef(props, \"emitter\");\r\n\r\nconst { DebounceConstructor } = useDebounce();\r\n\r\nconst blurSkip = ref(false);\r\nconst searchFieldFocused = ref(false);\r\nconst optionWillBeTriggered = ref(false);\r\nconst searchFieldPreserving = ref(false);\r\nconst searchPlaceholderPreserving = ref(false);\r\nconst searchValue = ref(\"\");\r\nconst singleLabel = ref(\"\");\r\nconst blurSkipByToggleIcon = ref(0);\r\nconst blurSkipByBlock = ref(0);\r\nconst searchDebounce = ref(\r\n  new DebounceConstructor.value(() => {\r\n    const searchPattern = searchValue.value\r\n      ? new RegExp(`${searchValue.value}`, \"i\")\r\n      : null;\r\n    if (externalOptionsLoader.value) {\r\n      emitter.value.emit(\"extended:loader-pattern-changed\", searchValue.value);\r\n    } else {\r\n      emitter.value.emit(\"extended:search-pattern-changed\", searchValue.value);\r\n      setSearchPattern(searchPattern);\r\n    }\r\n  }, 250),\r\n);\r\n\r\n/**\r\n * Element references\r\n */\r\nconst extendedInput = ref(null);\r\n\r\nconst {\r\n  autoSelectSearchValue,\r\n  createOnTheGo,\r\n  createOptionPlaceholder,\r\n  disabled,\r\n  externalOptionsLoader,\r\n  increaseDisplayBy,\r\n  multiple,\r\n  placeholder,\r\n  searchFilterActive,\r\n  showSearchField,\r\n  selectedOptions,\r\n  toggleOptionsBySelect,\r\n  togglingSavesSearchValue,\r\n} = toRefs(props);\r\n\r\nconst attrs = useAttrs();\r\n\r\n/**\r\n * Defines \"placeholder\" attribute of search field\r\n * @function\r\n * @returns {string} placeholder\r\n */\r\nconst appropriatePlaceholder = computed(() => {\r\n  return createOnTheGo.value ? createOptionPlaceholder.value : placeholder.value;\r\n});\r\n\r\n/**\r\n * Determines whether to show placeholder block\r\n * if search field is hidden\r\n * @function\r\n * @returns {boolean} display\r\n */\r\nconst hintBlockShown = computed(() => {\r\n  if (selectedOptions.value.length) return false;\r\n\r\n  return true;\r\n});\r\n\r\n/**\r\n * Sets \"margin-top\" css property to multiple option blocks\r\n * if search field is shown\r\n * @function\r\n * @returns {Object|null} margin-top\r\n */\r\nconst multipleBlocksMargin = computed(() => {\r\n  return searchFieldForwarding.value ? { marginTop: \"4px\" } : null;\r\n});\r\n\r\n/**\r\n * Determines whether to show placeholder block\r\n * @function\r\n * @returns {boolean} display\r\n */\r\nconst placeholderBlockShown = computed(() => {\r\n  if (selectedOptions.value.length || searchFieldForwarding.value) return false;\r\n\r\n  return true;\r\n});\r\n\r\n/**\r\n * Defines classes of search field\r\n * @function\r\n * @returns {Array} classes\r\n */\r\nconst searchFieldClass = computed(() => {\r\n  const mainClass = searchFieldForwarding.value\r\n    ? \"extended__multiselect-input\"\r\n    : \"extended__multiselect-input--hidden\";\r\n  const searchFieldClasses = [];\r\n\r\n  if (optionWillBeTriggered.value) {\r\n    searchFieldClasses.push(\"extended__multiselect-input--trigger-option\");\r\n  }\r\n\r\n  if (searchPlaceholderPreserving.value) {\r\n    searchFieldClasses.push(\"extended__multiselect-input--preserved\");\r\n  }\r\n\r\n  searchFieldClasses.push(mainClass);\r\n\r\n  return searchFieldClasses;\r\n});\r\n\r\n/**\r\n * Determines whether to show search field\r\n * over element with selected option\r\n * @function\r\n * @returns {boolean} display\r\n */\r\nconst searchFieldForwarding = computed(() => {\r\n  return (\r\n    searchFieldFocused.value || optionWillBeTriggered.value || searchFieldPreserving.value\r\n  );\r\n});\r\n\r\n/**\r\n * Determines whether option shall be triggered before selection\r\n * @function\r\n * @emits extended:renew-field-forwarding\r\n * @param {boolean} searchFieldForwarding - restrictor of triggered option\r\n */\r\nwatch(searchFieldForwarding, (value) => {\r\n  if (value && autoSelectSearchValue.value && !multiple.value && singleLabel.value) {\r\n    searchValue.value = singleLabel.value;\r\n  }\r\n\r\n  emitter.value.emit(\"extended:renew-field-forwarding\", value);\r\n});\r\n\r\n/**\r\n * Sets pattern of internal search for available options from search field to store\r\n * @function\r\n * @param {string} pattern - pattern of internal search for available options\r\n */\r\nwatch(\r\n  searchState,\r\n  (prevState, state) => {\r\n    if (state.searchPattern === prevState.searchPattern) return;\r\n\r\n    if (searchFilterActive.value) {\r\n      setSearchPattern(state.pattern);\r\n    }\r\n  },\r\n  { deep: true },\r\n);\r\n\r\n/**\r\n * Sets value of search field from search field to store\r\n * @function\r\n * @param {string} value - value of search field\r\n */\r\nwatch(searchValue, (value) => {\r\n  if (searchFilterActive.value) {\r\n    setSearchValue(value);\r\n  }\r\n});\r\n\r\n/**\r\n * Expands options list\r\n * @function\r\n * @emits extended:expand-options\r\n */\r\nconst expand = () => {\r\n  if (disabled.value) return;\r\n\r\n  searchFieldFocused.value = true;\r\n\r\n  emitter.value.emit(\"extended:expand-options\");\r\n};\r\n\r\n/**\r\n * Describes behavour of input blur event\r\n * when \"multiple\" prop equals true\r\n * @function\r\n */\r\nconst multipleBlur = () => {\r\n  if (!multiple.value) {\r\n    searchFieldFocused.value = false;\r\n\r\n    return;\r\n  }\r\n};\r\n\r\n/**\r\n * Rolls up options list if it needed\r\n * @function\r\n * @emits extended:rollup-options\r\n */\r\nconst rollUp = () => {\r\n  if (disabled.value) return;\r\n\r\n  multipleBlur();\r\n\r\n  if (!togglingSavesSearchValue.value) {\r\n    searchValue.value = \"\";\r\n\r\n    setSearchValue(null);\r\n    setSearchPattern(null);\r\n  }\r\n\r\n  if (blurSkipByToggleIcon.value > 0) {\r\n    blurSkipByToggleIcon.value = 0;\r\n\r\n    return;\r\n  }\r\n\r\n  if (blurSkipByBlock.value > 0) {\r\n    blurSkipByBlock.value = 0;\r\n\r\n    return;\r\n  }\r\n\r\n  blurSkip.value = true;\r\n  blurSkipByBlock.value = 0;\r\n  blurSkipByToggleIcon.value = 0;\r\n\r\n  emitter.value.emit(\"extended:rollup-options\", true);\r\n};\r\n\r\n/**\r\n * Rolls up options list after option selection\r\n * and sets single option label\r\n * @function\r\n * @param {UnionPropType} option - option to be selected\r\n */\r\nconst rollupIfSelected = (option) => {\r\n  if (toggleOptionsBySelect.value) {\r\n    rollUp();\r\n  }\r\n\r\n  if (multiple.value) {\r\n    return;\r\n  } else {\r\n    singleLabel.value = option.label;\r\n  }\r\n};\r\n\r\n/**\r\n * Activates debounced version of options list filter\r\n * @function\r\n */\r\nconst search = () => {\r\n  searchDebounce.value.start();\r\n};\r\n\r\n/**\r\n * \"onBeforeMount\" hook of the ExtendedMultiselectInput component\r\n * @listens extended:field-focus\r\n * @listens extended:rollup-options\r\n * @listens extended:select-option\r\n * @listens extended:preselect-option\r\n * @listens extended:deselect-option\r\n * @listens extended:clean-options\r\n * @listens extended:clear-field\r\n * @listens extended:skip-blur\r\n * @listens extended:skip-block-blur\r\n * @listens extended:skip-block-blur-zeroing\r\n * @listens extended:trigger-selection\r\n * @listens extended:preserve-search-field\r\n */\r\nonBeforeMount(() => {\r\n  emitter.value.on(\"extended:rollup-options\", (internalRollup) => {\r\n    if (blurSkip.value === true) {\r\n      blurSkip.value = false;\r\n      return;\r\n    }\r\n\r\n    if (internalRollup) {\r\n      return;\r\n    }\r\n\r\n    rollUp();\r\n  });\r\n\r\n  emitter.value.on(\"extended:select-option\", (option) => {\r\n    rollupIfSelected(option);\r\n  });\r\n\r\n  emitter.value.on(\"extended:preselect-option\", (option) => {\r\n    rollupIfSelected(option);\r\n  });\r\n\r\n  emitter.value.on(\"extended:deselect-option\", () => {\r\n    if (multiple.value) {\r\n      return;\r\n    } else {\r\n      singleLabel.value = \"\";\r\n    }\r\n  });\r\n\r\n  emitter.value.on(\"extended:clean-options\", () => {\r\n    searchValue.value = null;\r\n  });\r\n\r\n  emitter.value.on(\"extended:clear-field\", () => {\r\n    searchValue.value = null;\r\n  });\r\n\r\n  emitter.value.on(\"extended:skip-blur\", () => {\r\n    blurSkipByToggleIcon.value++;\r\n  });\r\n\r\n  emitter.value.on(\"extended:skip-block-blur\", () => {\r\n    blurSkipByBlock.value++;\r\n  });\r\n\r\n  emitter.value.on(\"extended:skip-block-blur-zeroing\", () => {\r\n    blurSkipByBlock.value = 0;\r\n  });\r\n\r\n  emitter.value.on(\"extended:trigger-selection\", (triggerState) => {\r\n    if (!toggleOptionsBySelect.value) {\r\n      searchFieldFocused.value = false;\r\n    }\r\n\r\n    optionWillBeTriggered.value = triggerState;\r\n  });\r\n\r\n  emitter.value.on(\"extended:preserve-search-field\", (preserveState) => {\r\n    if (!multiple.value && selectedOptions.value.length) {\r\n      searchFieldPreserving.value = preserveState;\r\n    }\r\n\r\n    searchPlaceholderPreserving.value = preserveState;\r\n  });\r\n});\r\n\r\n/**\r\n * \"onMounted\" hook of the ExtendedMultiselectInput component\r\n * @listens extended:field-focus\r\n */\r\nonMounted(() => {\r\n  emitter.value.on(\"extended:field-focus\", () => {\r\n    if (showSearchField.value) {\r\n      nextTick(() => {\r\n        extendedInput.value.focus();\r\n      });\r\n    } else {\r\n      extendedInput.value.focus();\r\n    }\r\n  });\r\n});\r\n</script>\r\n","import { ref } from \"vue\";\r\n\r\nimport Debounce from \"../tools/Debounce\";\r\n\r\nexport default function useDebounce() {\r\n  const DebounceConstructor = ref(Debounce);\r\n\r\n  return { DebounceConstructor };\r\n}\r\n","<template>\r\n  <div ref=\"optionsWrapper\" tabindex=\"-1\" :class=\"classes\" :style=\"styles\">\r\n    <slot name=\"listHeader\"></slot>\r\n    <div\r\n      v-if=\"showCreateNewOptionBlock\"\r\n      class=\"extended__multiselect-option-create\"\r\n      :class=\"optionHighlightClasses(null)\"\r\n      @mousedown=\"createNewOption\"\r\n    >\r\n      {{ searchState.searchValue }}\r\n    </div>\r\n    <slot name=\"moreThanLimit\" v-if=\"maxOptionsWereSelected\">\r\n      <span>Maximum limit of selected options was achieved</span>\r\n    </slot>\r\n    <slot name=\"lessThanLimit\" v-if=\"minOptionsWereNotSelected\">\r\n      <span>Minimum amount of selected options was not achieved</span>\r\n    </slot>\r\n    <div class=\"extended__multiselect-options_container\">\r\n      <div role=\"listbox\" v-for=\"(option, index) in availableOptions\" :key=\"index\">\r\n        <div\r\n          v-if=\"option\"\r\n          :aria-setsize=\"availableOptions.length\"\r\n          :aria-posinset=\"index\"\r\n          :aria-labelledby=\"`option-label-${index}`\"\r\n          :aria-disabled=\"optionIsDisabled(option)\"\r\n          :class=\"optionHighlightClasses(option)\"\r\n          :style=\"optionHeightByProps\"\r\n          :enter-locator=\"index\"\r\n          :role=\"optionCreateRole(option)\"\r\n          @click.stop=\"selectOption(option, $event)\"\r\n          @keypress.stop=\"selectOption(option, $event)\"\r\n          @mousedown=\"triggerOptionBeforeSelection\"\r\n          @mouseenter.stop=\"setEnterIndex\"\r\n        >\r\n          <slot\r\n            name=\"option\"\r\n            :option=\"option\"\r\n            :create-custom-option-label=\"createCustomOptionLabel\"\r\n          >\r\n            <div class=\"extended__multiselect-marker\">\r\n              <slot name=\"marker\" :selected=\"showCurrentMarker(option)\">\r\n                <div\r\n                  v-if=\"showMarker && showCurrentMarker(option)\"\r\n                  :class=\"markerShapeClass(option)\"\r\n                  :style=\"markerShapeMargin\"\r\n                ></div>\r\n                <div\r\n                  v-else-if=\"showMarker\"\r\n                  class=\"extended__multiselect-marker-shape-only\"\r\n                ></div>\r\n              </slot>\r\n            </div>\r\n            <span :id=\"`option-label-${index}`\">\r\n              {{ optionCreateLabel(option) }}\r\n            </span>\r\n          </slot>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <slot name=\"noResults\" v-if=\"emptySearchResult\">\r\n      <span>No results were found by search</span>\r\n    </slot>\r\n    <slot name=\"noOptions\" v-if=\"emptyOptionsList\">\r\n      <span>Options list is empty</span>\r\n    </slot>\r\n    <slot name=\"listFooter\"></slot>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport {\r\n  computed,\r\n  defineProps,\r\n  inject,\r\n  nextTick,\r\n  onBeforeMount,\r\n  onMounted,\r\n  reactive,\r\n  ref,\r\n  toRefs,\r\n  watch,\r\n} from \"vue\";\r\n\r\nimport usePreselectedOptions from \"../composition/preselected-options\";\r\nimport useLabels from \"../composition/labels\";\r\n\r\nimport { UnionPropType } from \"../sets/sets\";\r\n\r\nconst props = defineProps({\r\n  /**\r\n   * Determines whether to immediately select just now created option\r\n   * @property {boolean} autoSelectCreatedOption\r\n   */\r\n  autoSelectCreatedOption: {\r\n    type: Boolean,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Determines whether to show noResults slot\r\n   * and block with new option's text\r\n   * @property {boolean} createOnTheGo\r\n   */\r\n  createOnTheGo: {\r\n    type: Boolean,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Determines whether to emit clear event\r\n   * by option selection\r\n   * @property {boolean} clearBySelectWhenMultiple\r\n   */\r\n  clearBySelectWhenMultiple: {\r\n    type: Boolean,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Determines whether to define thematic class for\r\n   * every option\r\n   * @property {boolean} highlightOptions\r\n   */\r\n  highlightOptions: {\r\n    type: Boolean,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Determines \"loading\" state of component\r\n   * that disables option selection\r\n   * @property {boolean} loading\r\n   */\r\n  loading: {\r\n    type: Boolean,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Determines whether to use functionality of\r\n   * multiple select\r\n   * @property {boolean} multiple\r\n   */\r\n  multiple: {\r\n    type: Boolean,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Determines whether to show selected options\r\n   * in options list\r\n   * @property {boolean} selectedOptionsShown\r\n   */\r\n  selectedOptionsShown: {\r\n    type: Boolean,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Determines whether to log warnings about incorrect props\r\n   * @property {boolean} showInsertWarnings\r\n   */\r\n  showInsertWarnings: {\r\n    type: Boolean,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Determines whether to show marker slot\r\n   * @property {boolean} showMarker\r\n   */\r\n  showMarker: {\r\n    type: Boolean,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Defines class of options list placement after expanse\r\n   * @property {string} chosenToggleAppearanceSide\r\n   */\r\n  chosenToggleAppearanceSide: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Determines type of option that will be created\r\n   * @property {string} createOptionType\r\n   */\r\n  createOptionType: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Determines a field in options of type \"object\"\r\n   * which value will be used to disable such options.\r\n   * @property {string} disableByField\r\n   */\r\n  disableByField: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Sets labels for options of type \"object\"\r\n   * or Array instances which length/keys length equals 0\r\n   * @property {string} emptyObjectsPlaceholder\r\n   */\r\n  emptyObjectsPlaceholder: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Determines field of option which will be displayed as label\r\n   * @property {string} label\r\n   */\r\n  label: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Determines field in options of type \"object\"\r\n   * to use in internal search.\r\n   * @property {string} searchByField\r\n   */\r\n  searchByField: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Current theme of extended-multiselect\r\n   * used in class definition\r\n   * @property {string} themeType\r\n   */\r\n  themeType: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Determines maximal limit of selected options\r\n   * @property {number|null} maxOptionsCount\r\n   */\r\n  maxOptionsCount: {\r\n    type: Number,\r\n    default: null,\r\n  },\r\n\r\n  /**\r\n   * Determines minimal limit of selected options\r\n   * @property {number|null} minOptionsCount\r\n   */\r\n  minOptionsCount: {\r\n    type: Number,\r\n    default: null,\r\n  },\r\n\r\n  /**\r\n   * Defines value of \"max-height\" css-property of options list\r\n   * @property {number} toggleMaxHeight\r\n   */\r\n  toggleMaxHeight: {\r\n    type: Number,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Defines value of \"min-height\" css-property of options list\r\n   * @property {number} toggleMinHeight\r\n   */\r\n  toggleMinHeight: {\r\n    type: Number,\r\n    default: null,\r\n  },\r\n\r\n  /**\r\n   * List of fields for new options of type \"object\" created by user\r\n   * if \"createOnTheGo\" prop equals true\r\n   * Each field will have basic value of \"searchValue\" prop\r\n   * @property {Array} createOptionFields\r\n   */\r\n  createOptionFields: {\r\n    type: Array,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Searches for options with listed primitive values\r\n   * and disables it\r\n   * @property {Array} disabledPrimitiveOptionsConverted\r\n   */\r\n  disabledPrimitiveOptionsConverted: {\r\n    type: Array,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Unfiltered options list\r\n   * @property {Array} options\r\n   */\r\n  options: {\r\n    type: Array,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Defines value of \"padding\" css-property of every option\r\n   * @property {Array} optionsPadding\r\n   */\r\n  optionsPadding: {\r\n    type: Array,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * List of options which should be selected by default\r\n   * if \"multiple\" prop equals true\r\n   * @property {Array} preselectedOptions\r\n   */\r\n  preselectedOptions: {\r\n    type: Array,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * List of options filtered by maximal available options amount\r\n   * @property {Array} restrictedOptions\r\n   */\r\n  restrictedOptions: {\r\n    type: Array,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * List of selected options or list with single selected option\r\n   * if \"multiple\" prop equals false\r\n   * @property {Array} selectedOptions\r\n   */\r\n  selectedOptions: {\r\n    type: Array,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * List of key names that in combination with \"enter\" key\r\n   * should cancel option selection\r\n   * @property {Array} specialKeysBlock\r\n   */\r\n  specialKeysBlock: {\r\n    type: Array,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Reactive instance of LocalEmitter class\r\n   * @property {object} emitter\r\n   */\r\n  emitter: {\r\n    type: Object,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Creates custom label for every option in options list\r\n   * @property {Function} createCustomOptionLabel\r\n   */\r\n  createCustomOptionLabel: {\r\n    type: Function,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Loader function provided by user.\r\n   * @property {Function} externalOptionsLoader\r\n   * @default null\r\n   * @param {string} value - value of search field\r\n   */\r\n  externalOptionsLoader: {\r\n    type: Function,\r\n    default: null,\r\n  },\r\n\r\n  /**\r\n   * Defines \"height\" css-property of every option element\r\n   * @property {number} anyOptionWrapperBlockHeight\r\n   */\r\n  anyOptionWrapperBlockHeight: {\r\n    type: [Number, String],\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Option which should be selected by default\r\n   * if \"multiple\" prop equals false\r\n   * @property {UnionPropType|null} preselectedOption\r\n   */\r\n  preselectedOption: {\r\n    type: UnionPropType,\r\n    default: null,\r\n  },\r\n});\r\n\r\nconst searchState = inject(\"searchState\");\r\nconst setSearchValue = inject(\"setSearchValue\");\r\nconst setSearchPattern = inject(\"setSearchPattern\");\r\n\r\nconst fieldWasShown = ref(false);\r\nconst atopWithScroll = ref(null);\r\nconst enterIndex = ref(null);\r\nconst heightFromMounted = reactive({});\r\nconst underWithScroll = ref(null);\r\n\r\n/**\r\n * Element references\r\n */\r\nconst optionsWrapper = ref(null);\r\n\r\nconst {\r\n  anyOptionWrapperBlockHeight,\r\n  autoSelectCreatedOption,\r\n  chosenToggleAppearanceSide,\r\n  clearBySelectWhenMultiple,\r\n  createOnTheGo,\r\n  createCustomOptionLabel,\r\n  createOptionFields,\r\n  createOptionType,\r\n  disableByField,\r\n  disabledPrimitiveOptionsConverted,\r\n  emitter,\r\n  emptyObjectsPlaceholder,\r\n  highlightOptions,\r\n  loading,\r\n  label,\r\n  searchByField,\r\n  maxOptionsCount,\r\n  minOptionsCount,\r\n  multiple,\r\n  options,\r\n  optionsPadding,\r\n  restrictedOptions,\r\n  selectedOptions,\r\n  selectedOptionsShown,\r\n  showInsertWarnings,\r\n  showMarker,\r\n  specialKeysBlock,\r\n  themeType,\r\n  toggleMaxHeight,\r\n  toggleMinHeight,\r\n  externalOptionsLoader,\r\n} = toRefs(props);\r\n\r\nconst { createLabel, optionTypeRestrictor } = usePreselectedOptions(\r\n  label,\r\n  emptyObjectsPlaceholder,\r\n  showInsertWarnings,\r\n);\r\nconst { optionCreateLabel } = useLabels(\r\n  label,\r\n  createCustomOptionLabel,\r\n  emptyObjectsPlaceholder,\r\n);\r\n\r\n/**\r\n * List of options filtered by \"disabled\" and \"selected\" signs\r\n * also by equality to null and undefined primitive values\r\n * or instance declarations\r\n * @function\r\n * @returns {Array} options\r\n */\r\nconst availableOptions = computed(() => {\r\n  let filteredOptions = restrictedOptions.value.filter((option) => {\r\n    const availableOptionType = optionTypeRestrictor(option);\r\n\r\n    if (!option || !availableOptionType) return false;\r\n\r\n    if (!lookForSimpleOptions(option)) return false;\r\n\r\n    if (selectedOptionsShown.value) return true;\r\n\r\n    return lookForObjectOptions(option);\r\n  });\r\n\r\n  let finalOptionsList = filteredOptions;\r\n\r\n  if (searchState.searchPattern) {\r\n    finalOptionsList = filterBySearchPattern(filteredOptions);\r\n  }\r\n\r\n  return finalOptionsList;\r\n});\r\n\r\n/**\r\n * Defines a list of options list classes\r\n * @function\r\n * @returns {Array} classes\r\n */\r\nconst classes = computed(() => {\r\n  let theme = [];\r\n\r\n  switch (themeType.value) {\r\n    case \"basic\":\r\n      theme.push(\"extended__multiselect-options\");\r\n      break;\r\n    case \"slate-grey\":\r\n      theme.push(\"extended__multiselect-options-slate-grey\");\r\n      break;\r\n    case \"slate-blue\":\r\n      theme.push(\"extended__multiselect-options-slate-blue\");\r\n      break;\r\n    case \"teal\":\r\n      theme.push(\"extended__multiselect-options-teal\");\r\n      break;\r\n    case \"strict\":\r\n      theme.push(\"extended__multiselect-options-strict\");\r\n      break;\r\n    default:\r\n      theme.push(\"extended__multiselect-options\");\r\n  }\r\n\r\n  if (showMarker.value) {\r\n    theme.push(\"extended__multiselect-options--marker\");\r\n  }\r\n\r\n  if (chosenToggleAppearanceSide.value === \"atop\") {\r\n    theme.push(\"extended__multiselect-options--atop\");\r\n  }\r\n\r\n  return theme;\r\n});\r\n\r\n/**\r\n * Determines whether given options list is empty\r\n * @function\r\n * @returns {boolean} emptiness\r\n */\r\nconst emptyOptionsList = computed(() => {\r\n  return (\r\n    (!options.value.length ||\r\n      !options.value.filter((option) => !!option).length ||\r\n      !availableOptions.value.length) &&\r\n    !searchState.searchValue\r\n  );\r\n});\r\n\r\n/**\r\n * Determines whether list of internal search results is empty\r\n * @function\r\n * @returns {boolean} emptiness\r\n */\r\nconst emptySearchResult = computed(() => {\r\n  return (\r\n    !availableOptions.value.length && !createOnTheGo.value && searchState.searchValue\r\n  );\r\n});\r\n\r\n/**\r\n * Defines styles for \"min-heigt\", \"max-height\"\r\n * and \"top\" css-properties of options wrapper\r\n * @function\r\n * @returns {Object} styles\r\n */\r\nconst heightFromProps = computed(() => {\r\n  let heightRecord = {};\r\n\r\n  if (chosenToggleAppearanceSide.value === \"atop\") {\r\n    Object.defineProperty(heightRecord, \"top\", {\r\n      enumerable: true,\r\n      value: `-${toggleMaxHeight.value}px`,\r\n    });\r\n  }\r\n\r\n  Object.defineProperty(heightRecord, \"maxHeight\", {\r\n    enumerable: true,\r\n    value: `${toggleMaxHeight.value}px`,\r\n  });\r\n\r\n  if (toggleMinHeight.value) {\r\n    if (toggleMinHeight.value > toggleMaxHeight.value) {\r\n      if (showInsertWarnings.value) {\r\n        let errorMessage =\r\n          \"vue-extended-multiselect: «toggleMinHeight» property can not be greater than «toggleMaxHeight» property.\";\r\n        errorMessage +=\r\n          \"«toggleMaxHeight» property was reset to default value of 400 pixels.\";\r\n        console.warn(errorMessage);\r\n      }\r\n\r\n      return Object.keys(heightRecord).length ? heightRecord : null;\r\n    }\r\n\r\n    Object.defineProperty(heightRecord, \"minHeight\", {\r\n      enumerable: true,\r\n      value: `${toggleMinHeight.value}px`,\r\n    });\r\n  }\r\n\r\n  return Object.keys(heightRecord).length ? heightRecord : null;\r\n});\r\n\r\n/**\r\n * Determines whether maximal amount of options has been selected\r\n * @function\r\n * @returns {boolean} reaching\r\n */\r\nconst maxOptionsWereSelected = computed(() => {\r\n  return (\r\n    maxOptionsCount.value &&\r\n    multiple.value &&\r\n    selectedOptions.value.length === maxOptionsCount.value\r\n  );\r\n});\r\n\r\n/**\r\n * Defines styles for \"margin-top\" css-property of marker element\r\n * @function\r\n * @returns {Object} styles\r\n */\r\nconst markerShapeMargin = computed(() => {\r\n  return { marginTop: \"2px\" };\r\n});\r\n\r\n/**\r\n * Determines whether minimal amount of options has not been selected\r\n * @function\r\n * @returns {boolean} reaching\r\n */\r\nconst minOptionsWereNotSelected = computed(() => {\r\n  return (\r\n    minOptionsCount.value &&\r\n    multiple.value &&\r\n    selectedOptions.value.length < minOptionsCount.value\r\n  );\r\n});\r\n\r\n/**\r\n * Defines styles for \"padding\" and \"height\" css-property\r\n * of every option element\r\n * @function\r\n * @returns {Object} styles\r\n */\r\nconst optionHeightByProps = computed(() => {\r\n  const heightNumeric = typeof anyOptionWrapperBlockHeight.value === \"number\";\r\n  let height = {\r\n    height: heightNumeric\r\n      ? `${anyOptionWrapperBlockHeight.value}px`\r\n      : `${anyOptionWrapperBlockHeight.value}`,\r\n  };\r\n\r\n  if (optionsPadding.value.length) {\r\n    const padding = {\r\n      paddingTop: optionsPadding.value[0] ? `${optionsPadding.value[0]}px` : null,\r\n      paddingLeft: optionsPadding.value[1] ? `${optionsPadding.value[1]}px` : null,\r\n      paddingBottom: optionsPadding.value[2] ? `${optionsPadding.value[2]}px` : null,\r\n      paddingRight: optionsPadding.value[3] ? `${optionsPadding.value[3]}px` : null,\r\n    };\r\n\r\n    return Object.assign(height, padding);\r\n  }\r\n\r\n  return height;\r\n});\r\n\r\n/**\r\n * Determines whether to show element with new custom option\r\n * @function\r\n * @returns {boolean} display\r\n */\r\nconst showCreateNewOptionBlock = computed(() => {\r\n  return createOnTheGo.value && !availableOptions.value.length && searchState.searchValue;\r\n});\r\n\r\n/**\r\n * Summarizes styles for options wrapper in combined collection\r\n * @function\r\n * @returns {Array} styles\r\n */\r\n\r\nconst styles = computed(() => {\r\n  return [\r\n    heightFromProps.value,\r\n    heightFromMounted,\r\n    atopWithScroll.value,\r\n    underWithScroll.value,\r\n  ];\r\n});\r\n\r\n/**\r\n * Toggles \"border-bottom-right-radius\", \"border-bottom-right-radius\"\r\n * and \"top\" css-properties of options wrapper\r\n * @function\r\n * @param {boolean} afterLoading - loading state flag\r\n */\r\nconst calculateTopOffset = (afterLoading = false) => {\r\n  nextTick(() => {\r\n    if (!optionsWrapper.value) return;\r\n\r\n    const offsetHeight = optionsWrapper.value.offsetHeight;\r\n    const scrollHeight = optionsWrapper.value.scrollHeight;\r\n\r\n    if (chosenToggleAppearanceSide.value === \"atop\") {\r\n      if (scrollHeight > offsetHeight) {\r\n        atopWithScroll.value = {\r\n          borderTopRightRadius: 0,\r\n        };\r\n      }\r\n\r\n      if (toggleMaxHeight.value >= offsetHeight || afterLoading) {\r\n        heightFromMounted.top = `-${offsetHeight - 1}px`;\r\n      }\r\n    } else {\r\n      if (scrollHeight > offsetHeight) {\r\n        underWithScroll.value = {\r\n          borderBottomRightRadius: 0,\r\n        };\r\n      }\r\n    }\r\n  });\r\n};\r\n\r\n/**\r\n * Restricts repeated selection of option\r\n * @function\r\n * @param {string} calculatedOptionLabel - displayed label of option\r\n */\r\nconst compareWithSelected = (calculatedOptionLabel) => {\r\n  return !selectedOptions.value.find((selectedOption) => {\r\n    let calculatedSelectedOptionLabel;\r\n\r\n    if (selectedOption && typeof selectedOption === \"object\") {\r\n      if (Object.keys(selectedOption).length === 0) {\r\n        calculatedSelectedOptionLabel = emptyObjectsPlaceholder.value;\r\n      } else if (Array.isArray(selectedOption)) {\r\n        calculatedSelectedOptionLabel = selectedOption.join(\", \");\r\n      } else {\r\n        calculatedSelectedOptionLabel =\r\n          selectedOption[label.value] && typeof selectedOption[label.value] === \"object\"\r\n            ? JSON.stringify(selectedOption[label.value])\r\n            : selectedOption[label.value].toString();\r\n      }\r\n    } else {\r\n      calculatedSelectedOptionLabel = selectedOption.toString();\r\n    }\r\n\r\n    return calculatedSelectedOptionLabel === calculatedOptionLabel;\r\n  });\r\n};\r\n\r\n/**\r\n * Creates new option by users input\r\n * if \"createOnTheGo\" prop equals true\r\n * @function\r\n * @emits extended:create-option\r\n */\r\nconst createNewOption = () => {\r\n  if (loading.value) return;\r\n\r\n  let newOption;\r\n\r\n  switch (createOptionType.value) {\r\n    case \"primitive\":\r\n      newOption = searchState.searchValue;\r\n      break;\r\n    case \"array\":\r\n      newOption = [searchState.searchValue];\r\n      break;\r\n    case \"object\":\r\n      newOption = createObjectOption();\r\n      break;\r\n  }\r\n\r\n  options.value.unshift(newOption);\r\n  emitter.value.emit(\"extended:create-option\", newOption);\r\n\r\n  if (autoSelectCreatedOption.value) {\r\n    selectOption(newOption, { target: { id: \"extended__multiselect\" } });\r\n    setSearchValue(null);\r\n    setSearchPattern(null);\r\n  }\r\n};\r\n\r\n/**\r\n * Creates option of type object\r\n * if \"createOptionType\" equals \"object\"\r\n * @function\r\n * @returns {UnionPropType} option\r\n */\r\nconst createObjectOption = () => {\r\n  if (!createOptionFields.value) {\r\n    if (showInsertWarnings.value) {\r\n      console.warn(\r\n        \"vue-extended-multiselect: if option should be object — option fields should not be empty\",\r\n      );\r\n    }\r\n\r\n    return searchState.searchValue;\r\n  }\r\n\r\n  const newOption = {};\r\n\r\n  createOptionFields.value.forEach((field) => {\r\n    Object.defineProperty(newOption, field, {\r\n      enumerable: true,\r\n      writable: true,\r\n      configurable: true,\r\n      value: `${field}-${searchState.searchValue}`,\r\n    });\r\n  });\r\n\r\n  return newOption;\r\n};\r\n\r\n/**\r\n * Recognises if option is disabled\r\n * @function\r\n * @param {UnionPropType} option - option to recognize\r\n * @returns {boolean} prohibition\r\n */\r\nconst defineDisabledOption = (option) => {\r\n  if (option && typeof option === \"object\" && !Array.isArray(option)) return false;\r\n\r\n  let convertedOption;\r\n\r\n  if (Array.isArray(option) && !option.length) {\r\n    convertedOption = emptyObjectsPlaceholder.value;\r\n  } else {\r\n    convertedOption = option;\r\n  }\r\n\r\n  if (disabledPrimitiveOptionsConverted.value.includes(convertedOption)) return true;\r\n\r\n  return false;\r\n};\r\n\r\n/**\r\n * Filters options list by pattern of internal search for available options\r\n * @function\r\n * @param {Array} optionsList - pre-filtered list of oprions\r\n * @returns {boolean} filter\r\n */\r\nconst filterBySearchPattern = (optionsList) => {\r\n  return optionsList.filter((option) => {\r\n    if (option && typeof option === \"object\") {\r\n      if (Array.isArray(option)) {\r\n        return searchState.searchPattern.test(\r\n          option.length ? option.join(\", \") : emptyObjectsPlaceholder.value,\r\n        );\r\n      }\r\n\r\n      let internalSearchResult;\r\n\r\n      if (searchByField.value.length) {\r\n        if (!option[searchByField.value]) return false;\r\n\r\n        internalSearchResult = option[searchByField.value].toString();\r\n      } else {\r\n        internalSearchResult = option[label.value].toString();\r\n      }\r\n\r\n      return searchState.searchPattern.test(internalSearchResult);\r\n    } else {\r\n      return searchState.searchPattern.test(option.toString());\r\n    }\r\n  });\r\n};\r\n\r\n/**\r\n * Blocks keys pressed in combination with \"enter\" key\r\n * for not to select options by them\r\n * @function\r\n * @param {KeyboardEvent} keyboardEvent - KeyboardEvent instance\r\n * @returns {boolean} block\r\n */\r\nconst keyBlocker = (keyboardEvent) => {\r\n  if (!keyboardEvent) return false;\r\n\r\n  const altKeyBlock = specialKeysBlock.value.includes(\"alt\");\r\n  const ctrlKeyBlock = specialKeysBlock.value.includes(\"ctrl\");\r\n  const shiftKeyBlock = specialKeysBlock.value.includes(\"shift\");\r\n\r\n  if (altKeyBlock && keyboardEvent.altKey) return true;\r\n  if (ctrlKeyBlock && keyboardEvent.ctrlKey) return true;\r\n  if (shiftKeyBlock && keyboardEvent.shiftKey) return true;\r\n\r\n  return false;\r\n};\r\n\r\n/**\r\n * Searchs for already selected options in particular\r\n * for options of type \"object\"\r\n * @function\r\n * @param {UnionPropType} option - option for search\r\n * @returns {boolean} selected\r\n */\r\nconst lookForObjectOptions = (option) => {\r\n  if (option && typeof option === \"object\") {\r\n    let calculatedOptionLabel;\r\n\r\n    if (Array.isArray(option) && !!option.length) {\r\n      calculatedOptionLabel = option.join(\", \");\r\n    } else {\r\n      const hasLabel = Object.getOwnPropertyNames(option).includes(label.value);\r\n\r\n      if (hasLabel) {\r\n        calculatedOptionLabel =\r\n          option[label.value] && typeof option[label.value] === \"object\"\r\n            ? JSON.stringify(option[label.value])\r\n            : option[label.value].toString();\r\n      } else {\r\n        calculatedOptionLabel = JSON.stringify(option);\r\n      }\r\n\r\n      if (Object.keys(option).length === 0) {\r\n        calculatedOptionLabel = emptyObjectsPlaceholder.value;\r\n      }\r\n    }\r\n\r\n    return compareWithSelected(calculatedOptionLabel);\r\n  } else {\r\n    return !selectedOptions.value.includes(option);\r\n  }\r\n};\r\n\r\n/**\r\n * Searches for already selected options in particular\r\n * for options of primitive types or of type \"function\"\r\n * @function\r\n * @param {UnionPropType} option - option for search\r\n * @returns {boolean} selected\r\n */\r\nconst lookForSimpleOptions = (option) => {\r\n  if (option && typeof option === \"object\" && Object.keys(option).length === 0) {\r\n    const emptyObject = selectedOptions.value.find((emptyObject) => {\r\n      return (\r\n        emptyObject && typeof emptyObject === \"object\" && !Object.keys(emptyObject).length\r\n      );\r\n    });\r\n\r\n    if (!emptyObject || selectedOptionsShown.value) return true;\r\n\r\n    return false;\r\n  }\r\n\r\n  if (\r\n    option &&\r\n    typeof option === \"object\" &&\r\n    !Array.isArray(option) &&\r\n    !Object.keys(option).includes(label.value)\r\n  )\r\n    return false;\r\n\r\n  return true;\r\n};\r\n\r\n/**\r\n * Defines a class for \"marker\" slot content\r\n * @function\r\n * @param {UnionPropType} option - option in options list\r\n * @returns {string} class\r\n */\r\nconst markerShapeClass = (option) => {\r\n  if (lookForSimpleOptions(option) && lookForObjectOptions(option)) {\r\n    return \"extended__multiselect-marker-shape--selected\";\r\n  }\r\n\r\n  return \"extended__multiselect-marker-shape\";\r\n};\r\n\r\n/**\r\n * Creates role of every option element for accessible applications\r\n * if it needed\r\n * @function\r\n * @param {UnionPropType} option - each option from options list\r\n * @returns {string|null} role\r\n */\r\nconst optionCreateRole = (option) => {\r\n  if (optionIsDisabled(option)) return null;\r\n  if (!option) return null;\r\n\r\n  return \"option\";\r\n};\r\n\r\n/**\r\n * Determines whether option is disabled\r\n * @function\r\n * @param {UnionPropType} option - each option from options list\r\n * @returns {boolean} blocking\r\n */\r\nconst optionIsDisabled = (option) => {\r\n  if (option[disableByField.value] || defineDisabledOption(option)) return true;\r\n\r\n  return false;\r\n};\r\n\r\n/**\r\n * Defines various classes for options dependent from props\r\n * @function\r\n * @param {UnionPropType} option - each option from options list\r\n * @returns {Array} classes\r\n */\r\nconst optionHighlightClasses = (option) => {\r\n  let theme = [];\r\n\r\n  if (highlightOptions.value) {\r\n    switch (themeType.value) {\r\n      case \"basic\":\r\n        theme.push(\"extended__multiselect-options_option\");\r\n        break;\r\n      case \"slate-grey\":\r\n        theme.push(\"extended__multiselect-options_option-slate-grey\");\r\n        break;\r\n      case \"slate-blue\":\r\n        theme.push(\"extended__multiselect-options_option-slate-blue\");\r\n        break;\r\n      case \"teal\":\r\n        theme.push(\"extended__multiselect-options_option-teal\");\r\n        break;\r\n      case \"strict\":\r\n        theme.push(\"extended__multiselect-options_option-strict\");\r\n        break;\r\n      default:\r\n        theme.push(\"extended__multiselect-options_option\");\r\n    }\r\n  }\r\n\r\n  if (showMarker.value) {\r\n    theme.push(\"extended__multiselect-options_option--marker\");\r\n  }\r\n\r\n  if (option && option[disableByField.value]) {\r\n    theme.push(\"extended__multiselect-options_option--disabled\");\r\n  }\r\n\r\n  if (disabledPrimitiveOptionsConverted.value && option && defineDisabledOption(option)) {\r\n    theme.push(\"extended__multiselect-options_option--disabled\");\r\n  }\r\n\r\n  return theme;\r\n};\r\n\r\n/**\r\n * Selects option\r\n * @function\r\n * @emits extended:deselect-option\r\n * @emits extended:preserve-search-field\r\n * @param {UnionPropType} option - option to select\r\n * @param {MouseEvent|KeyboardEvent} clickEvent - MouseEvent or KeyboardEvent instance\r\n */\r\nconst selectOption = (option, clickEvent) => {\r\n  emitter.value.emit(\"extended:trigger-selection\", false);\r\n  emitter.value.emit(\"extended:preserve-search-field\", false);\r\n\r\n  if (!clickEvent) return;\r\n  if (keyBlocker(clickEvent)) return;\r\n  if (loading.value) return;\r\n  if (maxOptionsWereSelected.value) return;\r\n  if (option[disableByField.value] || defineDisabledOption(option)) return;\r\n  if (\r\n    clickEvent.target.classList &&\r\n    (clickEvent.target.classList.contains(\"extended__multiselect-toggle\") ||\r\n      clickEvent.target.classList.contains(\"extended__multiselect-toggle--disabled\") ||\r\n      clickEvent.target.classList.contains(\"extended__multiselect-cancel\") ||\r\n      clickEvent.target.classList.contains(\"extended__multiselect-cancel--disabled\"))\r\n  )\r\n    return;\r\n\r\n  if (selectedOptionsShown.value || externalOptionsLoader.value) {\r\n    const optionDeselected = lookForObjectOptions(option);\r\n\r\n    if (!optionDeselected) {\r\n      const index = selectedOptions.value.findIndex((selectedOption) => {\r\n        return JSON.stringify(selectedOption) === JSON.stringify(option);\r\n      });\r\n\r\n      emitter.value.emit(\"extended:deselect-option\", { skipNextRemoval: true, index });\r\n\r\n      return;\r\n    }\r\n  }\r\n\r\n  const isObject = option && typeof option === \"object\" && !Array.isArray(option);\r\n\r\n  if (isObject && !Object.keys(option).includes(label.value)) {\r\n    if (showInsertWarnings.value) {\r\n      console.warn(\"vue-extended-multiselect: wrong label type inserted\");\r\n    }\r\n  }\r\n\r\n  selectOptionEmitter(option);\r\n};\r\n\r\n/**\r\n * Emits select events or clear event\r\n * if prop \"clearBySelectWhenMultiple\" equals true\r\n * @function\r\n * @emits extended:clear-field\r\n * @emits extended:select-option\r\n * @param {UnionPropType} - option to select\r\n */\r\nconst selectOptionEmitter = (option) => {\r\n  const isObjectOrArray = option && typeof option === \"object\";\r\n  const label = createLabel(isObjectOrArray, option);\r\n\r\n  if (multiple.value) {\r\n    if (clearBySelectWhenMultiple.value) {\r\n      emitter.value.emit(\"extended:clear-field\");\r\n    }\r\n\r\n    emitter.value.emit(\"extended:select-option\", {\r\n      label,\r\n      option,\r\n    });\r\n  } else {\r\n    emitter.value.emit(\"extended:select-option\", {\r\n      label,\r\n      option,\r\n    });\r\n  }\r\n};\r\n\r\n/**\r\n * Determines an option which will be selected\r\n * by pressing \"enter\" key on it\r\n * @function\r\n * @param {MouseEvent} event - MouseEvent instance\r\n */\r\nconst setEnterIndex = (event) => {\r\n  enterIndex.value = event.target.getAttribute(\"enter-locator\");\r\n};\r\n\r\n/**\r\n * Determines whether to show marker beside option by its selection\r\n * @function\r\n * @param {UnionPropType} option - each option from options list\r\n * @returns {boolean} display\r\n */\r\nconst showCurrentMarker = (option) => {\r\n  if (!lookForSimpleOptions(option) || !lookForObjectOptions(option)) {\r\n    return true;\r\n  }\r\n\r\n  return false;\r\n};\r\n\r\n/**\r\n * Emits event which listener will add special class\r\n * to search field before option selection\r\n * @function\r\n * @emits extended:trigger-selection\r\n * @emits extended:preserve-search-field\r\n */\r\nconst triggerOptionBeforeSelection = () => {\r\n  if (fieldWasShown.value) {\r\n    emitter.value.emit(\"extended:trigger-selection\", true);\r\n  }\r\n\r\n  emitter.value.emit(\"extended:preserve-search-field\", true);\r\n};\r\n\r\n/**\r\n * Triggers appearance side restrictor to set a position\r\n * of dropdown appearance\r\n * @function\r\n * @emits extended:available-options\r\n */\r\nwatch(availableOptions, () => {\r\n  emitter.value.emit(\"extended:available-options\");\r\n});\r\n\r\n/**\r\n * \"onBeforeMount\" hook of ExtendedMultiselectOptions component\r\n * @listens extended:select-enter\r\n * @listens extended:renew-field-forwarding\r\n * @listens extended:reset-index\r\n */\r\nonBeforeMount(() => {\r\n  const objectFields = restrictedOptions.value.filter((option) => {\r\n    if (!option) return false;\r\n\r\n    return (\r\n      option &&\r\n      typeof option === \"object\" &&\r\n      option[label.value] &&\r\n      typeof option[label.value] === \"object\"\r\n    );\r\n  });\r\n\r\n  if (objectFields.length && showInsertWarnings.value) {\r\n    console.warn(\r\n      \"vue-extended-multiselect: «label» property can not be of type «object»\",\r\n    );\r\n  }\r\n\r\n  emitter.value.on(\"extended:select-enter\", (keyboardEvent) => {\r\n    if (!enterIndex.value) return;\r\n\r\n    const option = availableOptions.value[enterIndex.value];\r\n\r\n    selectOption(option, keyboardEvent);\r\n  });\r\n\r\n  emitter.value.on(\"extended:renew-field-forwarding\", (value) => {\r\n    fieldWasShown.value = value;\r\n  });\r\n\r\n  emitter.value.on(\"extended:reset-index\", () => {\r\n    enterIndex.value = null;\r\n  });\r\n});\r\n\r\n/**\r\n * \"onMounted\" hook of ExtendedMultiselectOptions component\r\n */\r\nonMounted(() => {\r\n  new ResizeObserver(() => {\r\n    calculateTopOffset();\r\n  }).observe(optionsWrapper.value);\r\n});\r\n</script>\r\n","<template>\r\n  <svg\r\n    version=\"1.1\"\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n    xmlns:xlink=\"http://www.w3.org/1999/xlink\"\r\n    x=\"0px\"\r\n    y=\"0px\"\r\n    viewBox=\"0 0 490 490\"\r\n    style=\"enable-background: new 0 0 490 490\"\r\n    xml:space=\"preserve\"\r\n  >\r\n    <g>\r\n      <g>\r\n        <polygon\r\n          points=\"0,332.668 245.004,82.631 490,332.668 413.507,407.369 245.004,235.402 76.493,407.369 \t\t\"\r\n        />\r\n      </g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n    </g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n  </svg>\r\n</template>\r\n","<template>\r\n  <svg\r\n    version=\"1.1\"\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n    viewBox=\"0 0 26 26\"\r\n    xmlns:xlink=\"http://www.w3.org/1999/xlink\"\r\n    enable-background=\"new 0 0 26 26\"\r\n  >\r\n    <g>\r\n      <path\r\n        d=\"m13,0c-7.2,0-13,5.8-13,13s5.8,13 13,13 13-5.8 13-13-5.8-13-13-13zm0,22c-5,0-9-4-9-9s4-9 9-9 9,4 9,9-4,9-9,9z\"\r\n      />\r\n      <path\r\n        d=\"M18.8,14.4l-5-6C13.6,8.2,13.3,8,13,8s-0.6,0.1-0.8,0.4l-5,6l-0.1,0.1C7,14.7,7,14.8,7,15c0,0.3,0.2,0.7,0.5,0.9l1.7,1   C9.3,17,9.5,17,9.7,17c0.3,0,0.5-0.1,0.7-0.3l1.8-2.1c0.4-0.5,1.1-0.5,1.5,0l1.8,2.1c0.2,0.2,0.4,0.3,0.7,0.3c0.2,0,0.4,0,0.5-0.1   l1.7-1c0.3-0.2,0.5-0.5,0.5-0.9c0-0.2,0-0.3-0.1-0.5C18.8,14.4,18.8,14.4,18.8,14.4z\"\r\n      />\r\n    </g>\r\n  </svg>\r\n</template>\r\n","<template>\r\n  <svg\r\n    version=\"1.1\"\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n    xmlns:xlink=\"http://www.w3.org/1999/xlink\"\r\n    x=\"0px\"\r\n    y=\"0px\"\r\n    viewBox=\"0 0 490.037 490.037\"\r\n    style=\"enable-background: new 0 0 490.037 490.037\"\r\n    xml:space=\"preserve\"\r\n  >\r\n    <path\r\n      d=\"M91.483,490.019l153.535-160.332l153.535,160.332l91.483-91.439l-69.81-72.906l69.81-69.775L245.019,0.019L0,255.898\r\n      l69.81,69.775L0,398.58L91.483,490.019z M42.905,255.434L245.019,44.346l202.114,211.089l-48.1,48.07L245.019,142.678\r\n      L91.004,303.504L42.905,255.434z M245.019,187.02l202.114,211.081l-48.1,48.085L245.019,285.345L91.004,446.186l-48.1-48.085\r\n      L245.019,187.02z\"\r\n    />\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n  </svg>\r\n</template>\r\n","<template>\r\n  <svg\r\n    version=\"1.1\"\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n    viewBox=\"0 0 137.145 137.145\"\r\n    xmlns:xlink=\"http://www.w3.org/1999/xlink\"\r\n    enable-background=\"new 0 0 137.145 137.145\"\r\n  >\r\n    <g>\r\n      <g>\r\n        <path\r\n          d=\"m37.711,89.198l30.861-28.835-10.287-9.612-30.861,28.835 10.287,9.612zm72.004-89.198h-82.286c-15.149,0-27.429,12.281-27.429,27.429v82.287c0,15.148 12.28,27.429 27.429,27.429h82.286c15.149,0 27.429-12.28 27.429-27.429v-82.287c0-15.148-12.28-27.429-27.429-27.429zm13.715,102.858c0,11.361-9.21,20.572-20.572,20.572h-68.572c-11.361,0-20.571-9.211-20.571-20.572v-68.572c0-11.361 9.21-20.572 20.571-20.572h68.572c11.361,0 20.572,9.211 20.572,20.572v68.572zm-65.145-52.107l41.148,38.447 10.287-9.612-41.148-38.446-10.287,9.611z\"\r\n        />\r\n      </g>\r\n    </g>\r\n  </svg>\r\n</template>\r\n","<template>\r\n  <svg\r\n    version=\"1.1\"\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n    xmlns:xlink=\"http://www.w3.org/1999/xlink\"\r\n    x=\"0px\"\r\n    y=\"0px\"\r\n    viewBox=\"0 0 16 16\"\r\n    style=\"enable-background: new 0 0 16 16\"\r\n    xml:space=\"preserve\"\r\n  >\r\n    <g>\r\n      <path\r\n        style=\"fill: #030104\"\r\n        d=\"M8,0C3.582,0,0,3.582,0,8s3.582,8,8,8s8-3.582,8-8S12.418,0,8,0z M4,11l4-7l4,7H4z\"\r\n      />\r\n    </g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n  </svg>\r\n</template>\r\n","<template>\r\n  <svg\r\n    version=\"1.1\"\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n    xmlns:xlink=\"http://www.w3.org/1999/xlink\"\r\n    x=\"0px\"\r\n    y=\"0px\"\r\n    viewBox=\"0 0 490 490\"\r\n    style=\"enable-background: new 0 0 490 490\"\r\n    xml:space=\"preserve\"\r\n  >\r\n    <g>\r\n      <g>\r\n        <g>\r\n          <polygon\r\n            points=\"0,249.888 245.004,8.139 490,249.888 490,481.861 245.004,239.71 0,481.861 \t\t\t\"\r\n          />\r\n        </g>\r\n      </g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n    </g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n  </svg>\r\n</template>\r\n","<template>\r\n  <svg\r\n    version=\"1.1\"\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n    xmlns:xlink=\"http://www.w3.org/1999/xlink\"\r\n    x=\"0px\"\r\n    y=\"0px\"\r\n    viewBox=\"0 0 491.858 491.858\"\r\n    style=\"enable-background: new 0 0 491.858 491.858\"\r\n    xml:space=\"preserve\"\r\n  >\r\n    <g>\r\n      <g>\r\n        <path\r\n          d=\"M491.858,442.461c0,13.931-11.293,25.224-25.224,25.224L245.93,373.097L25.224,467.686\r\n          C11.292,467.686,0,456.392,0,442.461L227.011,32.58c0,0,18.918-18.918,37.834,0C283.764,51.499,491.858,442.461,491.858,442.461z\"\r\n        />\r\n      </g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n      <g></g>\r\n    </g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n    <g></g>\r\n  </svg>\r\n</template>\r\n","<template>\r\n  <div\r\n    aria-label=\"Toggle options list\"\r\n    role=\"switch\"\r\n    :aria-checked=\"dropdownActive\"\r\n    :class=\"toggleSlotClass\"\r\n    :tabindex=\"increasedTabindex\"\r\n    @click.stop.left=\"toggleOptionsList\"\r\n    @click.stop.middle=\"toggleOptionsList\"\r\n    @keypress.stop=\"toggleOptionsList($event)\"\r\n  >\r\n    <component v-if=\"!loading\" :class=\"classesSummary\" :is=\"icon\" :key=\"icon\" />\r\n    <extended-multiselect-loader\r\n      v-else\r\n      :icon-filter=\"loaderIconFilter\"\r\n      :icon-size=\"iconSize\"\r\n    />\r\n    <svg\r\n      version=\"1.1\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      xmlns:xlink=\"http://www.w3.org/1999/xlink\"\r\n      width=\"0\"\r\n      height=\"0\"\r\n    >\r\n      <defs>\r\n        <filter x=\"0\" y=\"0\" width=\"1\" height=\"1\" id=\"basicFilter\">\r\n          <feFlood flood-color=\"#BDBDBD\" />\r\n          <feComposite out=\"SourceGraphic\" in2=\"SourceGraphic\" operator=\"in\" />\r\n        </filter>\r\n        <filter x=\"0\" y=\"0\" width=\"1\" height=\"1\" id=\"blackFilter\">\r\n          <feFlood flood-color=\"#000000\" />\r\n          <feComposite out=\"SourceGraphic\" in2=\"SourceGraphic\" operator=\"in\" />\r\n        </filter>\r\n        <filter x=\"0\" y=\"0\" width=\"1\" height=\"1\" id=\"greenFilter\">\r\n          <feFlood flood-color=\"#068504\" />\r\n          <feComposite out=\"SourceGraphic\" in2=\"SourceGraphic\" operator=\"in\" />\r\n        </filter>\r\n      </defs>\r\n    </svg>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { computed, defineProps, toRefs } from \"vue\";\r\n\r\nimport useToggle from \"../composition/toggle\";\r\nimport useSizes from \"../composition/sizes\";\r\n\r\nimport ExtendedMultiselectLoader from \"./ExtendedMultiselectLoader.vue\";\r\nimport BaseArrowIcon from \"../icons/BaseArrowIcon.vue\";\r\nimport CircleArrowIcon from \"../icons/CircleArrowIcon.vue\";\r\nimport DoubleArrowIcon from \"../icons/DoubleArrowIcon.vue\";\r\nimport InnerArrowIcon from \"../icons/InnerArrowIcon.vue\";\r\nimport TriangleCircleArrowIcon from \"../icons/TriangleCircleArrowIcon.vue\";\r\nimport WideArrowIcon from \"../icons/WideArrowIcon.vue\";\r\nimport TriangleArrowIcon from \"../icons/TriangleArrowIcon.vue\";\r\n\r\nconst props = defineProps({\r\n  /**\r\n   * Determines what class to use on toggle slot\r\n   * @default false\r\n   * @property {boolean} disabled\r\n   */\r\n  disabled: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n\r\n  /**\r\n   * Determines whether option list expanded or not\r\n   * @property {boolean} dropdownActive\r\n   */\r\n  dropdownActive: {\r\n    type: Boolean,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Defines a svg-filter for icons\r\n   * @property {string} iconFilter\r\n   */\r\n  iconFilter: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Defines a svg-filter for loader icons\r\n   * @property {string} loaderIconFilter\r\n   */\r\n  loaderIconFilter: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Provides size to create special size-class\r\n   * for each kind of icon\r\n   * @property {string} iconSize\r\n   */\r\n  iconSize: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Replaces toggle button with loader\r\n   * @property {boolean} loading\r\n   */\r\n  loading: {\r\n    type: Boolean,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Determines toggle icon to be used in default toggle slot\r\n   * @property {string} toggleIcon\r\n   */\r\n  toggleIcon: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n\r\n  /**\r\n   * Defines \"tabindex\" attribute of toggle button\r\n   * @default null\r\n   * @property {number|null} tabindex\r\n   */\r\n  tabindex: {\r\n    type: Number,\r\n    default: null,\r\n  },\r\n\r\n  /**\r\n   * Reactive instance of LocalEmitter class\r\n   * @property {object} emitter\r\n   */\r\n  emitter: {\r\n    type: Object,\r\n    required: true,\r\n  },\r\n});\r\n\r\nconst {\r\n  disabled,\r\n  dropdownActive,\r\n  emitter,\r\n  iconFilter,\r\n  loaderIconFilter,\r\n  iconSize,\r\n  loading,\r\n  tabindex,\r\n  toggleIcon,\r\n} = toRefs(props);\r\n\r\nconst { toggleSlotClass, toggleOptionsList } = useToggle(loading, disabled, emitter);\r\nconst { iconSizeClass } = useSizes(iconSize);\r\n\r\n/**\r\n * Defines a list of toggle button classes\r\n * @function\r\n * @returns {Array} classes\r\n */\r\nconst classesSummary = computed(() => {\r\n  return [iconFilterClass.value, iconSizeClass.value, iconFilterRotationClass.value];\r\n});\r\n\r\n/**\r\n * Determines kind of toggle icon based on\r\n * \"toggleIcon\" prop\r\n * @function\r\n * @returns {string} icon\r\n */\r\nconst icon = computed(() => {\r\n  switch (toggleIcon.value) {\r\n    case \"base-arrow\":\r\n      return BaseArrowIcon;\r\n    case \"double-arrow\":\r\n      return DoubleArrowIcon;\r\n    case \"wide-arrow\":\r\n      return WideArrowIcon;\r\n    case \"circle-arrow\":\r\n      return CircleArrowIcon;\r\n    case \"inner-arrow\":\r\n      return InnerArrowIcon;\r\n    case \"triangle-arrow\":\r\n      return TriangleArrowIcon;\r\n    case \"triangle-circle-arrow\":\r\n      return TriangleCircleArrowIcon;\r\n    default:\r\n      return BaseArrowIcon;\r\n  }\r\n});\r\n\r\n/**\r\n * Defines svg-filter for toggle icon\r\n * @function\r\n * @returns {string} svg-filter\r\n */\r\nconst iconFilterClass = computed(() => {\r\n  const basicFilter = \"extended__multiselect-filter\";\r\n\r\n  switch (iconFilter.value) {\r\n    case \"basic\":\r\n      return `${basicFilter}_basic`;\r\n    case \"black\":\r\n      return `${basicFilter}_black`;\r\n    case \"green\":\r\n      return `${basicFilter}_green`;\r\n    default:\r\n      return `${basicFilter}_basic`;\r\n  }\r\n});\r\n\r\n/**\r\n * Defines rotation class of toggle icon based on\r\n * \"dropdownActive\" prop\r\n * @function\r\n * @returns {string} class\r\n */\r\nconst iconFilterRotationClass = computed(() => {\r\n  return dropdownActive.value\r\n    ? \"extended__multiselect-toggle--active\"\r\n    : \"extended__multiselect-toggle--locked\";\r\n});\r\n\r\n/**\r\n * Sets \"tabindex\" attibute of toggle button based on\r\n * given tabindex\r\n * @function\r\n * @returns {number} tabindex\r\n */\r\nconst increasedTabindex = computed(() => {\r\n  return tabindex.value ? tabindex.value + 1 : 0;\r\n});\r\n</script>\r\n","<template>\r\n  <section\r\n    aria-owns=\"extended-search-field\"\r\n    ref=\"extendedMultiselectWrapper\"\r\n    role=\"combobox\"\r\n    :aria-roledescription=\"roledescription\"\r\n    :class=\"wrapperClasses\"\r\n    :tabindex=\"tabindexIfSearch\"\r\n    @click.stop.left=\"fieldFocus\"\r\n    @click.stop.middle=\"fieldFocus\"\r\n    @keyup.stop.esc=\"rollUp\"\r\n    @keyup.stop.enter=\"selectByEnter\"\r\n    @mousedown.stop.left=\"toggleRestrictor\"\r\n    @mousedown.stop.middle=\"toggleRestrictor\"\r\n    @mouseleave.stop=\"resetEnterIndex\"\r\n  >\r\n    <div\r\n      ref=\"extendedMultiselect\"\r\n      :class=\"classes\"\r\n      :style=\"[displayWrongValue, expanded]\"\r\n    >\r\n      <div>\r\n        <extended-multiselect-input\r\n          :accesskey=\"attrs.accesskey\"\r\n          :autocomplete=\"attrs.autocomplete\"\r\n          :name=\"attrs.name\"\r\n          :spellcheck=\"attrs.spellcheck\"\r\n          :tabindex=\"attrs.tabindex\"\r\n          :translate=\"attrs.translate\"\r\n          :auto-select-search-value=\"autoSelectSearchValue\"\r\n          :create-on-the-go=\"createOnTheGo\"\r\n          :disabled=\"disabled\"\r\n          :loading=\"internalLoading\"\r\n          :loader-icon-filter=\"loaderIconFilter\"\r\n          :multiple=\"multiple\"\r\n          :search-filter-active=\"searchFilterActive\"\r\n          :show-deselect-icon-loader=\"showDeselectIconLoader\"\r\n          :toggling-saves-search-value=\"togglingSavesSearchValue\"\r\n          :toggle-options-by-select=\"toggleOptionsBySelect\"\r\n          :placeholder=\"placeholder\"\r\n          :show-search-field=\"showSearchField\"\r\n          :empty-objects-placeholder=\"emptyObjectsPlaceholder\"\r\n          :label=\"label\"\r\n          :multiple-blocks-limit-message=\"multipleBlocksLimitMessage\"\r\n          :theme-type=\"themeType\"\r\n          :increase-display-by=\"increaseDisplayBy\"\r\n          :multipleBlocksLimit=\"multipleBlocksLimit\"\r\n          :toggle-multiple-blocks-limit=\"toggleMultipleBlocksLimit\"\r\n          :selected-options=\"selectedOptions\"\r\n          :emitter=\"emitter\"\r\n          :create-custom-option-label=\"createCustomOptionLabel\"\r\n          :create-option-placeholder=\"createOptionPlaceholder\"\r\n          :external-options-loader=\"externalOptionsLoader\"\r\n          :input-id=\"inputId\"\r\n        >\r\n          <template v-if=\"slots.labelBlock\" #labelBlock=\"{ labelBlockValue }\">\r\n            <slot name=\"labelBlock\" :label-block-value=\"labelBlockValue\"> </slot>\r\n          </template>\r\n          <template\r\n            v-if=\"slots.multipleBlocks\"\r\n            #multipleBlocks=\"{ selectedOptions, deselectBlock }\"\r\n          >\r\n            <slot\r\n              name=\"multipleBlocks\"\r\n              :selected-options=\"selectedOptions\"\r\n              :deselect-block=\"deselectBlock\"\r\n            >\r\n            </slot>\r\n          </template>\r\n          <template\r\n            v-if=\"slots.optionBlock\"\r\n            #optionBlock=\"{ label, deselectBlock, index }\"\r\n          >\r\n            <slot\r\n              name=\"optionBlock\"\r\n              :label=\"label\"\r\n              :index=\"index\"\r\n              :deselect-block=\"deselectBlock\"\r\n            >\r\n            </slot>\r\n          </template>\r\n          <template v-if=\"slots.maxElements\" #maxElements>\r\n            <slot name=\"maxElements\"></slot>\r\n          </template>\r\n          <template v-if=\"toggleMultipleBlocksLimit\" #showMore=\"{ showMoreOptions }\">\r\n            <slot name=\"showMore\" :show-more-options=\"showMoreOptions\"> </slot>\r\n          </template>\r\n        </extended-multiselect-input>\r\n      </div>\r\n      <div class=\"extended__multiselect-toggle_wrapper\">\r\n        <slot name=\"toggle\" :toggle-options-list=\"toggleOptionsList\">\r\n          <extended-multiselect-toggle\r\n            ref=\"extendedMultiselectToggle\"\r\n            :tabindex=\"attrs.tabindex\"\r\n            :disabled=\"disabled\"\r\n            :dropdown-active=\"dropdownActive\"\r\n            :loading=\"internalLoading\"\r\n            :icon-filter=\"iconFilter\"\r\n            :loader-icon-filter=\"loaderIconFilter\"\r\n            :icon-size=\"iconSize\"\r\n            :toggle-icon=\"toggleIcon\"\r\n            :emitter=\"emitter\"\r\n          />\r\n        </slot>\r\n      </div>\r\n      <div class=\"extended__multiselect-cancel_wrapper\">\r\n        <slot name=\"cancel\" :cancel=\"cancel\">\r\n          <extended-multiselect-cancel\r\n            v-if=\"showClearIcon\"\r\n            :tabindex=\"attrs.tabindex\"\r\n            :disabled=\"disabled\"\r\n            :show-search-field=\"showSearchField\"\r\n            :loading=\"internalLoading\"\r\n            :loader-icon-filter=\"loaderIconFilter\"\r\n            :icon-size=\"iconSize\"\r\n            :selected-options=\"selectedOptions\"\r\n            :emitter=\"emitter\"\r\n          />\r\n        </slot>\r\n      </div>\r\n    </div>\r\n    <transition name=\"extended-toggle\" type=\"transition\">\r\n      <extended-multiselect-options\r\n        ref=\"extendedMultiselectOptions\"\r\n        v-if=\"dropdownActive\"\r\n        :auto-select-created-option=\"autoSelectCreatedOption\"\r\n        :clear-by-select-when-multiple=\"clearBySelectWhenMultiple\"\r\n        :create-on-the-go=\"createOnTheGo\"\r\n        :disabled-primitive-options-converted=\"disabledPrimitiveOptionsConverted\"\r\n        :highlight-options=\"highlightOptions\"\r\n        :loading=\"internalLoading\"\r\n        :multiple=\"multiple\"\r\n        :selected-options-shown=\"selectedOptionsShown\"\r\n        :show-insert-warnings=\"showInsertWarnings\"\r\n        :show-marker=\"showMarker\"\r\n        :chosen-toggle-appearance-side=\"chosenToggleAppearanceSide\"\r\n        :create-option-type=\"createOptionType\"\r\n        :disable-by-field=\"disableByField\"\r\n        :empty-objects-placeholder=\"emptyObjectsPlaceholder\"\r\n        :label=\"label\"\r\n        :search-by-field=\"searchByField\"\r\n        :theme-type=\"themeType\"\r\n        :any-option-wrapper-block-height=\"anyOptionWrapperBlockHeight\"\r\n        :max-options-count=\"maxOptionsCount\"\r\n        :min-options-count=\"minOptionsCount\"\r\n        :options-padding=\"optionsPadding\"\r\n        :toggle-max-height=\"toggleMaxHeight\"\r\n        :toggle-min-height=\"toggleMinHeight\"\r\n        :create-option-fields=\"createOptionFields\"\r\n        :options=\"restrictedOptions\"\r\n        :restricted-options=\"restrictedOptions\"\r\n        :selected-options=\"selectedOptions\"\r\n        :special-keys-block=\"specialKeysBlock\"\r\n        :preselected-option=\"preselectedOption\"\r\n        :preselected-options=\"preselectedOptions\"\r\n        :emitter=\"emitter\"\r\n        :create-custom-option-label=\"createCustomOptionLabel\"\r\n        :external-options-loader=\"externalOptionsLoader\"\r\n      >\r\n        <template v-if=\"slots.listHeader\" #listHeader>\r\n          <slot name=\"listHeader\"></slot>\r\n        </template>\r\n        <template v-if=\"maxOptionsCount\" #moreThanLimit>\r\n          <slot name=\"moreThanLimit\"></slot>\r\n        </template>\r\n        <template v-if=\"minOptionsCount\" #lessThanLimit>\r\n          <slot name=\"lessThanLimit\"></slot>\r\n        </template>\r\n        <template v-if=\"slots.option\" #option=\"{ option, createCustomOptionLabel }\">\r\n          <slot\r\n            name=\"option\"\r\n            :option=\"option\"\r\n            :create-custom-option-label=\"createCustomOptionLabel\"\r\n          >\r\n          </slot>\r\n        </template>\r\n        <template v-if=\"slots.marker\" #marker=\"{ selected }\">\r\n          <slot name=\"marker\" :selected=\"selected\"> </slot>\r\n        </template>\r\n        <template v-if=\"noResultsBlockShown\" #noResults>\r\n          <slot name=\"noResults\"></slot>\r\n        </template>\r\n        <template v-if=\"slots.noOptions\" #noOptions>\r\n          <slot name=\"noOptions\"></slot>\r\n        </template>\r\n        <template v-if=\"slots.listFooter\" #listFooter>\r\n          <slot name=\"listFooter\"></slot>\r\n        </template>\r\n      </extended-multiselect-options>\r\n    </transition>\r\n  </section>\r\n</template>\r\n\r\n<script setup>\r\nimport {\r\n  computed,\r\n  defineEmits,\r\n  defineExpose,\r\n  defineProps,\r\n  nextTick,\r\n  onBeforeMount,\r\n  onMounted,\r\n  provide,\r\n  ref,\r\n  toRaw,\r\n  toRefs,\r\n  useAttrs,\r\n  useSlots,\r\n  watch,\r\n} from \"vue\";\r\n\r\nimport {\r\n  themeTypes,\r\n  loaderThemeTypes,\r\n  toggleIcons,\r\n  iconFilters,\r\n  iconSizes,\r\n  createOptionTypes,\r\n  specialKeysToBlock,\r\n  toggleAppearenceSides,\r\n  UnionPropType,\r\n} from \"../sets/sets\";\r\n\r\nimport localEmitter from \"../tools/instance.js\";\r\n\r\nimport useToggle from \"../composition/toggle\";\r\nimport useCancel from \"../composition/cancel\";\r\nimport useLabels from \"../composition/labels\";\r\nimport useEmitter from \"../composition/emitter\";\r\nimport useClickOutside from \"../composition/click-outside\";\r\nimport usePreselectedOptions from \"../composition/preselected-options\";\r\nimport useSearchValue from \"../composition/search-value\";\r\n\r\nimport ExtendedMultiselectCancel from \"./ExtendedMultiselectCancel.vue\";\r\nimport ExtendedMultiselectInput from \"./ExtendedMultiselectInput.vue\";\r\nimport ExtendedMultiselectOptions from \"./ExtendedMultiselectOptions.vue\";\r\nimport ExtendedMultiselectToggle from \"./ExtendedMultiselectToggle.vue\";\r\n\r\n/**\r\n * @todo Mark optional arguments of the functions\r\n */\r\n\r\n/**\r\n * @author Ridiger Daniil Dmitrievich, 2022\r\n * @version 3.0.0\r\n */\r\nconst props = defineProps({\r\n  /**\r\n   * Determines whether to select just now created option\r\n   * automatically\r\n   * @default false\r\n   * @property {boolean} autoSelectCreatedOption\r\n   */\r\n  autoSelectCreatedOption: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n\r\n  /**\r\n   * Determines whether to take search value from current\r\n   * selected option if \"multiple\" prop equals false\r\n   * @default false\r\n   * @property {boolean} autoSelectSearchValue\r\n   */\r\n  autoSelectSearchValue: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n\r\n  /**\r\n   * Determines whether to clear search field by option selection\r\n   * @default false\r\n   * @property {boolean} clearBySelectWhenMultiple\r\n   */\r\n  clearBySelectWhenMultiple: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n\r\n  /**\r\n   * Allows user to create new options from search field\r\n   * @default false\r\n   * @property {boolean} createOnTheGo\r\n   */\r\n  createOnTheGo: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n\r\n  /**\r\n   * Determines whether options list should be expanded by default\r\n   * @default false\r\n   * @property {boolean} defaultExpanded\r\n   */\r\n  defaultExpanded: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n\r\n  /**\r\n   * Disables extended multiselect\r\n   * @default false\r\n   * @property {boolean} disabled\r\n   */\r\n  disabled: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n\r\n  /**\r\n   * Disables dropdown toggle\r\n   * @default false\r\n   * @property {boolean} dropdownDisabled\r\n   */\r\n  dropdownDisabled: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n\r\n  /**\r\n   * Switches options highlighting while hovering\r\n   * @default true\r\n   * @property {boolean} highlightOptions\r\n   */\r\n  highlightOptions: {\r\n    type: Boolean,\r\n    default: true,\r\n  },\r\n\r\n  /**\r\n   * Switches loading state of extended multiselect\r\n   * @default false\r\n   * @property {boolean} loading\r\n   */\r\n  loading: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n\r\n  /**\r\n   * Allows user to select multiple options\r\n   * @default false\r\n   * @property {boolean} multiple\r\n   */\r\n  multiple: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n\r\n  /**\r\n   * Determines whether to show special hint if no options were found\r\n   * @default true\r\n   * @property {boolean} noResultsBlockShown\r\n   */\r\n  noResultsBlockShown: {\r\n    type: Boolean,\r\n    default: true,\r\n  },\r\n\r\n  /**\r\n   * Determines whether to clear search field by selection/deselection of options\r\n   * @default true\r\n   * @property {boolean} resetSearchByValue\r\n   */\r\n  resetSearchByValue: {\r\n    type: Boolean,\r\n    default: true,\r\n  },\r\n\r\n  /**\r\n   * Allows user to use internal search for options\r\n   * @default true\r\n   * @property {boolean} searchFilterActive\r\n   */\r\n  searchFilterActive: {\r\n    type: Boolean,\r\n    default: true,\r\n  },\r\n\r\n  /**\r\n   * Switches full payload of extended multiselect events\r\n   * @default true\r\n   * @property {boolean} simpleEvents\r\n   */\r\n  simpleEvents: {\r\n    type: Boolean,\r\n    default: true,\r\n  },\r\n\r\n  /**\r\n   * Determines whether to show selected options in options list\r\n   * @default false\r\n   * @property {boolean} selectedOptionsShown\r\n   */\r\n  selectedOptionsShown: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n\r\n  /**\r\n   * Allows user to deselect all options by special icon\r\n   * @default false\r\n   * @property {boolean} showClearIcon\r\n   */\r\n  showClearIcon: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n\r\n  /**\r\n   * Determines whether to show loader icon in multiple\r\n   * options block if \"loading\" prop equals true\r\n   * @default true\r\n   * @property {boolean} showDeselectIconLoader\r\n   */\r\n  showDeselectIconLoader: {\r\n    type: Boolean,\r\n    default: true,\r\n  },\r\n\r\n  /**\r\n   * Determines whether to show useful internal warnings in console\r\n   * @default false\r\n   * @property {boolean} showInsertWarnings\r\n   */\r\n  showInsertWarnings: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n\r\n  /**\r\n   * Determines whether to show slot with special marker beside option in options list\r\n   * @default false\r\n   * @property {boolean} showMarker\r\n   */\r\n  showMarker: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n\r\n  /**\r\n   * Determines whether to show search field which allows user\r\n   * to search for options with internal search\r\n   * @default true\r\n   * @property {boolean} showSearchField\r\n   */\r\n  showSearchField: {\r\n    type: Boolean,\r\n    default: true,\r\n  },\r\n\r\n  /**\r\n   * Allows user to increase limit of shown elements with selected options\r\n   * by special icon\r\n   * @default false\r\n   * @property {boolean} toggleMultipleBlocksLimit\r\n   */\r\n  toggleMultipleBlocksLimit: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n\r\n  /**\r\n   * Determines whether to roll up options list by selection of option\r\n   * @default true\r\n   * @property {boolean} toggleOptionsBySelect\r\n   */\r\n  toggleOptionsBySelect: {\r\n    type: Boolean,\r\n    default: true,\r\n  },\r\n\r\n  /**\r\n   * Determines whether to save current search value if\r\n   * display of options list was toggled\r\n   * @default true\r\n   * @property {boolean} togglingSavesSearchValue\r\n   */\r\n  togglingSavesSearchValue: {\r\n    type: Boolean,\r\n    default: true,\r\n  },\r\n\r\n  /**\r\n   * Determines whether to define special class for extended multiselect\r\n   * if value is wrong\r\n   * Irregularity of value is defined by user\r\n   * @default false\r\n   * @property {boolean} wrongCurrentValue\r\n   */\r\n  wrongCurrentValue: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n\r\n  /**\r\n   * Placeholder for the search field to be used if\r\n   * user is allowed to create new options\r\n   * @default \"Select or create features\"\r\n   * @property {string} createOptionPlaceholder\r\n   */\r\n  createOptionPlaceholder: {\r\n    type: String,\r\n    default: \"Select or create features\",\r\n  },\r\n\r\n  /**\r\n   * Defines kind for all options which will be created by user\r\n   * @default \"primitive\"\r\n   * @property {string} createOptionType\r\n   */\r\n  createOptionType: {\r\n    type: String,\r\n    default: \"primitive\",\r\n    validator(value) {\r\n      return createOptionTypes.includes(value);\r\n    },\r\n  },\r\n\r\n  /**\r\n   * Determines a field in options of type \"object\"\r\n   * which value will be used to disable such options.\r\n   * @default \"disabled\"\r\n   * @property {string} disableByField\r\n   */\r\n  disableByField: {\r\n    type: String,\r\n    default: \"disabled\",\r\n  },\r\n\r\n  /**\r\n   * Placeholder for options of type \"object\"\r\n   * or Array instances which length/keys length equals 0\r\n   * @default \"Empty Object/Array\"\r\n   * @property {string} emptyObjectsPlaceholder\r\n   */\r\n  emptyObjectsPlaceholder: {\r\n    type: String,\r\n    default: \"Empty Object/Array\",\r\n  },\r\n\r\n  /**\r\n   * Defines \"border-color\" css-property for extended multiselect with wrong value\r\n   * @default \"#FF0000\"\r\n   * @property {string} errorBorderColor\r\n   */\r\n  errorBorderColor: {\r\n    type: String,\r\n    default: \"#FF0000\",\r\n  },\r\n\r\n  /**\r\n   * Defines svg-filter with color settings for all icons except loader\r\n   * @default \"basic\"\r\n   * @property {string} iconFilter\r\n   */\r\n  iconFilter: {\r\n    type: String,\r\n    default: \"basic\",\r\n    validator(value) {\r\n      return iconFilters.includes(value);\r\n    },\r\n  },\r\n\r\n  /**\r\n   * Defines sizes for all icons in pixels except loader\r\n   * @default \"large\"\r\n   * @property {string} iconSize\r\n   */\r\n  iconSize: {\r\n    type: String,\r\n    default: \"large\",\r\n    validator(value) {\r\n      return iconSizes.includes(value);\r\n    },\r\n  },\r\n\r\n  /**\r\n   * Defines field in options of type \"object\" that will be the label of option\r\n   * @default \"label\"\r\n   * @property {string} label\r\n   */\r\n  label: {\r\n    type: String,\r\n    default: \"label\",\r\n  },\r\n\r\n  /**\r\n   * Defines svg-filter with color settings for loader icon\r\n   * @default \"loader-default\"\r\n   * @property {string} loaderIconFilter\r\n   */\r\n  loaderIconFilter: {\r\n    type: String,\r\n    default: \"loader-default\",\r\n    validator(value) {\r\n      return loaderThemeTypes.includes(value);\r\n    },\r\n  },\r\n\r\n  /**\r\n   * Placeholder for search field to be used if\r\n   * user is not allowed to create new options\r\n   * @default \"Select features\"\r\n   * @property {string} placeholder\r\n   */\r\n  placeholder: {\r\n    type: String,\r\n    default: \"Select features\",\r\n  },\r\n\r\n  /**\r\n   * Determines field in options of type \"object\"\r\n   * to use in internal search.\r\n   * @default \"\"\r\n   * @property {string} searchByField\r\n   */\r\n  searchByField: {\r\n    type: String,\r\n    default: \"\",\r\n  },\r\n\r\n  /**\r\n   * Defines overall color theme for extended multiselect\r\n   * @default \"basic\"\r\n   * @property {string} themeType\r\n   */\r\n  themeType: {\r\n    type: String,\r\n    default: \"basic\",\r\n    validator(value) {\r\n      return themeTypes.includes(value);\r\n    },\r\n  },\r\n\r\n  /**\r\n   * Defines which side options list will be displayed on\r\n   * @default \"auto\"\r\n   * @property {string} toggleAppearanceSide\r\n   */\r\n  toggleAppearanceSide: {\r\n    type: String,\r\n    default: \"auto\",\r\n    validator(value) {\r\n      return toggleAppearenceSides.includes(value);\r\n    },\r\n  },\r\n\r\n  /**\r\n   * Defines kind of toggle icon from icons collection\r\n   * @default \"base-arrow\"\r\n   * @property {string} toggleIcon\r\n   */\r\n  toggleIcon: {\r\n    type: String,\r\n    default: \"base-arrow\",\r\n    validator(value) {\r\n      return toggleIcons.includes(value);\r\n    },\r\n  },\r\n\r\n  /**\r\n   * Defines gap which increases limit of displayed elements with selected options\r\n   * @default 5\r\n   * @property {number} increaseDisplayBy\r\n   */\r\n  increaseDisplayBy: {\r\n    type: Number,\r\n    default: 5,\r\n  },\r\n\r\n  /**\r\n   * Maximal limit of selected options\r\n   * @default null\r\n   * @property {number|null} maxOptionsCount\r\n   */\r\n  maxOptionsCount: {\r\n    type: Number,\r\n    default: null,\r\n  },\r\n\r\n  /**\r\n   * Minimal limit of selected options\r\n   * @default null\r\n   * @property {number|null} minOptionsCount\r\n   */\r\n  minOptionsCount: {\r\n    type: Number,\r\n    default: null,\r\n  },\r\n\r\n  /**\r\n   * Defines limit of displayed elements with selected options\r\n   * @default null\r\n   * @property {number|null} multipleBlocksLimit\r\n   */\r\n  multipleBlocksLimit: {\r\n    type: Number,\r\n    default: null,\r\n  },\r\n\r\n  /**\r\n   * Defines maximal limit of options list length\r\n   * @default null\r\n   * @property {number|null} optionsCountRestriction\r\n   */\r\n  optionsCountRestriction: {\r\n    type: Number,\r\n    default: null,\r\n  },\r\n\r\n  /**\r\n   * Defines maximal value in pixels of \"max-height\" css-property for options list\r\n   * @default 400\r\n   * @property {number} toggleMaxHeight\r\n   */\r\n  toggleMaxHeight: {\r\n    type: Number,\r\n    default: 400,\r\n  },\r\n\r\n  /**\r\n   * Defines minimal value in pixels of \"max-height\" css-property for options list\r\n   * @default null\r\n   * @property {number} toggleMaxHeight\r\n   */\r\n  toggleMinHeight: {\r\n    type: Number,\r\n    default: null,\r\n  },\r\n\r\n  /**\r\n   * Defines a list of fields for options of type \"object\" created by user\r\n   * @default [\"label\"]\r\n   * @property {Array} createOptionFields\r\n   */\r\n  createOptionFields: {\r\n    type: Array,\r\n    default: () => [\"label\"],\r\n    validator(value) {\r\n      return !value.some((field) => {\r\n        return typeof field !== \"string\";\r\n      });\r\n    },\r\n  },\r\n\r\n  /**\r\n   * Defines a list of primitive types for options.\r\n   * Options of given types will be disabled for selection.\r\n   * @default []\r\n   * @property {Array} disabledPrimitiveOptions\r\n   */\r\n  disabledPrimitiveOptions: {\r\n    type: Array,\r\n    default: () => [],\r\n    validator(value) {\r\n      return value.every((option) => {\r\n        return (\r\n          typeof option === \"string\" ||\r\n          typeof option === \"number\" ||\r\n          typeof option === \"boolean\" ||\r\n          typeof option === \"function\"\r\n        );\r\n      });\r\n    },\r\n  },\r\n\r\n  /**\r\n   * Raw options list\r\n   * @default []\r\n   * @property {Array|Function} options\r\n   */\r\n  options: {\r\n    type: [Array, Function],\r\n    default: () => [],\r\n  },\r\n\r\n  /**\r\n   * Defines a list with \"padding-top\", \"padding-left\", \"padding-bottom\"\r\n   * and \"padding-right\" css-properties for options in options list.\r\n   * Property \"padding-top\" matches index zero.\r\n   * Property \"padding-right\" matches index three.\r\n   * @default []\r\n   * @property {Array} optionsPadding\r\n   */\r\n  optionsPadding: {\r\n    type: Array,\r\n    default: () => [],\r\n    validator(value) {\r\n      return (\r\n        value.length < 5 &&\r\n        !value.some((padding) => {\r\n          return typeof padding !== \"number\";\r\n        })\r\n      );\r\n    },\r\n  },\r\n\r\n  /**\r\n   * Defines a list of options that will be select by default\r\n   * @default []\r\n   * @property {Array} preselectedOptions\r\n   */\r\n  preselectedOptions: {\r\n    type: Array,\r\n    default: () => [],\r\n  },\r\n\r\n  /**\r\n   * Defines a list of keys which in combination with mouse buttons or \"enter\" key\r\n   * will prevent selection of option\r\n   * @default []\r\n   * @property {Array} specialKeysBlock\r\n   */\r\n  specialKeysBlock: {\r\n    type: Array,\r\n    default: () => [],\r\n    validator(value) {\r\n      return value.every((keyBlock) => {\r\n        return specialKeysToBlock.includes(keyBlock);\r\n      });\r\n    },\r\n  },\r\n\r\n  /**\r\n   * Defines value of extended multiselect that can be used in \"v-model\" attribute\r\n   * @default []\r\n   * @property {Array|null} modelValue\r\n   */\r\n  modelValue: {\r\n    type: UnionPropType,\r\n    default: null,\r\n  },\r\n\r\n  /**\r\n   * Defines function that creates custom label for each option\r\n   * @default (option)=>null\r\n   * @property {Function} createCustomOptionLabel\r\n   */\r\n  createCustomOptionLabel: {\r\n    type: Function,\r\n    default: () => null,\r\n  },\r\n\r\n  /**\r\n   * Defines function that creates notification when maximal limit\r\n   * of selected options has been reached\r\n   * @default (number)=>string\r\n   * @property {Function} multipleBlocksLimitMessage\r\n   */\r\n  multipleBlocksLimitMessage: {\r\n    type: Function,\r\n    default: (number) => `and ${number} more items`,\r\n  },\r\n\r\n  /**\r\n   * Defines \"height\" css-property for each option in options list\r\n   * @default 30\r\n   * @property {number} anyOptionWrapperBlockHeight\r\n   */\r\n  anyOptionWrapperBlockHeight: {\r\n    type: [Number, String],\r\n    default: \"auto\",\r\n  },\r\n\r\n  /**\r\n   * \"id\" attribute of search field\r\n   * @default null\r\n   * @property {string|number|null} inputId\r\n   */\r\n  inputId: {\r\n    type: [String, Number],\r\n    default: null,\r\n  },\r\n\r\n  /**\r\n   * Defines options that will be select by default\r\n   * @default null\r\n   * @property {UnionPropType|null} preselectedOption\r\n   */\r\n  preselectedOption: {\r\n    type: UnionPropType,\r\n    default: null,\r\n  },\r\n});\r\n\r\nconst emit = defineEmits([\r\n  \"active\",\r\n  \"clean\",\r\n  \"close\",\r\n  \"increase\",\r\n  \"option-created\",\r\n  \"pattern-changed\",\r\n  \"select\",\r\n  \"update:modelValue\",\r\n]);\r\n\r\nconst dropdownActive = ref(false);\r\nconst skipNextRemoval = ref(false);\r\nconst externalOptionsLoader = ref(null);\r\nconst chosenToggleAppearanceSide = ref(null);\r\nconst selectedOptionsWatcher = ref(null);\r\nconst rawOptions = ref([]);\r\nconst selectedOptions = ref([]);\r\nconst togglePattern = /^extended__multiselect-toggle_wrapper/i;\r\n\r\n/**\r\n * Element references\r\n */\r\nconst extendedMultiselect = ref(null);\r\nconst extendedMultiselectToggle = ref(null);\r\nconst extendedMultiselectWrapper = ref(null);\r\nconst extendedMultiselectOptions = ref(null);\r\n\r\nconst {\r\n  defaultExpanded,\r\n  disabled,\r\n  dropdownDisabled,\r\n  disabledPrimitiveOptions,\r\n  emptyObjectsPlaceholder,\r\n  errorBorderColor,\r\n  inputId,\r\n  label,\r\n  loading,\r\n  loaderIconFilter,\r\n  modelValue,\r\n  multiple,\r\n  options,\r\n  optionsCountRestriction,\r\n  preselectedOption,\r\n  preselectedOptions,\r\n  resetSearchByValue,\r\n  simpleEvents,\r\n  showClearIcon,\r\n  showInsertWarnings,\r\n  showSearchField,\r\n  themeType,\r\n  toggleAppearanceSide,\r\n  toggleMaxHeight,\r\n  toggleOptionsBySelect,\r\n  wrongCurrentValue,\r\n  createCustomOptionLabel,\r\n} = toRefs(props);\r\n\r\nconst { searchState, setSearchValue, setSearchPattern } = useSearchValue();\r\n\r\nprovide(\"loaderIconFilter\", loaderIconFilter.value);\r\nprovide(\"searchState\", searchState);\r\nprovide(\"setSearchValue\", setSearchValue);\r\nprovide(\"setSearchPattern\", setSearchPattern);\r\n\r\nconst { emitter } = useEmitter();\r\nconst { clickOutside } = useClickOutside();\r\nconst { toggleOptionsList } = useToggle(loading, disabled, emitter);\r\nconst { cancel } = useCancel(\r\n  disabled,\r\n  showSearchField,\r\n  selectedOptions,\r\n  emitter,\r\n  setSearchValue,\r\n  setSearchPattern,\r\n);\r\nconst { createLabel, optionTypeRestrictor } = usePreselectedOptions(\r\n  label,\r\n  emptyObjectsPlaceholder,\r\n  showInsertWarnings,\r\n);\r\nconst { optionCreateLabel } = useLabels(\r\n  label,\r\n  createCustomOptionLabel,\r\n  emptyObjectsPlaceholder,\r\n);\r\nconst attrs = useAttrs();\r\nconst slots = useSlots();\r\n\r\n/**\r\n * Defines a list of extended multiselect wrapper classes\r\n * @function\r\n * @returns {Array} classes\r\n */\r\nconst classes = computed(() => {\r\n  let theme;\r\n  const localClassList = [];\r\n\r\n  switch (themeType.value) {\r\n    case \"basic\":\r\n      theme = \"extended__multiselect\";\r\n      break;\r\n    case \"slate-grey\":\r\n      theme = \"extended__multiselect-slate-grey\";\r\n      break;\r\n    case \"slate-blue\":\r\n      theme = \"extended__multiselect-slate-blue\";\r\n      break;\r\n    case \"teal\":\r\n      theme = \"extended__multiselect-teal\";\r\n      break;\r\n    case \"strict\":\r\n      theme = \"extended__multiselect-strict\";\r\n      break;\r\n    default:\r\n      theme = \"extended__multiselect\";\r\n  }\r\n\r\n  localClassList.push(theme);\r\n\r\n  const clear = showClearIcon.value\r\n    ? \"extended__multiselect-clear--active\"\r\n    : \"extended__multiselect-clear--locked\";\r\n\r\n  localClassList.push(clear);\r\n  localClassList.push(\"extended__multiselect-container\");\r\n\r\n  return localClassList;\r\n});\r\n\r\n/**\r\n * Defines a list of disabled primitive options given in \"disabledPrimitiveOptions\" prop\r\n * @function\r\n * @returns {Array} options\r\n */\r\nconst disabledPrimitiveOptionsConverted = computed(() => {\r\n  if (!disabledPrimitiveOptions.value) return null;\r\n\r\n  return disabledPrimitiveOptions.value.map((disabledOption) => {\r\n    if (\r\n      disabledOption &&\r\n      (Array.isArray(disabledOption) || typeof disabledOption === \"object\")\r\n    ) {\r\n      return null;\r\n    }\r\n\r\n    return disabledOption;\r\n  });\r\n});\r\n\r\n/**\r\n * Determines whether to display irregularity of value by \"border-color\" css-property\r\n * @function\r\n * @returns {Object|null} styles\r\n */\r\nconst displayWrongValue = computed(() => {\r\n  return wrongCurrentValue.value ? { borderColor: errorBorderColor.value } : null;\r\n});\r\n\r\n/**\r\n * Defines styles depending on current options list dropdown state\r\n * @function\r\n * @returns {Object|null} styles\r\n */\r\nconst expanded = computed(() => {\r\n  let borderStyles;\r\n\r\n  if (chosenToggleAppearanceSide.value === \"atop\") {\r\n    borderStyles = {\r\n      borderTopLeftRadius: 0,\r\n      borderTopRightRadius: 0,\r\n    };\r\n  } else {\r\n    borderStyles = {\r\n      borderBottomLeftRadius: 0,\r\n      borderBottomRightRadius: 0,\r\n    };\r\n  }\r\n\r\n  return dropdownActive.value ? borderStyles : null;\r\n});\r\n\r\n/**\r\n * Determines whether to activate loading state by \"loading\" prop\r\n * or by internal loading sign\r\n * @function\r\n * @returns {boolean} loading\r\n */\r\nconst internalLoading = computed(() => {\r\n  return loading.value;\r\n});\r\n\r\n/**\r\n * Defines mapped list of previously restricted options\r\n * @function\r\n * @returns {Array} options\r\n */\r\nconst mappedOptions = computed(() => {\r\n  return restrictedOptions.value.map((restrictedOption) => {\r\n    return JSON.stringify(restrictedOption);\r\n  });\r\n});\r\n\r\n/**\r\n * Defines a list of options filtered by maximal admissible options amount\r\n * @function\r\n * @returns {Array} options\r\n */\r\nconst restrictedOptions = computed(() => {\r\n  if (!rawOptions.value) return [];\r\n\r\n  return optionsCountRestriction.value\r\n    ? rawOptions.value.filter((_, index) => index + 1 <= optionsCountRestriction.value)\r\n    : rawOptions.value;\r\n});\r\n\r\n/**\r\n * Defines \"aria-roledescription\" attribute of extended multiselect wrapper\r\n * @function\r\n * @returns {string} aria-roledescription\r\n */\r\nconst roledescription = computed(() => {\r\n  return multiple.value ? \"Multiselect\" : \"Select\";\r\n});\r\n\r\n/**\r\n * Defines \"tabindex\" attribute of extended multiselect wrapper if needed\r\n * @function\r\n * @returns {number} tabindex\r\n */\r\nconst tabindexIfSearch = computed(() => {\r\n  return showSearchField.value ? attrs.tabindex : -1;\r\n});\r\n\r\n/**\r\n * Defines special class which indicates disabled or loading state\r\n * of extended multiselect wrapper\r\n * @function\r\n * @returns {string} class\r\n */\r\nconst wrapperClasses = computed(() => {\r\n  return disabled.value && !internalLoading.value\r\n    ? \"extended__multiselect-wrapper--disabled\"\r\n    : \"extended__multiselect-wrapper\";\r\n});\r\n\r\n/**\r\n * Forcibly rolls up dropdown options list by changing \"dropdownActive\" flag\r\n * @function\r\n * @emits extended:rollup-options\r\n * @param {boolean} value - \"dropdownActive\" flag\r\n */\r\nwatch(dropdownActive, (value) => {\r\n  if (!value) {\r\n    emitter.value.emit(\"extended:rollup-options\");\r\n  }\r\n});\r\n\r\n/**\r\n * Changes selected options based on external modelValue changes\r\n * @function\r\n */\r\nwatch(\r\n  modelValue,\r\n  (value, prevValue) => {\r\n    if (\r\n      JSON.stringify(toRaw(value)) === JSON.stringify(toRaw(prevValue)) ||\r\n      skipNextRemoval.value\r\n    ) {\r\n      skipNextRemoval.value = false;\r\n\r\n      return;\r\n    }\r\n\r\n    setPreselectedOptionsByModelValue(true);\r\n  },\r\n  { deep: true },\r\n);\r\n\r\n/**\r\n * Emits \"active\" when dropdown options list is active\r\n * @function\r\n * @emits active\r\n */\r\nconst activeEmitter = () => {\r\n  const eventData = simpleEvents.value\r\n    ? null\r\n    : {\r\n        inputId: inputId.value,\r\n      };\r\n\r\n  /**\r\n   * @event active\r\n   * @type {object|null}\r\n   * @property {string} inputId - id of search field set by \"id\" prop\r\n   */\r\n  emit(\"active\", eventData);\r\n};\r\n\r\n/**\r\n * Emits \"close\" when dropdown options list is rolled up\r\n * @function\r\n * @emits close\r\n */\r\nconst closeEmitter = () => {\r\n  const eventData = simpleEvents.value\r\n    ? selectedOptions.value\r\n    : createEventFields(selectedOptions.value, \"options\");\r\n\r\n  /**\r\n   * @event close\r\n   * @type {object|Array}\r\n   * @property {string} inputId - id of search field set by \"id\" prop\r\n   * @property {Array} options - array of selected options\r\n   */\r\n  emit(\"close\", eventData);\r\n};\r\n\r\n/**\r\n * Creates payload for events that can be listened by outer listeners\r\n * @function\r\n * @param {UnionPropType} field - main payload of event\r\n * @param {string} fieldName - name of field with main payload of event\r\n * @returns {object} payload\r\n */\r\nconst createEventFields = (field, fieldName) => {\r\n  const eventFields = {\r\n    inputId: inputId.value,\r\n  };\r\n\r\n  Object.defineProperty(eventFields, fieldName, {\r\n    value: field,\r\n    enumerable: true,\r\n  });\r\n\r\n  return eventFields;\r\n};\r\n\r\n/**\r\n * Focuses search field if \"click\" native event was triggered on available element\r\n * @function\r\n * @emits extended:field-focus\r\n * @param {MouseEvent} mouseEvent - MouseEvent instance\r\n */\r\nconst fieldFocus = (mouseEvent) => {\r\n  if (disabled.value) return;\r\n\r\n  if (!toggleOptionsBySelect.value) {\r\n    const customFilteredOptions = toggleOptionsRestrictor(mouseEvent);\r\n\r\n    if (customFilteredOptions) return;\r\n  }\r\n\r\n  const customFilteredCancel = toggleCustomRestrictor(mouseEvent, 2);\r\n  const customFilteredSelf = toggleCustomRestrictor(mouseEvent, 1);\r\n  const filteredHasCancel = toggleDetector(\r\n    mouseEvent,\r\n    /^extended__multiselect-cancel_wrapper/i,\r\n  );\r\n  const filteredHasToggle = toggleDetector(mouseEvent, togglePattern);\r\n\r\n  if (customFilteredCancel) return;\r\n  if (customFilteredSelf && dropdownActive.value === false) return;\r\n  if (filteredHasCancel.length) return;\r\n  if (filteredHasToggle.length && dropdownActive.value === false) return;\r\n\r\n  emitter.value.emit(\"extended:field-focus\");\r\n};\r\n\r\n/**\r\n * Initialises options list loading by external async method\r\n * @function\r\n * @param {string} pattern - value of search field\r\n * @param {boolean} initialValue - preselected options flag\r\n */\r\nconst loadOptionsByExternalLoader = (pattern, initialValue) => {\r\n  externalOptionsLoader.value = options.value;\r\n\r\n  options.value(pattern).then((options) => {\r\n    rawOptions.value = options;\r\n\r\n    if (initialValue) setPreselectedOptionsByConditions();\r\n  });\r\n};\r\n\r\n/**\r\n * Makes removal of selected options based on external modelValue changes\r\n * @function\r\n * @param {boolean} single - \"multiple\" prop flag\r\n */\r\nconst removeSelectedOptions = (single = false) => {\r\n  if (!single) {\r\n    const modelValueMapped = modelValue.value.map((option) => {\r\n      return JSON.stringify(option);\r\n    });\r\n\r\n    selectedOptions.value = selectedOptions.value.filter((option) => {\r\n      return modelValueMapped.includes(JSON.stringify(option));\r\n    });\r\n  } else {\r\n    if (!modelValue.value) cancel();\r\n  }\r\n};\r\n\r\n/**\r\n * Emits event whose listener resets index of \"enter\" key pressing\r\n * @function\r\n * @emits extended:reset-index\r\n */\r\nconst resetEnterIndex = () => {\r\n  emitter.value.emit(\"extended:reset-index\");\r\n};\r\n\r\n/**\r\n * Rolls up dropdown options list\r\n * @function\r\n * @emits extended:rollup-options\r\n */\r\nconst rollUp = () => {\r\n  dropdownActive.value = false;\r\n\r\n  emitter.value.emit(\"extended:rollup-options\");\r\n};\r\n\r\n/**\r\n * Rolls up dropdown options lists of other instances\r\n * @function\r\n * @emits extended:rollup-instances\r\n */\r\nconst rollupInstanses = () => {\r\n  localEmitter.emit(\"extended:rollup-instances\", extendedMultiselectWrapper.value);\r\n};\r\n\r\n/**\r\n * Triggers selection of option by \"enter\" key pressing\r\n * @function\r\n * @emits extended:select-enter\r\n * @param {KeyboardEvent} keyboardEvent - KeyboardEvent instance\r\n */\r\nconst selectByEnter = (keyboardEvent) => {\r\n  emitter.value.emit(\"extended:select-enter\", keyboardEvent);\r\n};\r\n\r\n/**\r\n * Sets preselected option provided by \"preselectedOption\" prop\r\n * @function\r\n * @emits extended:preselect-option\r\n * @param {UnionPropType} preselectedOption - option to be selected\r\n * @param {boolean} restriction - restriction of preselected option\r\n */\r\nconst setPreselectedOption = (preselectedOption, restriction = true) => {\r\n  const availableOptionType = optionTypeRestrictor(preselectedOption);\r\n  const mappedSelectedOptions = selectedOptions.value.map((selectedOption) => {\r\n    return JSON.stringify(selectedOption);\r\n  });\r\n\r\n  if (!availableOptionType) return;\r\n\r\n  if (\r\n    !mappedOptions.value.includes(JSON.stringify(preselectedOption)) &&\r\n    restriction &&\r\n    !mappedSelectedOptions.includes(JSON.stringify(preselectedOption))\r\n  ) {\r\n    if (showInsertWarnings.value) {\r\n      console.warn(\r\n        \"vue-extended-multiselect: option in «preselectedOption» property should be the same as analogue in «options» property\",\r\n      );\r\n    }\r\n\r\n    return;\r\n  }\r\n\r\n  const isObjectOrArray = preselectedOption && typeof preselectedOption === \"object\";\r\n  const label = createLabel(isObjectOrArray, preselectedOption);\r\n\r\n  emitter.value.emit(\"extended:preselect-option\", {\r\n    label,\r\n    option: preselectedOption,\r\n  });\r\n};\r\n\r\n/**\r\n * Sets preselected options provided by \"preselectedOptions\" prop\r\n * if \"multiple\" prop equals true\r\n * @function\r\n * @emits extended:preselect-option\r\n * @param {Array} preselectedOptions - options to be selected\r\n * @param {boolean} restriction - restriction of preselected options\r\n */\r\nconst setPreselectedOptions = async (preselectedOptions, restriction = true) => {\r\n  let allOptionsWereSelected = 0;\r\n  const mappedSelectedOptions = selectedOptions.value.map((selectedOption) => {\r\n    return JSON.stringify(selectedOption);\r\n  });\r\n\r\n  preselectedOptions.forEach((preselectedOption) => {\r\n    const availableOptionType = optionTypeRestrictor(preselectedOption);\r\n\r\n    if (!preselectedOption || !availableOptionType) return;\r\n    if (selectedOptions.value.includes(preselectedOption)) return;\r\n\r\n    if (\r\n      (mappedOptions.value.includes(JSON.stringify(preselectedOption)) || !restriction) &&\r\n      !mappedSelectedOptions.includes(JSON.stringify(preselectedOption))\r\n    ) {\r\n      const isObjectOrArray = preselectedOption && typeof preselectedOption === \"object\";\r\n      const label = createLabel(isObjectOrArray, preselectedOption);\r\n\r\n      allOptionsWereSelected++;\r\n\r\n      emitter.value.emit(\"extended:preselect-option\", {\r\n        label,\r\n        option: preselectedOption,\r\n      });\r\n    }\r\n  });\r\n\r\n  if (allOptionsWereSelected !== preselectedOptions.length && showInsertWarnings.value) {\r\n    console.warn(\r\n      \"vue-extended-multiselect: options in «preselectedOptions» property should be the same as analogues in «options» property\",\r\n    );\r\n  }\r\n};\r\n\r\n/**\r\n * Determines conditions that control preselected options installattion\r\n * if \"modelValue\" prop is defined\r\n * @function\r\n * @emits update:wrapper\r\n * @param {boolean} withRemoval - removal of selected options flag\r\n */\r\nconst setPreselectedOptionsByModelValue = (withRemoval = false) => {\r\n  if (!modelValue.value && !withRemoval) return;\r\n\r\n  if (withRemoval) selectedOptionsWatcher.value();\r\n\r\n  if (Array.isArray(modelValue.value) && multiple.value) {\r\n    if (withRemoval) removeSelectedOptions();\r\n\r\n    setPreselectedOptions(modelValue.value, false);\r\n  } else {\r\n    if (withRemoval) removeSelectedOptions(true);\r\n\r\n    setPreselectedOption(modelValue.value, false);\r\n  }\r\n\r\n  if (withRemoval) {\r\n    updateModelValue();\r\n\r\n    selectedOptionsWatcher.value = watch(\r\n      selectedOptions,\r\n      () => {\r\n        updateModelValue();\r\n\r\n        if (resetSearchByValue.value) {\r\n          emitter.value.emit(\"extended:clear-field\");\r\n        }\r\n      },\r\n      { deep: true },\r\n    );\r\n  }\r\n};\r\n\r\n/**\r\n * Determines conditions that control preselected options installattion\r\n * by \"preselectedOption\" and \"preselectedOptions\" props\r\n * @function\r\n */\r\nconst setPreselectedOptionsByConditions = () => {\r\n  if (preselectedOption.value && !multiple.value) {\r\n    setPreselectedOption(preselectedOption.value);\r\n\r\n    if (selectedOptions.value.length) {\r\n      updateModelValue();\r\n    }\r\n  }\r\n\r\n  if (!!preselectedOptions.value.length && multiple.value) {\r\n    const initialLength = selectedOptions.value.length;\r\n\r\n    setPreselectedOptions(preselectedOptions.value);\r\n\r\n    if (initialLength !== selectedOptions.value.length) {\r\n      updateModelValue();\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * Defines a position of dropdown appearance\r\n * @function\r\n * @returns {string} position\r\n */\r\nconst toggleAppearanceRestrictor = () => {\r\n  if (!window || !extendedMultiselectOptions.value.$el) return \"under\";\r\n\r\n  const innerHeight = window.innerHeight;\r\n  const offsetHeight =\r\n    extendedMultiselectOptions.value.$el.offsetHeight +\r\n    extendedMultiselect.value.offsetHeight;\r\n  const offsetTop = extendedMultiselect.value\r\n    ? extendedMultiselect.value.getBoundingClientRect().y\r\n    : 0;\r\n  const difference = innerHeight - offsetTop;\r\n\r\n  if (difference > offsetHeight) {\r\n    return \"under\";\r\n  } else {\r\n    return \"atop\";\r\n  }\r\n};\r\n\r\n/**\r\n * Sets a position of dropdown appearance\r\n * @function\r\n */\r\nconst toggleAppearanceRestrictorActivate = () => {\r\n  if (dropdownActive.value) {\r\n    chosenToggleAppearanceSide.value =\r\n      toggleAppearanceSide.value !== \"auto\"\r\n        ? toggleAppearanceSide.value\r\n        : toggleAppearanceRestrictor();\r\n  }\r\n};\r\n\r\n/**\r\n * Restricts toggling of dropdown options list\r\n * @function\r\n * @emits extended:skip-block-blur\r\n * @param {MouseEvent} mouseEvent - MouseEvent instance\r\n * @returns {boolean} toggling\r\n */\r\nconst toggleBlockRestrictor = (mouseEvent) => {\r\n  let generalRestriction;\r\n  let filteredCustomSelf;\r\n  const filteredHasBlock = toggleDetector(\r\n    mouseEvent,\r\n    /^extended__multiselect-block/i,\r\n    true,\r\n  );\r\n  const filteredHasSlot = toggleDetector(\r\n    mouseEvent,\r\n    /^extended__multiselect-options(?!_option)/i,\r\n    true,\r\n  );\r\n  const filteredSelf = toggleDetector(mouseEvent, /^extended__multiselect-clear/i, true);\r\n\r\n  if (filteredSelf.length || filteredHasBlock.length || filteredHasSlot.length) {\r\n    filteredCustomSelf = true;\r\n  } else {\r\n    filteredCustomSelf = toggleCustomRestrictor(mouseEvent);\r\n  }\r\n\r\n  if (extendedMultiselectToggle.value) {\r\n    generalRestriction =\r\n      (filteredHasBlock.length && dropdownActive.value && filteredCustomSelf) ||\r\n      (filteredSelf.length && dropdownActive.value && filteredCustomSelf) ||\r\n      (filteredHasSlot.length && dropdownActive.value && filteredCustomSelf);\r\n  } else {\r\n    generalRestriction =\r\n      (filteredHasBlock.length && dropdownActive.value) ||\r\n      (filteredSelf.length && dropdownActive.value) ||\r\n      (filteredHasSlot.length && dropdownActive.value);\r\n  }\r\n\r\n  if (generalRestriction) {\r\n    emitter.value.emit(\"extended:skip-block-blur\");\r\n\r\n    return true;\r\n  }\r\n\r\n  return false;\r\n};\r\n\r\n/**\r\n * Restricts toggling of dropdown options list by clicking\r\n * on particular descendants of toggle wrapper element\r\n * @function\r\n * @param {MouseEvent} mouseEvent - MouseEvent instance\r\n * @param {number} blockType - type of block which needs restriction\r\n * @returns {boolean} restriction\r\n */\r\nconst toggleCustomRestrictor = (mouseEvent, blockType) => {\r\n  let eventTarget = mouseEvent.target;\r\n  const toggleWrapper = extendedMultiselect.value;\r\n  const customToggle = toggleWrapper.children[blockType];\r\n\r\n  while (eventTarget) {\r\n    if (eventTarget === customToggle) return true;\r\n\r\n    eventTarget = eventTarget.parentNode;\r\n  }\r\n\r\n  return false;\r\n};\r\n\r\n/**\r\n * Restricts toggling of dropdown options list by clicking\r\n * on particular elements defined by given pattern\r\n * @function\r\n * @param {MouseEvent} mouseEvent - MouseEvent instance\r\n * @param {string} pattern - pattern with block class partial name\r\n * @param {boolean} mode - marks whether restrict by parent element or by current target\r\n * @returns {Array} classes\r\n */\r\nconst toggleDetector = (mouseEvent, pattern, mode) => {\r\n  let target = mouseEvent.target;\r\n\r\n  let filteredHasToggle = Array.prototype.filter.call(target.classList, (className) => {\r\n    return pattern.test(className) === true;\r\n  });\r\n\r\n  while (\r\n    target &&\r\n    ((target.classList && !target.classList.contains(\"extended__multiselect-wrapper\")) ||\r\n      (target.classList && !target.classList.length)) &&\r\n    mode &&\r\n    !filteredHasToggle.length\r\n  ) {\r\n    filteredHasToggle = Array.prototype.filter.call(target.classList, (className) => {\r\n      return pattern.test(className) === true;\r\n    });\r\n\r\n    if (target.classList.contains(\"extended__multiselect-options_container\")) {\r\n      filteredHasToggle.push(\"extended__multiselect-options_container\");\r\n\r\n      return filteredHasToggle;\r\n    }\r\n\r\n    if (target.classList.contains(\"extended__multiselect-toggle_wrapper\")) {\r\n      filteredHasToggle.push(\"extended__multiselect-toggle_wrapper\");\r\n\r\n      return filteredHasToggle;\r\n    }\r\n\r\n    target = target.parentNode;\r\n  }\r\n\r\n  return filteredHasToggle;\r\n};\r\n\r\n/**\r\n * Toggles dropdown options list and activates\r\n * necessary methods with relevant events\r\n * @function\r\n */\r\nconst toggleOptions = () => {\r\n  if (internalLoading.value || disabled.value || dropdownDisabled.value) return;\r\n\r\n  dropdownActive.value = !dropdownActive.value;\r\n\r\n  nextTick(() => {\r\n    toggleAppearanceRestrictorActivate();\r\n  });\r\n\r\n  if (!dropdownActive.value) {\r\n    activeEmitter();\r\n  } else {\r\n    closeEmitter();\r\n  }\r\n};\r\n\r\n/**\r\n * Prevents toggling dropdown options list\r\n * by selecting/deselecting option\r\n * @function\r\n * @param {MouseEvent} mouseEvent - MouseEvent instance\r\n * @returns {boolean} restriction\r\n */\r\nconst toggleOptionsRestrictor = (mouseEvent) => {\r\n  try {\r\n    let eventTarget = mouseEvent.target;\r\n    const optionsWrapper = optionsWrapper.value;\r\n\r\n    while (eventTarget) {\r\n      if (eventTarget === optionsWrapper) return true;\r\n\r\n      eventTarget = eventTarget.parentNode;\r\n    }\r\n\r\n    return false;\r\n  } catch (e) {\r\n    return false;\r\n  }\r\n};\r\n\r\n/**\r\n * Collects restrictions from other methods and defines\r\n * general restriction of toggling dropdown options list\r\n * @function\r\n * @emits extended:skip-blur\r\n * @param {MouseEvent} mouseEvent - MouseEvent instance\r\n */\r\nconst toggleRestrictor = (mouseEvent) => {\r\n  rollupInstanses();\r\n\r\n  const targetContentBlock = toggleBlockRestrictor(mouseEvent);\r\n\r\n  if (targetContentBlock) return;\r\n\r\n  const filteredHasToggle = toggleDetector(mouseEvent, togglePattern);\r\n\r\n  if (filteredHasToggle.length && dropdownActive.value) {\r\n    emitter.value.emit(\"extended:skip-blur\");\r\n  }\r\n};\r\n\r\n/**\r\n * Triggers modelValue updating when v-model has\r\n * been changed programmatically\r\n * @function\r\n * @emits update:modelValue\r\n */\r\nconst updateModelValue = () => {\r\n  if (multiple.value) {\r\n    emit(\"update:modelValue\", selectedOptions.value);\r\n  } else {\r\n    emit(\"update:modelValue\", selectedOptions.value[0]);\r\n  }\r\n};\r\n\r\n/**\r\n * \"onBeforeMount\" hook of the Vue3ExtendedMultiselect component\r\n * @emits select\r\n * @emits clean\r\n * @emits option-created\r\n * @emits increase\r\n * @emits pattern-changed\r\n * @emits extended:rollup-options\r\n * @listens extended:available-options\r\n * @listens extended:rollup-options\r\n * @listens extended:toggle-options\r\n * @listens extended:select-option\r\n * @listens extended:preselect-option\r\n * @listens extended:deselect-option\r\n * @listens extended:create-option\r\n * @listens extended:increase-display\r\n * @listens extended:loader-pattern-changed\r\n * @listens extended:search-pattern-changed\r\n */\r\nonBeforeMount(() => {\r\n  selectedOptionsWatcher.value = watch(\r\n    selectedOptions,\r\n    () => {\r\n      updateModelValue();\r\n\r\n      if (resetSearchByValue.value) {\r\n        emitter.value.emit(\"extended:clear-field\");\r\n      }\r\n    },\r\n    { deep: true },\r\n  );\r\n\r\n  chosenToggleAppearanceSide.value = toggleAppearanceSide.value;\r\n\r\n  emitter.value.on(\"extended:available-options\", () => {\r\n    nextTick(() => {\r\n      toggleAppearanceRestrictorActivate();\r\n    });\r\n  });\r\n\r\n  emitter.value.on(\"extended:rollup-options\", () => {\r\n    if (!dropdownActive.value) return;\r\n\r\n    closeEmitter();\r\n\r\n    dropdownActive.value = false;\r\n  });\r\n\r\n  emitter.value.on(\"extended:toggle-options\", () => {\r\n    toggleOptions();\r\n  });\r\n\r\n  emitter.value.on(\"extended:select-option\", (option) => {\r\n    const eventData = simpleEvents.value\r\n      ? option.option\r\n      : createEventFields(option.option, \"option\");\r\n\r\n    if (multiple.value) {\r\n      selectedOptions.value.push(option.option);\r\n      /**\r\n       * @event select\r\n       * @type {Object}\r\n       * @property {string} inputId - id of search field set by \"id\" prop\r\n       * @property {UnionPropType} option - just now selected option\r\n       */\r\n      emit(\"select\", eventData);\r\n    } else {\r\n      selectedOptions.value = [option.option];\r\n      /**\r\n       * @see select\r\n       */\r\n      emit(\"select\", eventData);\r\n    }\r\n\r\n    updateModelValue();\r\n  });\r\n\r\n  emitter.value.on(\"extended:preselect-option\", (option) => {\r\n    if (multiple.value) {\r\n      selectedOptions.value.push(option.option);\r\n    } else {\r\n      selectedOptions.value = [option.option];\r\n    }\r\n\r\n    updateModelValue();\r\n  });\r\n\r\n  emitter.value.on(\"extended:deselect-option\", (payload) => {\r\n    if (multiple.value && payload && !payload.clearAll) {\r\n      const deselectedOption = selectedOptions.value[payload.index];\r\n\r\n      const eventData = simpleEvents.value\r\n        ? deselectedOption\r\n        : createEventFields(deselectedOption, \"option\");\r\n\r\n      /**\r\n       * @event clean\r\n       * @type {Object}\r\n       * @property {string} inputId - id of search field set by \"id\" prop\r\n       * @property {UnionPropType} option - just now deselected option\r\n       */\r\n      emit(\"clean\", eventData);\r\n\r\n      if (payload.skipNextRemoval) {\r\n        skipNextRemoval.value = true;\r\n      }\r\n\r\n      selectedOptions.value.splice(payload.index, 1);\r\n      updateModelValue();\r\n\r\n      return;\r\n    } else {\r\n      if (!selectedOptions.value.length) return;\r\n\r\n      const deselectedOption = payload.deselectedOptions\r\n        ? payload.deselectedOptions\r\n        : selectedOptions.value;\r\n\r\n      const eventData = simpleEvents.value\r\n        ? deselectedOption\r\n        : createEventFields(deselectedOption, \"option\");\r\n\r\n      /**\r\n       * @event clean\r\n       * @type {Object}\r\n       * @property {string} inputId - id of search field set by \"id\" prop\r\n       * @property {UnionPropType} options - just now deselected options\r\n       */\r\n      emit(\"clean\", eventData);\r\n\r\n      selectedOptions.value = [];\r\n      updateModelValue();\r\n    }\r\n\r\n    if (toggleOptionsBySelect.value) {\r\n      emitter.value.emit(\"extended:rollup-options\");\r\n    }\r\n  });\r\n\r\n  emitter.value.on(\"extended:create-option\", (createdOption) => {\r\n    const eventData = simpleEvents.value\r\n      ? createdOption\r\n      : createEventFields(createdOption, \"option\");\r\n\r\n    /**\r\n     * @event option-created\r\n     * @type {PluginObject}\r\n     * @property {string} inputId - id of search field set by \"id\" prop\r\n     * @property {UnionPropType} option - option created by user\r\n     */\r\n    emit(\"option-created\", eventData);\r\n  });\r\n\r\n  emitter.value.on(\"extended:increase-display\", (limit) => {\r\n    const eventData = simpleEvents.value ? limit : createEventFields(limit, \"limit\");\r\n\r\n    /**\r\n     * @event increase\r\n     * @type {Object}\r\n     * @property {string} inputId - id of search field set by \"id\" prop\r\n     * @property {limit} - current limit of options to be shown next\r\n     */\r\n    emit(\"increase\", eventData);\r\n  });\r\n\r\n  emitter.value.on(\"extended:loader-pattern-changed\", (pattern) => {\r\n    const eventData = simpleEvents.value\r\n      ? pattern\r\n      : createEventFields(pattern, \"pattern\");\r\n\r\n    /**\r\n     * @event pattern-changed\r\n     * @type {Object}\r\n     * @property {string} inputId - id of search field set by \"id\" prop\r\n     * @property {pattern} - pattern of internal search for available options\r\n     */\r\n    emit(\"pattern-changed\", eventData);\r\n  });\r\n\r\n  emitter.value.on(\"extended:search-pattern-changed\", (pattern) => {\r\n    const eventData = simpleEvents.value\r\n      ? pattern\r\n      : createEventFields(pattern, \"pattern\");\r\n\r\n    /**\r\n     * @event pattern-changed\r\n     * @type {Object}\r\n     * @property {string} inputId - id of search field set by \"id\" prop\r\n     * @property {pattern} - pattern of internal search for available options\r\n     */\r\n    emit(\"pattern-changed\", eventData);\r\n  });\r\n});\r\n\r\n/**\r\n * \"onMounted\" hook of the Vue3ExtendedMultiselect component\r\n * @listens extended:expand-options\r\n * @listens extended:rollup-instances\r\n * @listens extended:loader-pattern-changed\r\n */\r\nonMounted(() => {\r\n  if (typeof options.value === \"function\") {\r\n    loadOptionsByExternalLoader(null, true);\r\n  } else {\r\n    rawOptions.value = options.value;\r\n\r\n    setPreselectedOptionsByConditions();\r\n  }\r\n\r\n  setPreselectedOptionsByModelValue();\r\n\r\n  if (defaultExpanded.value && !disabled.value && typeof options.value !== \"function\") {\r\n    dropdownActive.value = true;\r\n\r\n    nextTick(() => {\r\n      toggleAppearanceRestrictorActivate();\r\n    });\r\n  }\r\n\r\n  emitter.value.on(\"extended:expand-options\", () => {\r\n    if (dropdownActive.value || dropdownDisabled.value) return;\r\n\r\n    dropdownActive.value = true;\r\n\r\n    nextTick(() => {\r\n      toggleAppearanceRestrictorActivate();\r\n    });\r\n    activeEmitter();\r\n  });\r\n\r\n  emitter.value.on(\"extended:loader-pattern-changed\", (pattern) => {\r\n    loadOptionsByExternalLoader(pattern, false);\r\n  });\r\n\r\n  clickOutside.value.init(extendedMultiselectWrapper.value, () => {\r\n    emitter.value.emit(\"extended:rollup-options\");\r\n  });\r\n\r\n  localEmitter.on(\"extended:rollup-instances\", (instanceRef) => {\r\n    if (instanceRef !== extendedMultiselectWrapper.value) {\r\n      emitter.value.emit(\"extended:rollup-options\");\r\n    }\r\n  });\r\n});\r\n\r\ndefineExpose({\r\n  optionCreateLabel,\r\n});\r\n</script>\r\n\r\n<style>\r\n.extended__multiselect-wrapper,\r\n.extended__multiselect-wrapper--disabled {\r\n  --basic-color: #708090;\r\n  --basic-transparent: rgba(112, 128, 144, 0.6);\r\n  --cancel: #b22222;\r\n  --cancel-backgound-color: rgba(179, 33, 33, 0.1);\r\n  --dark-slate-blue: #483d8b;\r\n  --dark-slate-blue-transparent: rgba(72, 61, 139, 0.6);\r\n  --dark-slate-grey: #2f4f4f;\r\n  --dark-slate-grey-transparent: rgba(47, 79, 79, 0.6);\r\n  --disabled: rgba(176, 176, 176, 0.6);\r\n  --hover-color: #ffffff;\r\n  --default-color: #ffffff;\r\n  --loader-color: #00bfff;\r\n  --placeholder: #808080;\r\n  --strict: #000000;\r\n  --strict-transparent: rgba(0, 0, 0, 0.6);\r\n  --teal: #008080;\r\n  --teal-transparent: rgba(0, 128, 128, 0.6);\r\n\r\n  --block-border-radius: 4px;\r\n  --block-cancel-padding: 4px;\r\n  --block-gap: 6px;\r\n  --block-padding: 1px 3px 1px 7px;\r\n  --border-radius: 6px;\r\n  --border-radius-small: 3px;\r\n  --cancel-padding: 3px 8px;\r\n  --grid-columns: 1fr 36px 36px;\r\n  --grid-rows: 1fr 36px;\r\n  --half-size: 50%;\r\n  --icon-size-block: 14px;\r\n  --icon-size-large: 18px;\r\n  --icon-size-medium: 15px;\r\n  --icon-size-small: 12px;\r\n  --increaser-padding: 3px 7px;\r\n  --max-size: 100%;\r\n  --min-block-height: 25px;\r\n  --options-padding: 6px 0;\r\n  --outer-gap: 10px;\r\n  --root-padding: 6px 10px;\r\n  --toggle-icon-gap: 1px;\r\n  --wide-text: 700;\r\n  --wrapper-padding: 5px 10px;\r\n  --z-index-options: 10;\r\n\r\n  --border: 1px solid;\r\n  --default-cursor: default;\r\n  --icons-align-self: center;\r\n  --icons-justify-self: center;\r\n  --pointer-cursor: pointer;\r\n  --wrapper-transition: border-top-left-radius 250ms ease 0s,\r\n    border-top-right-radius 250ms ease 0s, border-bottom-left-radius 250ms ease-out,\r\n    border-bottom-right-radius 250ms ease-out;\r\n}\r\n\r\n.extended-toggle-enter-active,\r\n.extended-toggle-leave-active {\r\n  transition: opacity 250ms;\r\n}\r\n\r\n.extended-toggle-enter,\r\n.extended-toggle-leave-to {\r\n  opacity: 0;\r\n}\r\n\r\n@keyframes loading {\r\n  0% {\r\n    transform: rotate(0deg);\r\n  }\r\n  100% {\r\n    transform: rotate(2turn);\r\n  }\r\n}\r\n\r\n.extended__multiselect-wrapper,\r\n.extended__multiselect-wrapper--disabled {\r\n  position: relative;\r\n  width: var(--max-size);\r\n  height: auto;\r\n  cursor: var(--pointer-cursor);\r\n}\r\n\r\n.extended__multiselect-wrapper *,\r\n.extended__multiselect-wrapper--disabled * {\r\n  box-sizing: border-box;\r\n  font-family: inherit;\r\n  font-size: inherit;\r\n  font-style: inherit;\r\n}\r\n\r\n.extended-multiselect-wrapper,\r\n.extended__multiselect-options_container {\r\n  background-color: var(--default-color);\r\n}\r\n\r\n.extended__multiselect-wrapper--disabled .extended__multiselect-container {\r\n  background-color: var(--disabled);\r\n  user-select: none;\r\n  cursor: var(--default-cursor);\r\n}\r\n\r\n.extended__multiselect-wrapper--disabled .extended__multiselect-input,\r\n.extended__multiselect-wrapper--disabled .extended__multiselect-input--hidden {\r\n  cursor: var(--default-cursor);\r\n}\r\n\r\n.extended__multiselect-container {\r\n  align-items: center;\r\n  transition: var(--wrapper-transition);\r\n}\r\n\r\n.extended__multiselect,\r\n.extended__multiselect-slate-grey,\r\n.extended__multiselect-slate-blue,\r\n.extended__multiselect-teal,\r\n.extended__multiselect-strict {\r\n  border: var(--border);\r\n  border-radius: var(--border-radius);\r\n  display: grid;\r\n  padding: var(--wrapper-padding);\r\n  width: var(--max-size);\r\n  background-color: var(--default-color);\r\n}\r\n\r\n.extended__multiselect,\r\n.extended__multiselect .extended__multiselect-increaser:active {\r\n  border-color: var(--basic-color);\r\n}\r\n\r\n.extended__multiselect .extended__multiselect-increaser:active {\r\n  border-color: var(--basic-color);\r\n}\r\n\r\n.extended__multiselect-slate-grey,\r\n.extended__multiselect-slate-grey .extended__multiselect-increaser:active {\r\n  border-color: var(--dark-slate-grey);\r\n}\r\n\r\n.extended__multiselect-slate-blue,\r\n.extended__multiselect-slate-blue .extended__multiselect-increaser:active {\r\n  border-color: var(--dark-slate-blue);\r\n}\r\n\r\n.extended__multiselect-teal,\r\n.extended__multiselect-teal .extended__multiselect-increaser:active {\r\n  border-color: var(--teal);\r\n}\r\n\r\n.extended__multiselect-strict,\r\n.extended__multiselect-strict .extended__multiselect-increaser:active {\r\n  border-color: var(--strict);\r\n}\r\n\r\n.extended__multiselect-options,\r\n.extended__multiselect-options-slate-grey,\r\n.extended__multiselect-options-slate-blue,\r\n.extended__multiselect-options-teal,\r\n.extended__multiselect-options-strict {\r\n  display: flex;\r\n  flex-flow: column nowrap;\r\n  position: absolute;\r\n  cursor: var(--pointer-cursor);\r\n  border: var(--border);\r\n  color: inherit;\r\n  user-select: none;\r\n  background-color: var(--default-color);\r\n  border-top-right-radius: 0;\r\n  border-top-left-radius: 0;\r\n  z-index: var(--z-index-options);\r\n  border-bottom-right-radius: var(--border-radius);\r\n  border-bottom-left-radius: var(--border-radius);\r\n  width: var(--max-size);\r\n  overflow: auto;\r\n  border-top: none;\r\n  top: var(--max-size);\r\n  -webkit-overflow-scrolling: touch;\r\n}\r\n\r\n.extended__multiselect-options\r\n  > *:not([class^=\"extended__multiselect-options_option\"]):not(\r\n    [class=\"extended__multiselect-options_container\"]\r\n  ),\r\n.extended__multiselect-options-slate-grey\r\n  > *:not([class^=\"extended__multiselect-options_option\"]):not(\r\n    [class=\"extended__multiselect-options_container\"]\r\n  ),\r\n.extended__multiselect-options-slate-blue\r\n  > *:not([class^=\"extended__multiselect-options_option\"]):not(\r\n    [class=\"extended__multiselect-options_container\"]\r\n  ),\r\n.extended__multiselect-options-teal\r\n  > *:not([class^=\"extended__multiselect-options_option\"]):not(\r\n    [class=\"extended__multiselect-options_container\"]\r\n  ),\r\n.extended__multiselect-options-strict\r\n  > *:not([class^=\"extended__multiselect-options_option\"]):not(\r\n    [class=\"extended__multiselect-options_container\"]\r\n  ) {\r\n  padding: var(--root-padding);\r\n}\r\n\r\n.extended__multiselect-options--atop {\r\n  border-top-right-radius: var(--border-radius);\r\n  border-top-left-radius: var(--border-radius);\r\n  border-bottom-right-radius: 0;\r\n  border-bottom-left-radius: 0;\r\n  border-top: var(--border);\r\n}\r\n\r\n.extended__multiselect-clear--active {\r\n  grid-template-columns: var(--grid-columns);\r\n}\r\n\r\n.extended__multiselect-clear--locked {\r\n  grid-template-columns: var(--grid-rows);\r\n}\r\n\r\n.extended__multiselect,\r\n.extended__multiselect-options {\r\n  border-color: var(--basic-color);\r\n}\r\n\r\n.extended__multiselect-slate-grey,\r\n.extended__multiselect-options-slate-grey {\r\n  border-color: var(--dark-slate-grey);\r\n}\r\n\r\n.extended__multiselect-slate-blue,\r\n.extended__multiselect-options-slate-blue {\r\n  border-color: var(--dark-slate-blue);\r\n}\r\n\r\n.extended__multiselect-teal,\r\n.extended__multiselect-options-teal {\r\n  border-color: var(--teal);\r\n}\r\n\r\n.extended__multiselect-strict,\r\n.extended__multiselect-options-strict {\r\n  border-color: var(--strict);\r\n}\r\n\r\n.extended__multiselect-input {\r\n  cursor: text;\r\n  color: inherit;\r\n}\r\n\r\n.extended__multiselect-input,\r\n.extended__multiselect-block {\r\n  border: none;\r\n  outline: none;\r\n  min-height: var(--min-block-height);\r\n  width: var(--max-size);\r\n}\r\n\r\n.extended__multiselect-block > span {\r\n  word-break: break-all;\r\n  white-space: pre-line;\r\n}\r\n\r\n.extended__multiselect-input:focus::placeholder,\r\n.extended__multiselect-input--trigger-option::placeholder,\r\n.extended__multiselect-input--preserved::placeholder {\r\n  color: var(--strict);\r\n  font-weight: var(--wide-text);\r\n}\r\n\r\n.extended__multiselect-block {\r\n  display: flex;\r\n  flex-flow: row nowrap;\r\n  align-items: center;\r\n  user-select: none;\r\n  color: inherit;\r\n}\r\n\r\n.extended__multiselect-input--hidden {\r\n  position: absolute;\r\n  cursor: var(--pointer-cursor);\r\n  border: none;\r\n  width: 0;\r\n  height: 0;\r\n  opacity: 0;\r\n  padding: 0;\r\n}\r\n\r\n.extended__multiselect-toggle,\r\n.extended__multiselect-toggle--disabled,\r\n.extended__multiselect-cancel,\r\n.extended__multiselect-cancel--disabled,\r\n.extended__multiselect-loader {\r\n  display: flex;\r\n  flex-flow: row nowrap;\r\n  align-items: center;\r\n  justify-content: center;\r\n  user-select: none;\r\n}\r\n\r\n.extended__multiselect-toggle--active,\r\n.extended__multiselect-toggle--locked {\r\n  transform-origin: 50% 50%;\r\n  transition: transform 0.2s ease-out;\r\n}\r\n\r\n.extended__multiselect-toggle--active {\r\n  transform: rotate(0deg);\r\n}\r\n\r\n.extended__multiselect-toggle--locked {\r\n  transform: rotate(180deg);\r\n}\r\n\r\n.extended__multiselect-toggle_wrapper,\r\n.extended__multiselect-cancel_wrapper {\r\n  align-self: var(--icons-align-self);\r\n  justify-self: var(--icons-justify-self);\r\n  cursor: var(--pointer-cursor);\r\n}\r\n\r\n.extended__multiselect-toggle {\r\n  margin-top: var(--toggle-icon-gap);\r\n}\r\n\r\n.extended__multiselect-toggle,\r\n.extended__multiselect-toggle--disabled {\r\n  padding: var(--cancel-padding);\r\n}\r\n\r\n.extended__multiselect-toggle_icon-large,\r\n.extended__multiselect-toggle--disabled_icon-large,\r\n.extended__multiselect-cancel_icon-large,\r\n.extended__multiselect-cancel--disabled_icon-large,\r\n.extended__multiselect-loader_icon-large {\r\n  width: var(--icon-size-large);\r\n  height: var(--icon-size-large);\r\n}\r\n\r\n.extended__multiselect-toggle_icon-medium,\r\n.extended__multiselect-toggle--disabled_icon-medium,\r\n.extended__multiselect-cancel_icon-medium,\r\n.extended__multiselect-cancel--disabled_icon-medium,\r\n.extended__multiselect-loader_icon-medium {\r\n  width: var(--icon-size-medium);\r\n  height: var(--icon-size-medium);\r\n}\r\n\r\n.extended__multiselect-toggle_icon-small,\r\n.extended__multiselect-toggle--disabled_icon-small,\r\n.extended__multiselect-cancel_icon-small,\r\n.extended__multiselect-cancel--disabled_icon-small,\r\n.extended__multiselect-loader_icon-small {\r\n  width: var(--icon-size-small);\r\n  height: var(--icon-size-small);\r\n}\r\n\r\n.extended__multiselect-toggle_icon-deselect,\r\n.extended__multiselect-toggle--disabled_icon-deselect,\r\n.extended__multiselect-cancel_icon-deselect,\r\n.extended__multiselect-cancel--disabled_icon-deselect,\r\n.extended__multiselect-loader_icon-deselect {\r\n  width: var(--icon-size-block);\r\n  height: var(--icon-size-block);\r\n}\r\n\r\n.extended__multiselect-cancel,\r\n.extended__multiselect-cancel--disabled {\r\n  border: var(--border);\r\n  border-color: transparent;\r\n  display: flex;\r\n  flex-flow: row nowrap;\r\n  align-items: center;\r\n  padding: var(--cancel-padding);\r\n}\r\n\r\n.extended__multiselect-cancel:active {\r\n  border-color: var(--cancel);\r\n  border-radius: var(--border-radius-small);\r\n  background-color: var(--cancel-backgound-color);\r\n}\r\n\r\n.extended__multiselect-filter_basic {\r\n  filter: url(#basicFilter);\r\n}\r\n\r\n.extended__multiselect-filter_black {\r\n  filter: url(#blackFilter);\r\n}\r\n\r\n.extended__multiselect-filter_green {\r\n  filter: url(#greenFilter);\r\n}\r\n\r\n.extended__multiselect-loader_default-loader {\r\n  filter: url(#filterLoaderDefault);\r\n}\r\n\r\n.extended__multiselect-loader_basic {\r\n  filter: url(#filterLoaderBasic);\r\n}\r\n\r\n.extended__multiselect-loader_slate-grey {\r\n  filter: url(#filterLoaderSlateGrey);\r\n}\r\n\r\n.extended__multiselect-loader_slate-blue {\r\n  filter: url(#filterLoaderSlateBlue);\r\n}\r\n\r\n.extended__multiselect-loader_teal {\r\n  filter: url(#filterLoaderTeal);\r\n}\r\n\r\n.extended__multiselect-loader_strict {\r\n  filter: url(#filterLoaderStrict);\r\n}\r\n\r\n.extended__multiselect-loader-animate {\r\n  animation-name: loading;\r\n  animation-duration: 3s;\r\n  animation-timing-function: linear;\r\n  animation-iteration-count: infinite;\r\n}\r\n\r\n.extended__multiselect-options_container {\r\n  display: flex;\r\n  flex-flow: column nowrap;\r\n}\r\n\r\n.extended__multiselect-options_option,\r\n.extended__multiselect-options_option-slate-grey,\r\n.extended__multiselect-options_option-slate-blue,\r\n.extended__multiselect-options_option-teal,\r\n.extended__multiselect-options_option-strict {\r\n  display: flex;\r\n  flex-flow: row nowrap;\r\n  align-items: center;\r\n  padding: var(--root-padding);\r\n  color: inherit;\r\n}\r\n\r\n.extended__multiselect--multiple-basic,\r\n.extended__multiselect--multiple-slate-grey,\r\n.extended__multiselect--multiple-slate-blue,\r\n.extended__multiselect--multiple-teal,\r\n.extended__multiselect--multiple-strict {\r\n  display: flex;\r\n  flex-flow: row nowrap;\r\n  align-items: center;\r\n  border-radius: var(--block-border-radius);\r\n  padding: var(--block-padding);\r\n  gap: var(--block-gap);\r\n  max-height: var(--min-block-height);\r\n}\r\n\r\n.extended__multiselect-options_option:hover,\r\n.extended__multiselect--multiple-basic {\r\n  background-color: var(--basic-transparent);\r\n  color: var(--hover-color);\r\n}\r\n\r\n.extended__multiselect-options_option-slate-grey:hover,\r\n.extended__multiselect--multiple-slate-grey {\r\n  background-color: var(--dark-slate-grey-transparent);\r\n  color: var(--hover-color);\r\n}\r\n\r\n.extended__multiselect-options_option-slate-blue:hover,\r\n.extended__multiselect--multiple-slate-blue {\r\n  background-color: var(--dark-slate-blue-transparent);\r\n  color: var(--hover-color);\r\n}\r\n\r\n.extended__multiselect-options_option-teal:hover,\r\n.extended__multiselect--multiple-teal {\r\n  background-color: var(--teal-transparent);\r\n  color: var(--hover-color);\r\n}\r\n\r\n.extended__multiselect-options_option-strict:hover,\r\n.extended__multiselect--multiple-strict {\r\n  background-color: var(--strict-transparent);\r\n  color: var(--hover-color);\r\n}\r\n\r\n.extended__multiselect-marker-shape {\r\n  width: var(--icon-size-block);\r\n  height: var(--icon-size-block);\r\n  margin-right: var(--block-gap);\r\n  border-radius: var(--half-size);\r\n  border: var(--border);\r\n  border-color: var(--basic-color);\r\n}\r\n\r\n.extended__multiselect-marker-shape--selected {\r\n  border-color: var(--cancel);\r\n}\r\n\r\n.extended__multiselect-marker-shape-only {\r\n  width: var(--icon-size-block);\r\n  height: var(--icon-size-block);\r\n  margin-left: var(--block-gap);\r\n  border: var(--border);\r\n  border-color: transparent;\r\n}\r\n\r\n.extended__multiselect-container\r\n  + .extended__multiselect-options--marker\r\n  > span:not([id^=\"option-label\"]),\r\n.extended__multiselect-container\r\n  + .extended__multiselect-options--marker\r\n  > .extended__multiselect-option-create {\r\n  padding-left: 30px;\r\n}\r\n\r\n.extended__multiselect-options_option--disabled {\r\n  background-color: var(--disabled);\r\n  user-select: none;\r\n  cursor: var(--default-cursor);\r\n}\r\n\r\n.extended__multiselect_deselect-block-icon {\r\n  width: var(--icon-size-block);\r\n  height: var(--icon-size-block);\r\n}\r\n\r\n.extended__multiselect-block--multiple > div {\r\n  display: flex;\r\n  flex-flow: row wrap;\r\n  gap: var(--outer-gap);\r\n}\r\n\r\n.extended__multiselect-block_cancel-wrapper,\r\n.extended__multiselect-block_cancel-wrapper--loading {\r\n  border: var(--border);\r\n  border-color: transparent;\r\n  display: flex;\r\n  flex-flow: row nowrap;\r\n  align-items: center;\r\n  padding: var(--block-cancel-padding);\r\n}\r\n\r\n.extended__multiselect-block_cancel-wrapper:active {\r\n  border-color: var(--cancel);\r\n  border-radius: var(--border-radius-small);\r\n  background-color: var(--cancel-backgound-color);\r\n}\r\n\r\n.extended__multiselect-increaser {\r\n  border: var(--border);\r\n  border-color: transparent;\r\n  padding: var(--increaser-padding);\r\n}\r\n\r\n.extended__multiselect-placeholder {\r\n  color: var(--placeholder);\r\n  margin-left: 2px;\r\n}\r\n</style>\r\n","import { reactive, readonly } from \"vue\";\r\n\r\nexport default function useSearchValue() {\r\n  /**\r\n   * @property {string|null} searchValue - value of search field\r\n   * @property {string|null} searchPattern - pattern of inner search for available options\r\n   */\r\n  const searchState = reactive({\r\n    searchValue: null,\r\n    searchPattern: null,\r\n  });\r\n\r\n  /**\r\n   * @function setSearchValue\r\n   * @param {string|null} value - new value of search field\r\n   */\r\n  const setSearchValue = (value) => {\r\n    searchState.searchValue = value;\r\n  };\r\n\r\n  /**\r\n   * @function setSearchPattern\r\n   * @param {string|null} pattern - new pattern of inner search for available options\r\n   */\r\n  const setSearchPattern = (pattern) => {\r\n    searchState.searchPattern = pattern;\r\n  };\r\n\r\n  return {\r\n    searchState: readonly(searchState),\r\n    setSearchValue,\r\n    setSearchPattern,\r\n  };\r\n}\r\n","import { ref } from \"vue\";\r\n\r\nimport LocalEmitter from \"../tools/LocalEmitter\";\r\n\r\nexport default function useEmitter() {\r\n  const emitter = ref(new LocalEmitter());\r\n\r\n  return { emitter };\r\n}\r\n","import { ref } from \"vue\";\r\n\r\nimport ExtendedClickOutside from \"extended-click-outside\";\r\n\r\nexport default function useClickOutside() {\r\n  const clickOutside = ref(new ExtendedClickOutside());\r\n\r\n  return { clickOutside };\r\n}\r\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n"],"names":["themeTypes","loaderThemeTypes","toggleIcons","iconFilters","iconSizes","createOptionTypes","specialKeysToBlock","toggleAppearenceSides","UnionPropType","String","Number","Boolean","Array","Object","Function","undefined","LocalEmitter","_createClass","_classCallCheck","this","_eventsStack","payload","_eventsRegistered","key","value","eventName","_this","proxies","filter","event","length","forEach","proxy","callback","push","Proxy","set","target","localEmitter","useToggle","loading","disabled","emitter","toggleSlotClass","computed","readonly","toggleOptionsList","code","emit","useCancel","showSearchField","selectedOptions","setSearchValue","setSearchPattern","cancel","deselectedOptions","index","clearAll","useLabels","label","createCustomOptionLabel","emptyObjectsPlaceholder","optionCreateLabel","option","customOptionLabel","isArray","join","toString","keys","getOwnPropertyNames","includes","JSON","stringify","usePreselectedOptions","showInsertWarnings","createLabel","isObjectOrArray","createdLabel","optionTypeRestrictor","isObjectArrayInstance","getPrototypeOf","constructor","name","isAnyInstance","isSymbol","console","warn","useSizes","iconSize","iconSizeClass","basicIconSize","getCurrentInstance","type","__name","style","version","viewBox","xmlns","_openBlock","_createElementBlock","_hoisted_1","_cache","_createElementVNode","d","props","__props","loaderIconFilter","inject","toRefs","iconFilterClass","basicFilter","_createVNode","LoaderIcon","class","_normalizeClass","_unref","width","height","x","y","id","out","in2","operator","tabindex","classes","increasedTabindex","role","onClick","args","onKeypress","_createBlock","ExtendedMultiselectLoader","CancelIcon","Debounce","timer","_localTimeout","_callback","_timer","clearTimeout","setTimeout","increaseDisplayBy","showDeselectIconLoader","multipleBlocksLimit","themeType","toggleMultipleBlocksLimit","optionsLimitIncreaser","ref","increaserClass","basicClassName","deselectClasses","limitRestriction","_","optionIncreaserAvailable","optionsLimitAchieved","overLimitOptionsCount","showLoaderIcon","watch","deep","deselectBlock","showMoreOptions","onBeforeMount","_hoisted_2","_toDisplayString","appropriatePlaceholder","_renderSlot","_ctx","$slots","_Fragment","_renderList","_withModifiers","$event","iconFilter","_createTextVNode","multipleBlocksLimitMessage","searchState","toRef","DebounceConstructor","blurSkip","searchFieldFocused","optionWillBeTriggered","searchFieldPreserving","searchPlaceholderPreserving","searchValue","singleLabel","blurSkipByToggleIcon","blurSkipByBlock","searchDebounce","searchPattern","RegExp","externalOptionsLoader","extendedInput","autoSelectSearchValue","createOnTheGo","createOptionPlaceholder","multiple","placeholder","searchFilterActive","toggleOptionsBySelect","togglingSavesSearchValue","attrs","useAttrs","hintBlockShown","multipleBlocksMargin","searchFieldForwarding","marginTop","placeholderBlockShown","searchFieldClass","mainClass","searchFieldClasses","prevState","state","pattern","expand","rollUp","rollupIfSelected","search","start","on","internalRollup","triggerState","preserveState","onMounted","nextTick","focus","accesskey","autocomplete","inputId","spellcheck","translate","onBlur","onFocus","onInput","labelBlockValue","_hoisted_3","ExtendedMultiselectMultiple","multipleBlocks","_withCtx","optionBlock","maxElements","fn","_hoisted_4","_hoisted_5","_hoisted_6","fieldWasShown","atopWithScroll","enterIndex","heightFromMounted","reactive","underWithScroll","optionsWrapper","anyOptionWrapperBlockHeight","autoSelectCreatedOption","chosenToggleAppearanceSide","clearBySelectWhenMultiple","createOptionFields","createOptionType","disableByField","disabledPrimitiveOptionsConverted","highlightOptions","searchByField","maxOptionsCount","minOptionsCount","options","optionsPadding","restrictedOptions","selectedOptionsShown","showMarker","specialKeysBlock","toggleMaxHeight","toggleMinHeight","availableOptions","filteredOptions","availableOptionType","lookForSimpleOptions","lookForObjectOptions","finalOptionsList","filterBySearchPattern","theme","emptyOptionsList","emptySearchResult","heightFromProps","heightRecord","defineProperty","enumerable","errorMessage","maxOptionsWereSelected","markerShapeMargin","minOptionsWereNotSelected","optionHeightByProps","padding","paddingTop","paddingLeft","paddingBottom","paddingRight","assign","showCreateNewOptionBlock","styles","createNewOption","newOption","createObjectOption","unshift","selectOption","field","writable","configurable","defineDisabledOption","convertedOption","optionsList","test","internalSearchResult","calculatedOptionLabel","find","selectedOption","calculatedSelectedOptionLabel","compareWithSelected","emptyObject","markerShapeClass","optionCreateRole","optionIsDisabled","optionHighlightClasses","clickEvent","keyboardEvent","altKeyBlock","ctrlKeyBlock","shiftKeyBlock","altKey","ctrlKey","shiftKey","keyBlocker","classList","contains","findIndex","skipNextRemoval","selectOptionEmitter","setEnterIndex","getAttribute","showCurrentMarker","triggerOptionBeforeSelection","ResizeObserver","afterLoading","offsetHeight","scrollHeight","borderTopRightRadius","top","borderBottomRightRadius","calculateTopOffset","observe","onMousedown","onMouseenter","selected","fill","dropdownActive","toggleIcon","classesSummary","iconFilterRotationClass","icon","BaseArrowIcon","DoubleArrowIcon","WideArrowIcon","CircleArrowIcon","InnerArrowIcon","TriangleArrowIcon","TriangleCircleArrowIcon","_resolveDynamicComponent","__emit","selectedOptionsWatcher","rawOptions","togglePattern","extendedMultiselect","extendedMultiselectToggle","extendedMultiselectWrapper","extendedMultiselectOptions","defaultExpanded","dropdownDisabled","disabledPrimitiveOptions","errorBorderColor","modelValue","optionsCountRestriction","preselectedOption","preselectedOptions","resetSearchByValue","simpleEvents","showClearIcon","toggleAppearanceSide","wrongCurrentValue","useSearchValue","provide","clickOutside","ExtendedClickOutside","slots","useSlots","localClassList","clear","map","disabledOption","displayWrongValue","borderColor","expanded","borderStyles","borderTopLeftRadius","borderBottomLeftRadius","internalLoading","mappedOptions","restrictedOption","roledescription","tabindexIfSearch","wrapperClasses","prevValue","toRaw","setPreselectedOptionsByModelValue","activeEmitter","eventData","closeEmitter","createEventFields","fieldName","eventFields","fieldFocus","mouseEvent","toggleOptionsRestrictor","customFilteredCancel","toggleCustomRestrictor","customFilteredSelf","filteredHasCancel","toggleDetector","filteredHasToggle","loadOptionsByExternalLoader","initialValue","then","setPreselectedOptionsByConditions","removeSelectedOptions","single","modelValueMapped","resetEnterIndex","selectByEnter","setPreselectedOption","restriction","mappedSelectedOptions","setPreselectedOptions","async","allOptionsWereSelected","withRemoval","updateModelValue","initialLength","toggleAppearanceRestrictorActivate","window","$el","innerHeight","getBoundingClientRect","toggleAppearanceRestrictor","blockType","eventTarget","customToggle","children","parentNode","mode","prototype","call","className","e","toggleRestrictor","targetContentBlock","generalRestriction","filteredCustomSelf","filteredHasBlock","filteredHasSlot","filteredSelf","toggleBlockRestrictor","deselectedOption","splice","createdOption","limit","init","instanceRef","__expose","onKeyup","onMouseleave","_normalizeStyle","ExtendedMultiselectInput","ExtendedMultiselectToggle","ExtendedMultiselectCancel","_Transition","ExtendedMultiselectOptions","css","insertAt","document","head","getElementsByTagName","createElement","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode"],"mappings":"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","x_google_ignoreList":[29]}